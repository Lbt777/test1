(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9f09ca2","chunk-4ba3d483","chunk-2d22d7ea","chunk-2d20f785","chunk-2d0a4474"],{"0680":function(e,t,a){"use strict";a.r(t),a.d(t,"getDict",(function(){return i}));a("96cf");var r=a("1da1"),n=a("4360"),i=function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n["store"].dispatch("dictionary/getDictionary",t);case 2:return e.abrupt("return",n["store"].getters["dictionary/getDictionary"][t]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"0755":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"search-term"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchInfo}},[a("el-form-item",{attrs:{label:"标题"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{placeholder:"请输入",clearable:""},model:{value:e.searchInfo.title,callback:function(t){e.$set(e.searchInfo,"title",t)},expression:"searchInfo.title"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.searchInfo.status,callback:function(t){e.$set(e.searchInfo,"status",t)},expression:"searchInfo.status"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.openDialog}},[e._v("新增文章")])],1)],1)],1),a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{label:"标题",prop:"title","min-width":"220","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"摘要",prop:"summary",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"内容",prop:"content",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"图片地址",prop:"sourceUrl",width:"120","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"查看次数",prop:"viewCount",width:"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"创建时间",prop:"CreateTimeStr",width:"180","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"状态",prop:"statusName",width:"100","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"按钮组",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"table-button",attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return e.updateTArticle(t.row)}}},[e._v("变更")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.deleteRow(t.row)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{style:{float:"right",padding:"20px"},attrs:{"current-page":e.page,"page-size":e.pageSize,"page-sizes":[10,30,50,100],total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}),a("el-dialog",{attrs:{width:"70%","before-close":e.closeDialog,visible:e.dialogFormVisible,title:"弹窗操作"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.formData,"label-position":"right","label-width":"80px"}},[a("el-form-item",{attrs:{label:"标题:"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.title,callback:function(t){e.$set(e.formData,"title",t)},expression:"formData.title"}})],1),a("el-form-item",{attrs:{label:"摘要:"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.summary,callback:function(t){e.$set(e.formData,"summary",t)},expression:"formData.summary"}})],1),a("el-form-item",{attrs:{label:"内容:"}},[a("quill-editor",{ref:"text",staticClass:"myQuillEditor",model:{value:e.formData.content,callback:function(t){e.$set(e.formData,"content",t)},expression:"formData.content"}})],1),a("el-form-item",{attrs:{label:"图片地址:"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-upload",{staticClass:"image-uploader",attrs:{action:e.path+"/fileUploadAndDownload/upload?action=article",data:this.formData,"before-upload":e.checkFile,headers:{"x-token":e.token},"on-error":e.uploadError,"on-success":e.uploadSuccess,"show-file-list":!1,drag:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v(" 将文件拖到此处，或"),a("em",[e._v("点击上传")])])])],1),a("el-col",{attrs:{span:12}},[a("div",{staticClass:"image-preview image-app-preview"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.formData.showUrl,expression:"formData.showUrl != ''"}],staticClass:"image-preview-wrapper"},[a("img",{attrs:{src:this.path+e.formData.showUrl}}),a("div",{staticClass:"image-preview-action"},[a("i",{staticClass:"el-icon-delete",on:{click:function(t){return e.deleteFile()}}})])])])])],1)],1),a("el-form-item",{attrs:{label:"查看数量:"}},[a("el-input",{attrs:{clearable:"",placeholder:"请输入"},model:{value:e.formData.viewCount,callback:function(t){e.$set(e.formData,"viewCount",e._n(t))},expression:"formData.viewCount"}})],1),a("el-form-item",{attrs:{label:"状态:"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.formData.status,callback:function(t){e.$set(e.formData,"status",t)},expression:"formData.status"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.enterDialog}},[e._v("确 定")])],1)],1)],1)},n=[],i=(a("ac1f"),a("5319"),a("96cf"),a("1da1")),l=a("5530"),o=a("f879"),s=a("5880"),c=a("c466"),u=a("a4a2"),d=a("953d"),f=a("b485"),p=(a("a753"),a("8096"),a("14e1"),Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_BASE_API),m={name:"TArticle",mixins:[u["default"]],components:{quillEditor:d["quillEditor"]},data:function(){return{statusList:[{value:"0",label:"显示"},{value:"1",label:"不显示"}],path:p,editorOption:{},listApi:o["getTArticleList"],dialogFormVisible:!1,type:"",deleteVisible:!1,multipleSelection:[],uploadFile:{},formData:{id:void 0,title:"",summary:"",content:"",sourceUrl:"",showUrl:"",viewCount:0,createTime:new Date,userId:0,status:0}}},computed:Object(l["a"])({},Object(s["mapGetters"])("user",["userInfo","token"])),filters:{formatDate:function(e){if(null!=e&&""!=e){var t=new Date(e);return Object(c["formatTimeToStr"])(t,"yyyy-MM-dd hh:mm:ss")}return""},formatBoolean:function(e){return null!=e?e?"是":"否":""}},methods:{onSubmit:function(){this.page=1,this.pageSize=10,this.getTableData()},deleteFile:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$confirm("此操作将永久删除文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.uploadFile.band_id=e.formData.id,t.next=3,Object(f["deleteFileByKey"])(e.uploadFile);case 3:a=t.sent,0==a.code&&(e.uploadFile={},e.formData.sourceUrl="",e.$message({type:"success",message:"删除成功!"}),1==e.tableData.length&&e.page--,e.getTableData());case 5:case"end":return t.stop()}}),t)})))).catch((function(){e.$message({type:"info",message:"已取消删除"})}));case 1:case"end":return t.stop()}}),t)})))()},checkFile:function(e){this.fullscreenLoading=!0;var t="image/jpeg"===e.type,a="image/png"===e.type,r=e.size/1024/1024<2;return t||a||(this.$message.error("上传头像图片只能是 JPG或png 格式!"),this.fullscreenLoading=!1),r||(this.$message.error("上传头像图片大小不能超过 2MB!"),this.fullscreenLoading=!1),(a||t)&&r},uploadSuccess:function(e){this.fullscreenLoading=!1,0==e.code?(e.data.file&&(this.uploadFile=e.data.file,this.formData.sourceUrl=e.data.file.url,this.formData.showUrl=e.data.file.url.replace("resource/dist/","")),this.$message({type:"success",message:"上传成功"}),0==e.code&&this.getTableData()):this.$message({type:"warning",message:e.msg})},uploadError:function(){this.$message({type:"error",message:"上传失败"}),this.fullscreenLoading=!1},handleSelectionChange:function(e){this.multipleSelection=e},deleteRow:function(e){var t=this;this.$confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){console.log(e),t.deleteTArticle(e)}))},updateTArticle:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["findTArticle"])({ID:e.id});case 2:r=a.sent,t.type="update",0==r.code&&(t.formData=r.data.retArticle,t.formData.showUrl=t.formData.sourceUrl.replace("resource/dist/",""),t.uploadFile.url=t.formData.sourceUrl,t.dialogFormVisible=!0);case 5:case"end":return a.stop()}}),a)})))()},closeDialog:function(){this.dialogFormVisible=!1,this.formData={showUrl:"",title:"",summary:"",content:"",sourceUrl:"",viewCount:0,createTime:new Date,userId:0,status:0}},deleteTArticle:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(o["deleteTArticle"])({id:e.id});case 2:r=a.sent,0==r.code&&(t.$message({type:"success",message:"删除成功"}),1==t.tableData.length&&t.page--,t.getTableData());case 4:case"end":return a.stop()}}),a)})))()},enterDialog:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.t0=e.type,t.next="create"===t.t0?3:"update"===t.t0?7:11;break;case 3:return t.next=5,Object(o["createTArticle"])(e.formData);case 5:return a=t.sent,t.abrupt("break",15);case 7:return t.next=9,Object(o["updateTArticle"])(e.formData);case 9:return a=t.sent,t.abrupt("break",15);case 11:return t.next=13,Object(o["createTArticle"])(e.formData);case 13:return a=t.sent,t.abrupt("break",15);case 15:0==a.code&&(e.$message({type:"success",message:"创建/更改成功"}),e.closeDialog(),e.getTableData());case 16:case"end":return t.stop()}}),t)})))()},openDialog:function(){this.type="create",this.dialogFormVisible=!0}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getTableData();case 2:case"end":return t.stop()}}),t)})))()}},h=m,g=(a("57d6"),a("2877")),b=Object(g["a"])(h,r,n,!1,null,"7d9d39a4",null);t["default"]=b.exports},"57d6":function(e,t,a){"use strict";var r=a("9ad8"),n=a.n(r);n.a},"9ad8":function(e,t,a){},a4a2:function(e,t,a){"use strict";a.r(t);a("4de4");var r=a("5530"),n=(a("96cf"),a("1da1")),i=a("0680");t["default"]={data:function(){return{page:1,total:10,pageSize:10,tableData:[],searchInfo:{}}},methods:{filterDict:function(e,t){var a=this[t+"Options"]&&this[t+"Options"].filter((function(t){return t.value==e}));return a&&a[0]&&a[0].label},getDict:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(i["getDict"])(e);case 2:return r=a.sent,t[e+"Options"]=r,a.abrupt("return",r);case 5:case"end":return a.stop()}}),a)})))()},handleSizeChange:function(e){this.pageSize=e,this.getTableData()},handleCurrentChange:function(e){this.page=e,this.getTableData()},getTableData:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var n,i,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:t.page,i=e.length>1&&void 0!==e[1]?e[1]:t.pageSize,a.next=4,t.listApi(Object(r["a"])({page:n,pageSize:i},t.searchInfo));case 4:l=a.sent,0==l.code&&(t.tableData=l.data.list,t.total=l.data.total,t.page=l.data.page,t.pageSize=l.data.pageSize);case 6:case"end":return a.stop()}}),a)})))()}}}},b485:function(e,t,a){"use strict";a.r(t),a.d(t,"getFileList",(function(){return n})),a.d(t,"deleteFile",(function(){return i})),a.d(t,"deleteFileByKey",(function(){return l}));var r=a("b775"),n=function(e){return Object(r["default"])({url:"/fileUploadAndDownload/getFileList",method:"post",data:e})},i=function(e){return Object(r["default"])({url:"/fileUploadAndDownload/deleteFile",method:"post",data:e})},l=function(e){return Object(r["default"])({url:"/fileUploadAndDownload/deleteFileByKey",method:"post",data:e})}},c466:function(e,t,a){"use strict";a.r(t),a.d(t,"formatTimeToStr",(function(){return r}));a("4d63"),a("ac1f"),a("25f0"),a("5319");function r(e,t){var a=new Date(e).Format("yyyy-MM-dd hh:mm:ss");return t&&(a=new Date(e).Format(t)),a.toLocaleString()}Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var a in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+a+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[a]:("00"+t[a]).substr((""+t[a]).length)));return e}},f879:function(e,t,a){"use strict";a.r(t),a.d(t,"createTArticle",(function(){return n})),a.d(t,"deleteTArticle",(function(){return i})),a.d(t,"deleteTArticleByIds",(function(){return l})),a.d(t,"updateTArticle",(function(){return o})),a.d(t,"findTArticle",(function(){return s})),a.d(t,"getTArticleList",(function(){return c}));var r=a("b775"),n=function(e){return Object(r["default"])({url:"/article/createTArticle",method:"post",data:e})},i=function(e){return Object(r["default"])({url:"/article/deleteTArticle",method:"delete",data:e})},l=function(e){return Object(r["default"])({url:"/article/deleteTArticleByIds",method:"delete",data:e})},o=function(e){return Object(r["default"])({url:"/article/updateTArticle",method:"put",data:e})},s=function(e){return Object(r["default"])({url:"/article/findTArticle",method:"get",params:e})},c=function(e){return Object(r["default"])({url:"/article/getTArticleList",method:"get",params:e})}}}]);