import{d as te,r as n,c as me,I as we,u as Ae,b as w,a as ye,O as Be,J as Ce,o as Se,R as ke,a0 as Ie,aq as be,ar as Te,as as De,w as Ue,e as r,f as p,g as R,l as t,v as ee,F as ae,t as l,h as o,m as C,j as E,s as M,B as P,Y as Qe,V as y,a2 as S,a3 as f,at as Fe,au as Ge,av as $e,aw as se,ax as qe,ay as Oe,M as Re,a7 as Ee,N as Ne,H as Ve,p as A,y as ze,z as Le,az as Me,aA as Pe,A as xe}from"./index.b5e6b402.js";/* empty css              *//* empty css               */import{_ as He}from"./index.aadd277a.js";const We="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAASBAMAAACzwgOtAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUdwTAB23QB23QB23gB13QB03gB13QBz3wB01gB13QB03gB23ZhS5jsAAAALdFJOUwDdwvRNgR8tFpdphPot7wAAAGhJREFUCNdjYEAGLIqCMDCBIXk3HGxl8EZwNqHKcCE4CgwMs2HszQkMDIwwzhag2ezWUE4AyCZvmFkgwAnhSEAcoQ3mOEA4yRBLoM6DWgIB0bt3b2yAcZh2794O9waH9O4FCE8ViYIpAPzBUd4PZBkqAAAAAElFTkSuQmCC",Ze=k=>(ze("data-v-29d8646d"),k=k(),Le(),k),je={class:"main"},Ke={class:"up"},Je={class:"gqc"},Ye={class:"names"},Xe={class:"blance recharge"},ea={class:"gqc"},aa={class:"names"},sa={class:"blance"},ta={key:1,class:"gqc"},la={class:"names"},na={class:"sildes"},ca={key:0,class:"u"},oa={key:1,class:"u"},ia={key:0,class:"tips"},ua={class:"box"},ra={class:"titles"},da={class:"userInput"},va={class:"type"},ha={key:0,class:"w_down"},_a=Ze(()=>t("img",{src:We,alt:""},null,-1)),pa=[_a],fa={key:0,class:"estimate"},ga={key:1,class:"tipsBox"},ma={class:"e_tips"},wa={class:"e_tips e_tips_color"},Aa={class:"e_tips"},ya={class:"e_tips e_tips_color"},Ba={class:"btn"},Ca=te({name:"Withdrawal"}),Sa=te({...Ca,setup(k){let d=n({});const _=me(),I=we(),x=Ae(),b=n(!1),c=n("USDT"),g=n(""),le=987643;let v=n(!1),T=n(300);const H=n(10),D=n(0),U=n(0),ne=n(se),s=n("withdrawal"),Q=n(""),W=n([{name:"GQC",value:Me},{name:"SCT",value:Pe}]),Z=w(()=>A(_.address)),F=w(()=>A(_.BalanceGQC)),G=w(()=>A(_.BalanceUSDT)),$=w(()=>A(_.BalanceSCT)),ce=w(()=>A(_.withdrawal)),oe=w(()=>A(_.contractInstance)),ie=w(()=>A(_.GQCcontractInstance)),ue=w(()=>A(_.SCTcontractInstance)),i=n(!1),N=n(0),q=n(0),j=n(0);let O=ye({month:0,strDate:0,year:0});O=Be();async function K(){let e=await Qe();d.value=e.data}const J=(e,a)=>{switch(a){case"GQC":D.value=e.gqcBalance,U.value=F.value;break;case"USDT":D.value=e.usdtBalance,U.value=G.value;break;case"SCT":D.value=e.sctBalance,U.value=$.value;break}},Y=e=>{b.value=!1,c.value!==e.name&&(g.value="",c.value=e.name,ne.value=e.value,J(d.value,e.name),V(c.value,""))};function re(e){V(c.value,+e),s.value==="pendingOrder"?+e?N.value=y(+e/q.value,6):N.value=0:s.value==="withdrawal"&&(c.value==="USDT"?+e&&+e<=d.value.usdtBalance?i.value=!1:i.value=!0:c.value==="GQC"?+e&&+e<=d.value.gqcBalance?i.value=!1:i.value=!0:c.value==="SCT"&&(+e&&+e<=d.value.sctBalance?i.value=!1:i.value=!0))}function de(){s.value!=="pendingOrder"&&(b.value=!0)}const ve=()=>{x.push({path:"transactiondDtailed",query:{type:s.value}})};Ce(async()=>{s.value=I.query.name,Q.value=I.query.value,s.value==="recharge"?I.meta.title="recharge":s.value==="pendingOrder"&&(I.meta.title="pendingOrder"),Y({name:Q.value,value:W.value.find(e=>e.name===Q.value)})}),Se(async()=>{let e=await ke();q.value=e.data;let a=await Ie();j.value=a.data,console.log("\u7F13\u5B58",_),await K(),J(d.value,Q.value),await be(),await Te(),await De()}),Ue([F,G,$],()=>{V(c.value,0)},{deep:!0,immediate:!0});async function V(e,a){e==="USDT"?!G.value||a===""||G.value<a?i.value=!0:i.value=!1:e==="GQC"?!F.value||a===""||F.value<a?i.value=!0:i.value=!1:e==="SCT"&&(!$.value||a===""||$.value<a?i.value=!0:i.value=!1)}const z=e=>{if(!g.value)return;v.value=!0;let a=setInterval(()=>{T.value>0?(T.value--,T.value==0&&(clearInterval(a),v.value=!1)):(clearInterval(a),v.value=!1)},1e3);switch(e){case"recharge":pe(a,c.value);break;case"pendingOrder":+g.value<200?S(f("greaterThan")):fe(a,+g.value);break;case"withdrawal":he(a,+g.value,c.value);break}};async function he(e,a,u){let h=await Fe({amount:a,tokenType:u});h.status===200&&h.data.sign?_e(h.data,e):(S(f("withdrawal")+f("Failed")),v.value=!1,clearInterval(e))}function _e(e,a){ce.value.methods.claimReward(e.tokenAddress,e.address,e.amount,e.sign).send({from:Z.value,gasLimit:"300000"}).then(u=>{v.value=!1,clearInterval(a),L()}).catch(u=>{console.log(u),S(f("withdrawal")+f("Failed")),v.value=!1,clearInterval(a)})}function pe(e,a){let u=Ge($e(+g.value,18),le).toString(),h={Instance:"",address:""};a==="USDT"?h.Instance=oe:a==="GQC"?h.Instance=ie:a==="SCT"&&(h.Instance=ue),h.Instance.value.methods.transfer(se,u).send({from:Z.value,gasLimit:"300000"}).then(m=>{console.log(m),X(m.transactionHash,e)}).catch(m=>{console.log(m),S(f("RechargeFailed")),v.value=!1,clearInterval(e)})}async function fe(e,a){(await qe({amount:a})).status===200?L():S(f("pendingOrder")+f("Failed")),K(),clearInterval(e)}async function X(e,a){let u=await Oe(e);console.log(u),u.status===200&&u.data&&u.data.txId?(v.value=!1,clearInterval(a),L()):H.value===0?(S(f("RechargeFailed")),v.value=!1,clearInterval(a)):setTimeout(()=>{H.value--,X(e,a)},3e3)}function L(){x.push({path:"paymentSucceeded",query:{type:s.value}})}return(e,a)=>{const u=Re,h=Ee,m=Ne,ge=Ve;return r(),p(ae,null,[R(u,{right:!0,onClickRight:ve}),t("div",je,[t("div",{class:ee(["balance",s.value==="pendingOrder"?"center":""])},[t("div",Ke,[s.value==="pendingOrder"?(r(),p(ae,{key:0},[t("div",Je,[t("div",Ye,l(e.$t("my"))+"GQC",1),t("div",Xe,l(o(y)(o(d).gqcBalance,3)),1)]),t("div",ea,[t("div",aa,l(e.$t("my"))+"USDT",1),t("div",sa,l(o(y)(o(d).usdtBalance,3)),1)])],64)):(r(),p("div",ta,[t("div",la,l(e.$t("my"))+l(c.value),1),t("div",na,[t("div",{class:ee(["blance",s.value==="recharge"?"recharge":""])},l(o(y)(D.value,3)),3),c.value==="GQC"?(r(),p("div",ca,"\u2248"+l(o(y)(o(d).gqcBalance*q.value,3))+" USDT",1)):C("",!0),c.value==="SCT"?(r(),p("div",oa,"\u2248"+l(o(y)(o(d).sctBalance*j.value,3))+" USDT ",1)):C("",!0)])]))]),s.value!=="recharge"&&c.value==="GQC"?(r(),p("div",ia,l(e.$t("GQCIncreased",{price:q.value,time:`${o(O).year}-${o(O).month}-${o(O).strDate}`})),1)):C("",!0)],2),t("div",ua,[t("div",ra,l(e.$t("enterAmount",{type:e.$t(s.value)})),1),t("div",da,[R(h,{modelValue:g.value,"onUpdate:modelValue":[a[0]||(a[0]=B=>g.value=B),re],label:"",type:"number",placeholder:"0.00"},{button:E(()=>[t("div",{class:"w_type",onClick:de},[t("div",va,l(c.value),1),s.value!=="pendingOrder"?(r(),p("div",ha,pa)):C("",!0)])]),_:1},8,["modelValue"])]),s.value==="pendingOrder"?(r(),p("div",fa,l(e.$t("ExpectedAvailability"))+"\uFF1A"+l(N.value)+" GQC ",1)):C("",!0),s.value==="recharge"?(r(),p("div",ga,[t("div",ma,l(e.$t("WalletOnBlockchain")),1),t("div",wa,l(" "+c.value+" "),1),t("div",Aa,l(e.$t("balance")+" "),1),t("div",ya,l(o(y)(U.value,6)),1)])):C("",!0)]),t("div",Ba,[s.value==="recharge"?(r(),M(m,{key:0,type:"primary",block:"",color:"#1F75D9",onClick:a[1]||(a[1]=B=>z(s.value)),disabled:i.value},{default:E(()=>[P(l(e.$t("immediately",{type:e.$t(s.value)})),1)]),_:1},8,["disabled"])):s.value==="pendingOrder"?(r(),M(m,{key:1,type:"primary",block:"",color:"#1F75D9",onClick:a[2]||(a[2]=B=>z(s.value))},{default:E(()=>[P(l(e.$t("immediately",{type:e.$t(s.value)})),1)]),_:1})):(r(),M(m,{key:2,type:"primary",block:"",color:"#1F75D9",onClick:a[3]||(a[3]=B=>z(s.value)),disabled:i.value},{default:E(()=>[P(l(e.$t("immediately",{type:e.$t(s.value)})),1)]),_:1},8,["disabled"]))])]),R(o(He),{showLoading:o(v),countDown:o(T)},null,8,["showLoading","countDown"]),R(ge,{show:b.value,"onUpdate:show":a[4]||(a[4]=B=>b.value=B),actions:W.value,"cancel-text":e.$t("cancel"),"close-on-click-action":"",onSelect:Y},null,8,["show","actions","cancel-text"])],64)}}});const Da=xe(Sa,[["__scopeId","data-v-29d8646d"]]);export{Da as default};
