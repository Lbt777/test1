import{d as te,r as n,c as _e,I as ge,u as fe,b as B,a as me,N as we,ab as Ae,o as ye,Q as Be,an as Ce,w as ke,e as r,f as p,g as R,l as t,v as ae,F as se,t as l,h as u,m as y,j as E,s as P,B as H,X as Se,U as C,a0 as m,a1 as h,ao as be,ap as De,aq as Te,ar as x,as as Ue,at as Ie,K as qe,a5 as Fe,M as Qe,H as $e,p as k,y as Oe,z as Ge,au as Re,av as Ee,A as Ne}from"./index.c7aca455.js";/* empty css              *//* empty css               */import{_ as Ve}from"./index.697b02a8.js";const ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAASBAMAAACzwgOtAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUdwTAB23QB23QB23gB13QB03gB13QBz3wB01gB13QB03gB23ZhS5jsAAAALdFJOUwDdwvRNgR8tFpdphPot7wAAAGhJREFUCNdjYEAGLIqCMDCBIXk3HGxl8EZwNqHKcCE4CgwMs2HszQkMDIwwzhag2ezWUE4AyCZvmFkgwAnhSEAcoQ3mOEA4yRBLoM6DWgIB0bt3b2yAcZh2794O9waH9O4FCE8ViYIpAPzBUd4PZBkqAAAAAElFTkSuQmCC",Le=S=>(Oe("data-v-c3415401"),S=S(),Ge(),S),Me={class:"main"},Pe={class:"up"},He={class:"gqc"},xe={class:"names"},Ke={class:"blance recharge"},We={class:"gqc"},Ze={class:"names"},je={class:"blance"},Je={key:1,class:"gqc"},Xe={class:"names"},Ye={class:"sildes"},ea={key:0,class:"u"},aa={key:1,class:"u"},sa={key:0,class:"tips"},ta={class:"box"},la={class:"titles"},na={class:"userInput"},oa={class:"type"},ca={key:0,class:"w_down"},ia=Le(()=>t("img",{src:ze,alt:""},null,-1)),ua=[ia],ra={key:0,class:"estimate"},da={key:1,class:"tipsBox"},va={class:"e_tips"},ha={class:"e_tips e_tips_color"},pa={class:"e_tips"},_a={class:"e_tips e_tips_color"},ga={class:"btn"},fa=te({name:"Withdrawal"}),ma=te({...fa,setup(S){let d=n({});const _=_e(),b=ge(),K=fe(),D=n(!1),o=n("USDT"),g=n(""),le=987643;let v=n(!1),T=n(300);const W=n(5),U=n(0),I=n(0),ne=n(x),s=n("withdrawal"),q=n(""),N=n([{name:"USDT",value:x},{name:"GQC",value:Re},{name:"SCT",value:Ee}]),Z=B(()=>k(_.address)),F=B(()=>k(_.BalanceGQC)),Q=B(()=>k(_.BalanceUSDT)),$=B(()=>k(_.BalanceSCT)),oe=B(()=>k(_.withdrawal)),c=n(!1),V=n(0),O=n(0),j=n(0);let G=me({month:0,strDate:0,year:0});G=we();async function J(){let e=await Se();d.value=e.data,X(d.value,q.value)}const X=(e,a)=>{switch(a){case"GQC":U.value=e.gqcBalance,I.value=F.value;break;case"USDT":U.value=e.usdtBalance,I.value=Q.value;break;case"SCT":U.value=e.sctBalance,I.value=$.value;break}},Y=e=>{D.value=!1,o.value!==e.name&&(g.value="",o.value=e.name,ne.value=e.value,z(o.value),X(d.value,e.name))};function ce(e){z(o.value,+e),s.value==="pendingOrder"?+e?V.value=C(+e/O.value,6):V.value=0:s.value==="withdrawal"&&(o.value==="USDT"?+e&&+e<=d.value.usdtBalance?c.value=!1:c.value=!0:o.value==="GQC"?+e&&+e<=d.value.gqcBalance?c.value=!1:c.value=!0:o.value==="SCT"&&(+e&&+e<=d.value.sctBalance?c.value=!1:c.value=!0))}function ie(){s.value!=="pendingOrder"&&(D.value=!0)}const ue=()=>{K.push({path:"transactiondDtailed",query:{type:s.value}})};Ae(async()=>{s.value=b.query.name,q.value=b.query.value,s.value==="recharge"?(b.meta.title="recharge",N.value.splice(0,1)):s.value==="pendingOrder"&&(b.meta.title="pendingOrder"),Y({name:q.value,value:N.value.find(e=>e.name===q.value)})}),ye(async()=>{J();let e=await Be();O.value=e.data;let a=await Ce();j.value=a.data,console.log(_)}),ke([F,Q,$],()=>{z(o.value)},{deep:!0,immediate:!0});function z(e,a){e==="USDT"?!Q.value||a===""||Q.value<!a?c.value=!0:c.value=!1:e==="GQC"?!F.value||a===""||F.value<!a?c.value=!0:c.value=!1:e==="SCT"&&(!$.value||a===""||$.value<!a?c.value=!0:c.value=!1)}const L=e=>{if(!g.value)return;v.value=!0;let a=setInterval(()=>{if(T.value>0){if(T.value--,T.value==298)switch(e!=="withdrawal"&&(clearInterval(a),v.value=!1),e){case"recharge":ve(a,o.value);break;case"pendingOrder":+g.value<200?m(h("greaterThan")):he(a,+g.value);break;case"withdrawal":re(a,+g.value,o.value);break}}else clearInterval(a),v.value=!1,m(h("Failed"))},1e3)};async function re(e,a,i){let w=await be({amount:a,tokenType:i});w.status===200&&w.data.sign?de(w.data,e):(m(h("withdrawal")+h("Failed")),v.value=!1,clearInterval(e))}function de(e,a){oe.value.methods.claimReward(e.tokenAddress,e.address,e.amount,e.sign).send({from:Z.value,gasLimit:"300000"}).then(i=>{v.value=!1,clearInterval(a),M()}).catch(i=>{console.log(i),m(h("withdrawal")+h("Failed")),v.value=!1,clearInterval(a)})}function ve(e,a){let i=De(Te(+g.value,18),le).toString();(a==="USDT"?_.contractInstance:_.GQCcontractInstance).methods.transfer(x,i).send({from:Z.value,gasLimit:"300000"}).then(f=>{console.log(f),ee(f.transactionHash,e)}).catch(f=>{console.log(f),m(h("RechargeFailed")),v.value=!1,clearInterval(e)})}async function he(e,a){(await Ue({amount:a})).status===200?M():m(h("pendingOrder")+h("Failed")),J(),clearInterval(e)}async function ee(e,a){let i=await Ie(e);console.log(i),i.status===200&&i.data&&i.data.txId?(v.value=!1,clearInterval(a),M()):W.value===0?(m(h("RechargeFailed")),v.value=!1,clearInterval(a)):setTimeout(()=>{W.value--,ee(e,a)},3e3)}function M(){K.push({path:"paymentSucceeded",query:{type:s.value}})}return(e,a)=>{const i=qe,w=Fe,f=Qe,pe=$e;return r(),p(se,null,[R(i,{right:!0,onClickRight:ue}),t("div",Me,[t("div",{class:ae(["balance",s.value==="pendingOrder"?"center":""])},[t("div",Pe,[s.value==="pendingOrder"?(r(),p(se,{key:0},[t("div",He,[t("div",xe,l(e.$t("my"))+"GQC",1),t("div",Ke,l(u(C)(u(d).gqcBalance,3)),1)]),t("div",We,[t("div",Ze,l(e.$t("my"))+"USDT",1),t("div",je,l(u(C)(u(d).usdtBalance,3)),1)])],64)):(r(),p("div",Je,[t("div",Xe,l(e.$t("my"))+l(o.value),1),t("div",Ye,[t("div",{class:ae(["blance",s.value==="recharge"?"recharge":""])},l(U.value||0),3),o.value==="GQC"?(r(),p("div",ea,"\u2248"+l(u(C)(u(d).gqcBalance*O.value,3))+" USDT",1)):y("",!0),o.value==="SCT"?(r(),p("div",aa,"\u2248"+l(u(C)(u(d).gqcBalance*j.value,3))+" USDT ",1)):y("",!0)])]))]),s.value!=="recharge"&&o.value==="GQC"?(r(),p("div",sa,l(e.$t("GQCIncreased",{price:O.value,time:`${u(G).year}-${u(G).month}-${u(G).strDate}`})),1)):y("",!0)],2),t("div",ta,[t("div",la,l(e.$t("enterAmount",{type:e.$t(s.value)})),1),t("div",na,[R(w,{modelValue:g.value,"onUpdate:modelValue":[a[0]||(a[0]=A=>g.value=A),ce],label:"",type:"number",placeholder:"0.00"},{button:E(()=>[t("div",{class:"w_type",onClick:ie},[t("div",oa,l(o.value),1),s.value!=="pendingOrder"?(r(),p("div",ca,ua)):y("",!0)])]),_:1},8,["modelValue"])]),s.value==="pendingOrder"?(r(),p("div",ra,l(e.$t("ExpectedAvailability"))+"\uFF1A"+l(V.value)+" GQC ",1)):y("",!0),s.value==="recharge"?(r(),p("div",da,[t("div",va,l(e.$t("WalletOnBlockchain")),1),t("div",ha,l(o.value),1),t("div",pa,l(e.$t("balance")),1),t("div",_a,l(I.value),1)])):y("",!0)]),t("div",ga,[s.value==="recharge"?(r(),P(f,{key:0,type:"primary",block:"",color:"#1F75D9",onClick:a[1]||(a[1]=A=>L(s.value)),disabled:c.value},{default:E(()=>[H(l(e.$t("immediately",{type:e.$t(s.value)})),1)]),_:1},8,["disabled"])):s.value==="pendingOrder"?(r(),P(f,{key:1,type:"primary",block:"",color:"#1F75D9",onClick:a[2]||(a[2]=A=>L(s.value))},{default:E(()=>[H(l(e.$t("immediately",{type:e.$t(s.value)})),1)]),_:1})):(r(),P(f,{key:2,type:"primary",block:"",color:"#1F75D9",onClick:a[3]||(a[3]=A=>L(s.value)),disabled:c.value},{default:E(()=>[H(l(e.$t("immediately",{type:e.$t(s.value)})),1)]),_:1},8,["disabled"]))])]),R(u(Ve),{showLoading:u(v),countDown:u(T)},null,8,["showLoading","countDown"]),R(pe,{show:D.value,"onUpdate:show":a[4]||(a[4]=A=>D.value=A),actions:N.value,"cancel-text":e.$t("cancel"),"close-on-click-action":"",onSelect:Y},null,8,["show","actions","cancel-text"])],64)}}});const Ca=Ne(ma,[["__scopeId","data-v-c3415401"]]);export{Ca as default};
