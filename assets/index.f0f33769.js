import{d as K,r as c,c as re,I as ue,u as de,b as I,a as ve,M as he,aa as pe,o as _e,P as ge,w as me,e as r,f as _,g as $,l as s,v as N,F as L,t as l,h as n,m as A,j as F,s as V,B as z,am as M,an as fe,W as we,R as T,Z as m,$ as v,ao as ye,ap as Ae,aq as Be,ar as Ce,as as ke,K as Se,a4 as be,L as De,H as Ue,p as q,y as Ie,z as $e,A as Fe}from"./index.384d21b8.js";/* empty css              *//* empty css               */import{_ as Te}from"./index.7fa6ea13.js";const qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAASBAMAAACzwgOtAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAkUExURUdwTAB23QB23QB23gB13QB03gB13QBz3wB01gB13QB03gB23ZhS5jsAAAALdFJOUwDdwvRNgR8tFpdphPot7wAAAGhJREFUCNdjYEAGLIqCMDCBIXk3HGxl8EZwNqHKcCE4CgwMs2HszQkMDIwwzhag2ezWUE4AyCZvmFkgwAnhSEAcoQ3mOEA4yRBLoM6DWgIB0bt3b2yAcZh2794O9waH9O4FCE8ViYIpAPzBUd4PZBkqAAAAAElFTkSuQmCC",Oe=B=>(Ie("data-v-5dc87002"),B=B(),$e(),B),Qe={class:"main"},Re={class:"up"},Ee={class:"gqc"},Ge={class:"names"},Ne={class:"blance recharge"},Le={class:"gqc"},Ve={class:"names"},ze={class:"blance"},Me={class:"gqc"},He={class:"names"},Pe={key:0,class:"u"},We={class:"gqc"},Ze={class:"names"},xe={key:0,class:"tips"},Ke={class:"box"},je={class:"titles"},Je={class:"userInput"},Ye={class:"type"},Xe={key:0,class:"w_down"},ea=Oe(()=>s("img",{src:qe,alt:""},null,-1)),aa=[ea],ta={key:0,class:"estimate"},sa={key:1,class:"tipsBox"},la={class:"e_tips"},na={class:"e_tips e_tips_color"},oa={class:"e_tips"},ca={class:"e_tips e_tips_color"},ia={class:"btn"},ra=K({name:"Withdrawal"}),ua=K({...ra,setup(B){let h=c({});const f=re(),O=ue(),H=de(),C=c(!1),i=c("USDT"),g=c(""),j=987643;let u=c(!1),k=c(300);const P=c(5),J=c(M),t=c("withdrawal"),Y=[{name:"USDT",value:M},{name:"GQC",value:fe}],W=I(()=>q(f.address)),S=I(()=>q(f.BalanceGQC)),b=I(()=>q(f.BalanceUSDT)),X=I(()=>q(f.withdrawal)),d=c(!1),Q=c(0),D=c(0);let U=ve({month:0,strDate:0,year:0});U=he();async function Z(){let e=await we();h.value=e.data}const ee=e=>{C.value=!1,i.value=e.name,J.value=e.value,R(i.value)};function ae(e){R(i.value,+e),t.value==="pendingOrder"?+e?Q.value=T(+e/D.value,6):Q.value=0:t.value==="withdrawal"&&(i.value==="USDT"?+e&&+e<=h.value.usdtBalance?d.value=!1:d.value=!0:i.value==="GQC"&&(+e&&+e<=h.value.gqcBalance?d.value=!1:d.value=!0))}function te(){t.value!=="pendingOrder"&&(C.value=!0)}const se=()=>{H.push({path:"transactiondDtailed",query:{type:t.value}})};pe(async()=>{t.value=O.query.type,t.value==="recharge"?O.meta.title="recharge":t.value==="pendingOrder"&&(O.meta.title="pendingOrder")}),_e(async()=>{Z();let e=await ge();D.value=e.data}),me([S,b],()=>{R(i.value)},{deep:!0,immediate:!0});function R(e,a){e==="USDT"?!b.value||a===""||b.value<!a?d.value=!0:d.value=!1:!S.value||a===""||S.value<!a?d.value=!0:d.value=!1}const E=e=>{if(!g.value)return;u.value=!0;let a=setInterval(()=>{if(k.value>0){if(k.value--,k.value==298)switch(e!=="withdrawal"&&(clearInterval(a),u.value=!1),e){case"recharge":oe(a,i.value);break;case"pendingOrder":+g.value<200?m(v("greaterThan")):ce(a,+g.value);break;case"withdrawal":le(a,+g.value,i.value);break}}else clearInterval(a),u.value=!1,m(v("Failed"))},1e3)};async function le(e,a,o){let w=await ye({amount:a,tokenType:o});w.status===200&&w.data.sign?ne(w.data,e):(m(v("withdrawal")+v("Failed")),u.value=!1,clearInterval(e))}function ne(e,a){X.value.methods.claimReward(e.tokenAddress,e.address,e.amount,e.sign).send({from:W.value,gasLimit:"300000"}).then(o=>{u.value=!1,clearInterval(a),G()}).catch(o=>{console.log(o),m(v("withdrawal")+v("Failed")),u.value=!1,clearInterval(a)})}function oe(e,a){let o=Ae(Be(+g.value,18),j).toString();(a==="USDT"?f.contractInstance:f.GQCcontractInstance).methods.transfer(M,o).send({from:W.value,gasLimit:"300000"}).then(p=>{console.log(p),x(p.transactionHash,e)}).catch(p=>{console.log(p),m(v("RechargeFailed")),u.value=!1,clearInterval(e)})}async function ce(e,a){(await Ce({amount:a})).status===200?G():m(v("pendingOrder")+v("Failed")),Z(),clearInterval(e)}async function x(e,a){let o=await ke(e);console.log(o),o.status===200&&o.data&&o.data.txId?(u.value=!1,clearInterval(a),G()):P.value===0?(m(v("RechargeFailed")),u.value=!1,clearInterval(a)):setTimeout(()=>{P.value--,x(e,a)},3e3)}function G(){H.push({path:"paymentSucceeded",query:{type:t.value}})}return(e,a)=>{const o=Se,w=be,p=De,ie=Ue;return r(),_(L,null,[$(o,{right:!0,onClickRight:se}),s("div",Qe,[s("div",{class:N(["balance",t.value==="pendingOrder"?"center":""])},[s("div",Re,[t.value==="pendingOrder"?(r(),_(L,{key:0},[s("div",Ee,[s("div",Ge,l(e.$t("my"))+"GQC",1),s("div",Ne,l(n(T)(n(h).gqcBalance,3)),1)]),s("div",Le,[s("div",Ve,l(e.$t("my"))+"USDT",1),s("div",ze,l(n(T)(n(h).usdtBalance,3)),1)])],64)):(r(),_(L,{key:1},[s("div",Me,[s("div",He,l(e.$t("my"))+"GQC",1),s("div",{class:N(["blance",t.value==="recharge"?"recharge":""])},l(n(h).gqcBalance),3),t.value==="withdrawal"?(r(),_("div",Pe,"\u2248"+l(n(T)(n(h).gqcBalance*D.value,3))+" USDT",1)):A("",!0)]),s("div",We,[s("div",Ze,l(e.$t("my"))+"USDT",1),s("div",{class:N(["blance",t.value==="recharge"?"recharge":""])},l(n(h).usdtBalance),3)])],64))]),t.value!=="recharge"?(r(),_("div",xe,l(e.$t("GQCIncreased",{price:D.value,time:`${n(U).year}-${n(U).month}-${n(U).strDate}`})),1)):A("",!0)],2),s("div",Ke,[s("div",je,l(e.$t("enterAmount",{type:e.$t(t.value)})),1),s("div",Je,[$(w,{modelValue:g.value,"onUpdate:modelValue":[a[0]||(a[0]=y=>g.value=y),ae],label:"",type:"number",placeholder:"0.00"},{button:F(()=>[s("div",{class:"w_type",onClick:te},[s("div",Ye,l(i.value),1),t.value!=="pendingOrder"?(r(),_("div",Xe,aa)):A("",!0)])]),_:1},8,["modelValue"])]),t.value==="pendingOrder"?(r(),_("div",ta,l(e.$t("ExpectedAvailability"))+"\uFF1A"+l(Q.value)+" GQC",1)):A("",!0),t.value==="recharge"?(r(),_("div",sa,[s("div",la,l(e.$t("WalletOnBlockchain")),1),s("div",na,l(i.value),1),s("div",oa,l(e.$t("balance")),1),s("div",ca,l(i.value==="USDT"?n(b):n(S)),1)])):A("",!0)]),s("div",ia,[t.value==="recharge"?(r(),V(p,{key:0,type:"primary",block:"",color:"#1F75D9",onClick:a[1]||(a[1]=y=>E(t.value)),disabled:d.value},{default:F(()=>[z(l(e.$t("immediately",{type:e.$t(t.value)})),1)]),_:1},8,["disabled"])):t.value==="pendingOrder"?(r(),V(p,{key:1,type:"primary",block:"",color:"#1F75D9",onClick:a[2]||(a[2]=y=>E(t.value))},{default:F(()=>[z(l(e.$t("immediately",{type:e.$t(t.value)})),1)]),_:1})):(r(),V(p,{key:2,type:"primary",block:"",color:"#1F75D9",onClick:a[3]||(a[3]=y=>E(t.value)),disabled:d.value},{default:F(()=>[z(l(e.$t("immediately",{type:e.$t(t.value)})),1)]),_:1},8,["disabled"]))])]),$(n(Te),{showLoading:n(u),countDown:n(k)},null,8,["showLoading","countDown"]),$(ie,{show:C.value,"onUpdate:show":a[4]||(a[4]=y=>C.value=y),actions:Y,"cancel-text":e.$t("cancel"),"close-on-click-action":"",onSelect:ee},null,8,["show","cancel-text"])],64)}}});const _a=Fe(ua,[["__scopeId","data-v-5dc87002"]]);export{_a as default};
