import{D as Z,E as P,G as x,H as D,d as G,r as y,a as f,I as H,J as ee,w as $,L as te,i as h,M as z,N as U,O as J,P as K,Q,R as X,S as ae,T as ne,U as O,V as se,W as le,X as oe,h as ie,c as ue,o as ce,b as de,e as s,t as I,u as L,Y as re,f as me,j as ve,k as _e,F as fe,Z as he,$ as ge,B as be,a0 as ye,p as Se,l as we,a1 as pe,_ as Pe}from"./index.0e52a31e.js";import{_ as Ie}from"./D_bg.895f01fd.js";const[Te,k]=Z("stepper"),Ve=200,Be=600,E=(e,d)=>String(e)===String(d),Ne={min:P(1),max:P(1/0),name:P(""),step:P(1),theme:String,integer:Boolean,disabled:Boolean,showPlus:x,showMinus:x,showInput:x,longPress:x,allowEmpty:Boolean,modelValue:D,inputWidth:D,buttonSize:D,placeholder:String,disablePlus:Boolean,disableMinus:Boolean,disableInput:Boolean,beforeChange:Function,defaultValue:P(1),decimalLength:D};var Ce=G({name:Te,props:Ne,emits:["plus","blur","minus","focus","change","overlimit","update:modelValue"],setup(e,{emit:d}){const o=t=>{const{min:n,max:r,allowEmpty:C,decimalLength:c}=e;return C&&t===""||(t=Q(String(t),!e.integer),t=t===""?0:+t,t=Number.isNaN(t)?+n:t,t=Math.max(Math.min(+r,t),+n),X(c)&&(t=t.toFixed(+c))),t},g=()=>{var t;const n=(t=e.modelValue)!=null?t:e.defaultValue,r=o(n);return E(r,e.modelValue)||d("update:modelValue",r),r};let u;const v=y(),a=y(g()),b=f(()=>e.disabled||e.disableMinus||a.value<=+e.min),_=f(()=>e.disabled||e.disablePlus||a.value>=+e.max),F=f(()=>({width:H(e.inputWidth),height:H(e.buttonSize)})),S=f(()=>ee(e.buttonSize)),A=()=>{const t=o(a.value);E(t,a.value)||(a.value=t)},T=t=>{e.beforeChange?se(e.beforeChange,{args:[t],done(){a.value=t}}):a.value=t},w=()=>{if(u==="plus"&&_.value||u==="minus"&&b.value){d("overlimit",u);return}const t=u==="minus"?-e.step:+e.step,n=o(le(+a.value,t));T(n),d(u)},M=t=>{const n=t.target,{value:r}=n,{decimalLength:C}=e;let c=Q(String(r),!e.integer);if(X(C)&&c.includes(".")){const q=c.split(".");c=`${q[0]}.${q[1].slice(0,+C)}`}e.beforeChange?n.value=String(a.value):E(r,c)||(n.value=c);const Y=c===String(+c);T(Y?+c:c)},V=t=>{var n;e.disableInput?(n=v.value)==null||n.blur():d("focus",t)},l=t=>{const n=t.target,r=o(n.value);n.value=String(r),a.value=r,ae(()=>{d("blur",t),ne()})};let i,m;const B=()=>{m=setTimeout(()=>{w(),B()},Ve)},R=()=>{e.longPress&&(i=!1,clearTimeout(m),m=setTimeout(()=>{i=!0,w(),B()},Be))},N=t=>{e.longPress&&(clearTimeout(m),i&&O(t))},p=t=>{e.disableInput&&O(t)},j=t=>({onClick:n=>{O(n),u=t,w()},onTouchstartPassive:()=>{u=t,R()},onTouchend:N,onTouchcancel:N});return $(()=>[e.max,e.min,e.integer,e.decimalLength],A),$(()=>e.modelValue,t=>{E(t,a.value)||(a.value=o(t))}),$(a,t=>{d("update:modelValue",t),d("change",t,{name:e.name})}),te(()=>e.modelValue),()=>h("div",{role:"group",class:k([e.theme])},[z(h("button",J({type:"button",style:S.value,class:[k("minus",{disabled:b.value}),{[K]:!b.value}],"aria-disabled":b.value||void 0},j("minus")),null),[[U,e.showMinus]]),z(h("input",{ref:v,type:e.integer?"tel":"text",role:"spinbutton",class:k("input"),value:a.value,style:F.value,disabled:e.disabled,readonly:e.disableInput,inputmode:e.integer?"numeric":"decimal",placeholder:e.placeholder,"aria-valuemax":e.max,"aria-valuemin":e.min,"aria-valuenow":a.value,onBlur:l,onInput:M,onFocus:V,onMousedown:p},null),[[U,e.showInput]]),z(h("button",J({type:"button",style:S.value,class:[k("plus",{disabled:_.value}),{[K]:!_.value}],"aria-disabled":_.value||void 0},j("plus")),null),[[U,e.showPlus]])])}});const xe=oe(Ce);const W=e=>(Se("data-v-10a49f5d"),e=e(),we(),e),De={class:"main"},Le={class:"box"},ke={class:"conten"},Ee=W(()=>s("div",{class:"c_left"},[s("img",{src:Ie,alt:""})],-1)),Fe={class:"c_rig"},Ae=W(()=>s("div",{class:"title"},"NFT",-1)),Me=W(()=>s("div",{class:"tage"},"Open Daa",-1)),Re={class:"time"},$e={class:"buynum"},ze={class:"buy"},Ue={class:"setp"},Oe={class:"price"},Ge={class:"tips"},We={class:"zongjia"},je={class:"pri"},qe={class:"btn"},He=G({name:"transactionDetails"}),Je=G({...He,setup(e){const d=ie();let o=y(1);const g=ue();let u=y(!1);const v=y(!1);let a=y(300);const b=100,_=y(o.value*b),F=f(()=>g.usdt),S=f(()=>g.address),A=f(()=>g.usdtAuthorizationBalance),T=f(()=>g.main),w=async()=>{u.value=!0,v.value=!0;let l=setInterval(async()=>{a.value>0?a.value--:(clearInterval(l),u.value=!1)},1e3);A.value<_.value?M(l):V(l)};async function M(l){let i=he(1e8,18);await F.value.methods.approve(ge,i).send({from:S.value}).then(m=>{v.value=!1,console.log("res",m),g.SET_AppBalance(i),V(l)}).catch(m=>{console.log(m),v.value=!1,clearInterval(l)})}async function V(l){await T.value.methods.ido(o.value).send({from:S.value}).then(i=>{d.push({path:"paymentSucceeded",query:{num:o.value}}),v.value=!1,u.value=!1,clearInterval(l)}).catch(i=>{console.log(i),v.value=!1,u.value=!1,clearInterval(l)})}return(l,i)=>{const m=pe,B=xe,R=be,N=ye;return ce(),de(fe,null,[h(m),s("div",De,[s("div",Le,[s("div",ke,[Ee,s("div",Fe,[Ae,Me,s("div",Re,I(l.$t("afterPurchase")),1)])]),s("div",$e,[s("div",ze,I(l.$t("buy")),1),s("div",Ue,[h(B,{modelValue:L(o),"onUpdate:modelValue":i[0]||(i[0]=p=>re(o)?o.value=p:o=p),step:"1",min:"1",disabled:!1,integer:"",onChange:i[1]||(i[1]=p=>_.value=L(o)*b)},null,8,["modelValue"])])]),s("div",Oe,[s("div",Ge,[s("div",We,I(l.$t("TotalPrice")),1),s("div",je,I(_.value)+"U",1)])])]),s("div",qe,[me(` <van-button type="primary" block color="#1F75D9" @click="confirmPayment"\r
        :disabled="info.leftAmount == 0?true:RechargeBalance<total?true:false">{{ $t('ConfirmPayment') }}</van-button> `),h(R,{type:"primary",round:"",block:"",color:"#F8CF39",onClick:w,loading:v.value},{default:ve(()=>[_e(I(l.$t("ConfirmPayment")),1)]),_:1},8,["loading"])])]),h(N,{showLoading:L(u),countDown:L(a)},null,8,["showLoading","countDown"])],64)}}});const Xe=Pe(Je,[["__scopeId","data-v-10a49f5d"],["__file","D:/work/Daa/src/views/transactionDetails/index.vue"]]);export{Xe as default};
