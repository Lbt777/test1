import{d as W,c as E,a as N,r as o,a2 as M,a3 as X,o as n,b as i,i as w,e,s as R,j as L,F as I,z as $,f as S,u as p,b1 as G,b2 as H,a7 as J,a0 as O,t as c,K as Q,g as Y,k as Z,y as ee,ab as se,a1 as ae,B as te,p as ne,l as oe,_ as ie}from"./index.0e52a31e.js";/* empty css              */import{_ as ce}from"./index.168ab117.js";import{_ as le}from"./coin.3502b688.js";import{_ as de}from"./copy.77bc7e44.js";const x=h=>(ne("data-v-e7c7dd34"),h=h(),oe(),h),ue={class:"page"},re={class:"tab"},_e={class:"up"},ve={class:"left"},pe={class:"num"},he={class:"rig add"},me={class:"price"},fe=x(()=>e("div",{class:"unit"},"Daa",-1)),ge={class:"down"},ye={class:"time"},ke=x(()=>e("div",{class:"icon"},[e("img",{src:le,alt:""})],-1)),we={class:"cons"},xe={class:"up"},be={class:"left"},De={class:"num"},Te=["onClick"],Ce=x(()=>e("img",{src:de,alt:""},null,-1)),Le=[Ce],Ie={key:0,class:"rig reduce"},Se={class:"price"},Be=x(()=>e("div",{class:"unit"},"Daa",-1)),Ne={class:"down"},Re={class:"time"},$e={key:0,class:"tags tag"},We={key:1,class:"btn"},qe=W({name:"RevenueRecord"}),Ve=W({...qe,setup(h){const B=E(),{proxy:m}=ee(),q=N(()=>B.address),V=N(()=>B.main);let u=o(!1),b=o(300);const l=M(),r=o([{address:"",amount:"",createdTime:"",id:0,nonce:0,sign:"",tokenAddress:"",tokenName:"",unavailable:!1,updatedTime:""}]),_=o(1),v=o(!1),D=o(!1),T=o(""),d=o(0),U=o([{name:"exchange"},{name:"Withdrawal"}]),F=a=>{d.value=a,_.value=1,f()},K=async a=>{u.value=!0;let t=setInterval(async()=>{b.value>0?b.value--:(clearInterval(t),u.value=!1)},1e3);P(a.address,a.amount,a.sign,t)},P=(a,t,g,y)=>{console.log("\u53C2\u6570",a,t,g),V.value.methods.claim(a,t,g).send({from:q.value}).then(k=>{clearInterval(y),u.value=!1,se(m.i18nText("Withdrawal")+m.i18nText("Success")),_.value=1,f()}).catch(k=>{clearInterval(y),u.value=!1})},f=async()=>{let t=await(d.value===0?G:H)({page:_.value});_.value===1&&(r.value=[]),v.value=!1,r.value=r.value.concat(t.data.records),t.data.records.length<10?D.value=!0:_.value++};return X(()=>{console.log(l.query.tpye,T.value,T.value==="exchange"),l.query.tpye==="exchange"?(l.meta.title="exchange",d.value=0):l.query.tpye==="Withdrawal"&&(l.meta.title="Withdrawal",d.value=1),console.log(l.meta),T.value=l.query.tpye}),(a,t)=>{const g=ae,y=ce,k=J,j=te,z=O;return n(),i(I,null,[w(g),e("div",ue,[e("div",re,[w(y,{tabList:U.value,current:d.value,onTabChange:F},null,8,["tabList","current"])]),d.value===0?(n(),R(k,{key:0,loading:v.value,"onUpdate:loading":t[0]||(t[0]=s=>v.value=s),finished:D.value,"finished-text":a.$t("finishedText"),onLoad:f},{default:L(()=>[(n(!0),i(I,null,$(r.value,(s,C)=>(n(),i("div",{class:"item items",key:C},[e("div",_e,[e("div",ve,[e("div",pe,"- "+c(s.amountDusd)+" DUSD",1)]),e("div",he,[e("div",me,"+"+c(s.amountDaa),1),fe])]),e("div",ge,[e("div",ye,c(s.createdTime),1)])]))),128))]),_:1},8,["loading","finished","finished-text"])):S("v-if",!0),d.value===1?(n(),R(k,{key:1,loading:v.value,"onUpdate:loading":t[1]||(t[1]=s=>v.value=s),finished:D.value,"finished-text":a.$t("finishedText"),onLoad:f},{default:L(()=>[(n(!0),i(I,null,$(r.value,(s,C)=>(n(),i("div",{class:"item",key:C},[ke,e("div",we,[e("div",xe,[e("div",be,[e("div",De,c(p(m).plusXing(s.address,6,6,".",5)),1),e("div",{class:"img",onClick:A=>p(m).copy(s.address)},Le,8,Te)]),s.amount?(n(),i("div",Ie,[e("div",Se,"-"+c(p(Q)(Y(s.amount,18))),1),Be])):S("v-if",!0)]),e("div",Ne,[e("div",Re,c(s.createdTime),1),s.unavailable?(n(),i("div",$e,c(a.$t("TSuccess")),1)):(n(),i("div",We,[w(j,{round:"",onClick:A=>K(s)},{default:L(()=>[Z(c(a.$t("retry")),1)]),_:2},1032,["onClick"])]))])])]))),128))]),_:1},8,["loading","finished","finished-text"])):S("v-if",!0)]),w(z,{showLoading:p(u),countDown:p(b)},null,8,["showLoading","countDown"])],64)}}});const ze=ie(Ve,[["__scopeId","data-v-e7c7dd34"],["__file","D:/work/Daa/src/views/RevenueRecord/index.vue"]]);export{ze as default};
