(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1777419c"],{"041e":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"gold"},[s("img",{staticClass:"market_bg",attrs:{src:e("44fa"),alt:""}}),s("div",{staticClass:"change"},[s("div",{staticClass:"changeBox",on:{click:t.changeIdentity}},[t._m(0),s("div",{staticClass:"nowName"},[t._v("您当前身份为"+t._s("serve"===t.CurrentIdentity?"人才":"雇主"))])]),s("div",{staticClass:"myinfo"},[s("div",{staticClass:"service"},[s("img",{attrs:{src:e("9e01")(`./${"serve"===t.CurrentIdentity?"service":"demand"}.png`),alt:""}})]),s("div",{staticClass:"myService",on:{click:t.inMyNeeds}},[t._v("我的"+t._s("serve"===t.CurrentIdentity?"服务":"需求"))])])]),"employer"===t.CurrentIdentity?s("div",{staticClass:"main"},[s("div",{staticClass:"form"},[s("div",{staticClass:"title"},[t._v("快速发布需求")]),s("van-field",{staticClass:"input",attrs:{label:"我需要",placeholder:"如：智能合约设计"},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}})],1),s("van-button",{attrs:{type:"info",block:"",color:"#1F75D9"},on:{click:function(s){return t.releaseDemand("")}}},[t._v("确认发布")]),s("div",{staticClass:"tips"},[t._v("已有1000家企业选择STAR SHOW发布区块链项目")])],1):t._e(),t.user_id?s("div",{staticClass:"demandWall"},[s("van-swipe",{attrs:{loop:!1,width:1==t.swiperList.length?"auto":"300","show-indicators":!1}},["serve"===t.CurrentIdentity?t._l(t.swiperList,(function(e,i){return s("van-swipe-item",{key:i,class:"serve"!==t.CurrentIdentity?"edit":"",on:{click:function(s){return t.release(e.id)}}},[s("div",{staticClass:"sItem"},[s("div",{staticClass:"select"},[t._v(t._s(t.$util.CurrentUserStatus(e.bid_status)))]),s("div",{staticClass:"sTitle"},[s("div",[t._v(t._s(e.task.title))])]),s("div",{staticClass:"sTips"},[s("div",{staticClass:"v1"},[t._v(t._s(t.$util.taskType(e.task.type)))]),e.task.amount>=1?s("div",{staticClass:"v2"},[t._v(t._s(e.task.amount)+" "+t._s(1===e.task.bail_type?"SRS":"USDT")+" ")]):s("div",{staticClass:"v2"},[t._v("面议")])]),s("div",{staticClass:"status"},[s("div",{staticClass:"state"},[t._v(t._s(t.$util.taskStatusTips(t.CurrentIdentity,e.task.my_status,e.task.status))+" ")]),s("div",{staticClass:"tips"},[t._v(t._s(t.$util.bidStatus(e.log.type)))])])])])})):t._l(t.swiperList,(function(e,i){return s("van-swipe-item",{key:i,class:"serve"!==t.CurrentIdentity?"edit":""},[s("div",{staticClass:"sItem"},[s("div",{staticClass:"sTitle"},[s("div",[t._v(t._s(e.title))]),"serve"!==t.CurrentIdentity?s("span",{on:{click:function(s){return t.edit(e.id)}}},[t._v("编辑")]):t._e()]),s("div",{staticClass:"sTips"},[s("div",{staticClass:"v1"},[t._v(t._s(t.$util.taskType(e.type)))]),e.amount>=1?s("div",{staticClass:"v2"},[t._v(t._s(e.amount)+" "+t._s(1===e.bail_type?"SRS":"USDT"))]):s("div",{staticClass:"v2"},[t._v("面议")])]),s("div",{staticClass:"status"},[s("div",{staticClass:"state"},[t._v(t._s(t.$util.taskStatusTips(t.CurrentIdentity,e.my_status,e.status))+" ")]),s("div",{staticClass:"tips"},[t._v(t._s(t.$util.bidStatus(e.log.type)))])])])])}))],2)],1):t._e(),s("van-tabs",{on:{change:t.tabChange},model:{value:t.activeName,callback:function(s){t.activeName=s},expression:"activeName"}},t._l(t.tab,(function(i,a){return s("van-tab",{key:a,attrs:{title:i.name,name:a}},[s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了","immediate-check":!1},on:{load:function(s){return t.onLoad(a)}},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},t._l(i.list,(function(i,a){return s("div",{key:a,staticClass:"card"},[s("div",{staticClass:"cardMain"},[s("div",{staticClass:"cardMainL"},[s("div",{staticClass:"userIcon",on:{click:function(s){return t.seeUserPageHome(i)}}},[s("van-image",{attrs:{src:i.avatar_thumb},scopedSlots:t._u([{key:"error",fn:function(){return[s("img",{attrs:{src:e("c121"),alt:""}})]},proxy:!0}],null,!0)})],1)]),s("div",{staticClass:"cardMainR",on:{click:function(s){return t.release(i.id)}}},[s("div",{staticClass:"orderName"},[t._v(t._s(i.title))]),s("div",{staticClass:"description"},[t._v(t._s(i.description))]),s("div",{staticClass:"price"},[s("div",{staticClass:"commission"},[t._v("佣金")]),-1!==i.amount?[s("div",{staticClass:"nums"},[t._v(t._s(i.amount))]),s("div",{staticClass:"unit"},[t._v("USDT")])]:[s("div",{staticClass:"nums"},[t._v("面议")])]],2)])]),s("van-divider",{staticClass:"line"}),s("div",{staticClass:"cardbtn"},[s("div",{staticClass:"releaseTime"},[t._v("发布时间："+t._s(t.$util.getUnixToDate("yyyy-mm-dd hh:mm",i.create_ts)))]),"serve"===t.CurrentIdentity&&i.isShow?s("div",{staticClass:"serviceBtn"},[s("div",{staticClass:"end"},[s("van-count-down",{attrs:{time:i.countDownTime,format:"DD天HH小时"}}),t._v("后截止报名 ")],1),t.user_id!=i.user_id?s("div",{staticClass:"btns",on:{click:function(s){return t.release(i.id)}}},[t._v("抢需求")]):t._e()]):t._e()])],1)})),0)],1)})),1)],1)},a=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"changeIcon"},[s("img",{attrs:{src:e("cde8"),alt:""}})])}],n=e("bf21"),r=e("0c6d"),c={data(){return{isLogin:!1,user_id:localStorage.getItem("userId"),index:0,activeName:0,CurrentIdentity:"",tab:[{name:"代码审计",list:[]},{name:"讲师招募",list:[]},{name:"智能合约",list:[]}],list:[],loading:!1,finished:!1,value:"",cursor:"",DateNow:new Date((new Date).toLocaleDateString()).getTime(),swiperList:[]}},created(){let t=localStorage.getItem("CurrentIdentity");t?this.$store.dispatch("ActionsSetUserType",t):t=this.$store.state.CurrentIdentity,this.CurrentIdentity=t},mounted(){this.getSwipeData(),this.onLoad(0),this.user_id||(this.isLogin=!0)},methods:{async contact(t){await Object(n["ContactHim"])({userNiceName:t.user_nickname,userId:t.user_id,avatar:t.avatar_thumb})},async seeUserPageHome(t){await Object(n["ViewHomePage"])({userNiceName:t.user_nickname,userId:t.user_id,avatar:t.avatar_thumb})},env(){return!1},async getSwipeData(){if(!this.user_id)return;let t="serve"===this.CurrentIdentity?r["a"]:r["q"],s=await t({status:0,cursor:"",user_id:this.user_id}),e=s.data;e.forEach(t=>{t.begin_time+864e5<this.DateNow&&(t.my_status=3,t.status=3)}),this.swiperList=e.splice(0,3),console.log(this.swiperList)},changeIdentity(){this.$router.push("chooseIdentity")},edit(t){this.releaseDemand(t)},async release(t){let s=await Object(n["checkUserLogin"])();console.log("login",s),s.token&&-1!==s.userId&&(this.$router.push({path:"demandDetails",query:{id:t}}),localStorage.setItem("token",s.token),localStorage.setItem("userId",s.userId))},async releaseDemand(t){let s=await Object(n["checkUserLogin"])();s.token&&-1!==s.userId&&(this.$router.push({path:"information",query:{desc:this.value,id:t}}),localStorage.setItem("token",s.token),localStorage.setItem("userId",s.userId))},async onLoad(t){let s=await Object(r["m"])({type:this.activeName+1,cursor:this.cursor});""===this.cursor&&(this.tab[t].list=[]),this.loading=!1,0===s.data.length?this.finished=!0:(this.cursor=s.data[s.data.length-1].create_ts,s.data.forEach(t=>{this.DateNow===t.begin_time?t.countDownTime=this.DateNow+864e5-Date.now():t.countDownTime=t.begin_time-Date.now(),this.DateNow>t.begin_time?t.isShow=!1:t.isShow=!0})),this.tab[t].list=this.tab[t].list.concat(s.data)},async inMyNeeds(){let t=await Object(n["checkUserLogin"])();console.log("login",t),t.token&&-1!==t.userId&&("serve"===this.CurrentIdentity?this.$router.push("myService"):this.$router.push("myNeeds"),localStorage.setItem("token",t.token),localStorage.setItem("userId",t.userId))},tabChange(t){this.finished=!1,this.loading=!0,this.cursor="",this.onLoad(t)}}},l=c,o=(e("3a57"),e("0b56")),d=Object(o["a"])(l,i,a,!1,null,"df15f220",null);s["default"]=d.exports},"2a6b":function(t,s,e){},"3a57":function(t,s,e){"use strict";e("2a6b")}}]);
//# sourceMappingURL=chunk-1777419c.d81e4fa6.js.map