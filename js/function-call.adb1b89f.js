import{j as ue,$ as de,n as p,Y as I,y as D,A as v,a5 as fe,a6 as V,a7 as ve,I as P,a8 as ye,R as F,m as N,d as R,L as G,b as f,a9 as Z,v as b,aa as me,O as $,ab as q,ac as J,X as j,p as S,E as he,J as Ce,H as W,K as Q,ad as Oe,T as ge,ae as ke,af as be,F as we,ag as Ie,U as Y,ah as Se,S as ee,ai as pe,z as Pe,aj as xe,ak as Te,Z as ze,al as Be,a4 as Ae,i as De,l as Ee}from"./index.4221a0da.js";function Le(e,{args:t=[],done:o,canceled:a}){if(e){const n=e.apply(null,t);ue(n)?n.then(s=>{s?o():a&&a()}).catch(de):n?o():a&&a()}else o()}const te={show:Boolean,zIndex:p,overlay:I,duration:p,teleport:[String,Object],lockScroll:I,lazyRender:I,beforeClose:Function,overlayStyle:Object,overlayClass:D,transitionAppear:Boolean,closeOnClickOverlay:I},nt=Object.keys(te);function _e(e,t){return e>t?"horizontal":t>e?"vertical":""}function Me(){const e=v(0),t=v(0),o=v(0),a=v(0),n=v(0),s=v(0),l=v(""),i=()=>l.value==="vertical",O=()=>l.value==="horizontal",d=()=>{o.value=0,a.value=0,n.value=0,s.value=0,l.value=""};return{move:y=>{const m=y.touches[0];o.value=(m.clientX<0?0:m.clientX)-e.value,a.value=m.clientY-t.value,n.value=Math.abs(o.value),s.value=Math.abs(a.value);const g=10;(!l.value||n.value<g&&s.value<g)&&(l.value=_e(n.value,s.value))},start:y=>{d(),e.value=y.touches[0].clientX,t.value=y.touches[0].clientY},reset:d,startX:e,startY:t,deltaX:o,deltaY:a,offsetX:n,offsetY:s,direction:l,isVertical:i,isHorizontal:O}}let T=0;const X="van-overflow-hidden";function Ne(e,t){const o=Me(),a="01",n="10",s=c=>{o.move(c);const r=o.deltaY.value>0?n:a,y=ye(c.target,e.value),{scrollHeight:m,offsetHeight:g,scrollTop:x}=y;let w="11";x===0?w=g>=m?"00":"01":x+g>=m&&(w="10"),w!=="11"&&o.isVertical()&&!(parseInt(w,2)&parseInt(r,2))&&F(c,!0)},l=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",s,{passive:!1}),T||document.body.classList.add(X),T++},i=()=>{T&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",s),T--,T||document.body.classList.remove(X))},O=()=>t()&&l(),d=()=>t()&&i();fe(O),V(d),ve(d),P(t,c=>{c?l():i()})}function oe(e){const t=v(!1);return P(e,o=>{o&&(t.value=o)},{immediate:!0}),o=>()=>t.value?o():null}const[Re,$e]=N("overlay"),je={show:Boolean,zIndex:p,duration:p,className:D,lockScroll:I,lazyRender:I,customStyle:Object};var Ye=R({name:Re,props:je,setup(e,{slots:t}){const o=v(),a=oe(()=>e.show||!e.lazyRender),n=l=>{e.lockScroll&&F(l,!0)},s=a(()=>{var l;const i=b(me(e.zIndex),e.customStyle);return $(e.duration)&&(i.animationDuration=`${e.duration}s`),q(f("div",{ref:o,style:i,class:[$e(),e.className]},[(l=t.default)==null?void 0:l.call(t)]),[[J,e.show]])});return G("touchmove",n,{target:o}),()=>f(Z,{name:"van-fade",appear:!0},{default:s})}});const Ke=j(Ye),Ue=b({},te,{round:Boolean,position:S("center"),closeIcon:S("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:S("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[Xe,H]=N("popup");var He=R({name:Xe,inheritAttrs:!1,props:Ue,emits:["open","close","opened","closed","keydown","update:show","click-overlay","click-close-icon"],setup(e,{emit:t,attrs:o,slots:a}){let n,s;const l=v(),i=v(),O=oe(()=>e.show||!e.lazyRender),d=he(()=>{const u={zIndex:l.value};if($(e.duration)){const k=e.position==="center"?"animationDuration":"transitionDuration";u[k]=`${e.duration}s`}return u}),c=()=>{n||(n=!0,l.value=e.zIndex!==void 0?+e.zIndex:Ie(),t("open"))},r=()=>{n&&Le(e.beforeClose,{done(){n=!1,t("close"),t("update:show",!1)}})},y=u=>{t("click-overlay",u),e.closeOnClickOverlay&&r()},m=()=>{if(e.overlay)return f(Ke,{show:e.show,class:e.overlayClass,zIndex:l.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0,onClick:y},{default:a["overlay-content"]})},g=u=>{t("click-close-icon",u),r()},x=()=>{if(e.closeable)return f(ee,{role:"button",tabindex:0,name:e.closeIcon,class:[H("close-icon",e.closeIconPosition),Se],classPrefix:e.iconPrefix,onClick:g},null)},w=()=>t("opened"),le=()=>t("closed"),ce=u=>t("keydown",u),ie=O(()=>{var u;const{round:k,position:A,safeAreaInsetTop:M,safeAreaInsetBottom:re}=e;return q(f("div",Y({ref:i,style:d.value,role:"dialog",tabindex:0,class:[H({round:k,[A]:A}),{"van-safe-area-top":M,"van-safe-area-bottom":re}],onKeydown:ce},o),[(u=a.default)==null?void 0:u.call(a),x()]),[[J,e.show]])}),U=()=>{const{position:u,transition:k,transitionAppear:A}=e,M=u==="center"?"van-fade":`van-popup-slide-${u}`;return f(Z,{name:k||M,appear:A,onAfterEnter:w,onAfterLeave:le},{default:ie})};return P(()=>e.show,u=>{u&&!n&&(c(),o.tabindex===0&&Ce(()=>{var k;(k=i.value)==null||k.focus()})),!u&&n&&(n=!1,t("close"))}),W({popupRef:i}),Ne(i,()=>e.show&&e.lockScroll),G("popstate",()=>{e.closeOnPopstate&&(r(),s=!1)}),Q(()=>{e.show&&c()}),Oe(()=>{s&&(t("update:show",!0),s=!1)}),V(()=>{e.show&&e.teleport&&(r(),s=!0)}),ge(ke,()=>e.show),()=>e.teleport?f(be,{to:e.teleport},{default:()=>[m(),U()]}):f(we,null,[m(),U()])}});const Ve=j(He);function Fe(){const e=Pe({show:!1}),t=n=>{e.show=n},o=n=>{b(e,n,{transitionAppear:!0}),t(!0)},a=()=>t(!1);return W({open:o,close:a,toggle:t}),{open:o,close:a,state:e,toggle:t}}function Ge(e){const t=pe(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}let z=0;function Ze(e){e?(z||document.body.classList.add("van-toast--unclickable"),z++):z&&(z--,z||document.body.classList.remove("van-toast--unclickable"))}const[qe,B]=N("toast"),Je=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],We={icon:String,show:Boolean,type:S("text"),overlay:Boolean,message:p,iconSize:p,duration:xe(2e3),position:S("middle"),teleport:[String,Object],className:D,iconPrefix:String,transition:S("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:D,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var ne=R({name:qe,props:We,emits:["update:show"],setup(e,{emit:t}){let o,a=!1;const n=()=>{const c=e.show&&e.forbidClick;a!==c&&(a=c,Ze(a))},s=c=>t("update:show",c),l=()=>{e.closeOnClick&&s(!1)},i=()=>clearTimeout(o),O=()=>{const{icon:c,type:r,iconSize:y,iconPrefix:m,loadingType:g}=e;if(c||r==="success"||r==="fail")return f(ee,{name:c||r,size:y,class:B("icon"),classPrefix:m},null);if(r==="loading")return f(Be,{class:B("loading"),size:y,type:g},null)},d=()=>{const{type:c,message:r}=e;if($(r)&&r!=="")return c==="html"?f("div",{key:0,class:B("text"),innerHTML:String(r)},null):f("div",{class:B("text")},[r])};return P(()=>[e.show,e.forbidClick],n),P(()=>[e.show,e.type,e.message,e.duration],()=>{i(),e.show&&e.duration>0&&(o=setTimeout(()=>{s(!1)},e.duration))}),Q(n),Te(n),()=>f(Ve,Y({class:[B([e.position,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:l,onClosed:i,"onUpdate:show":s},ze(e,Je)),{default:()=>[O(),d()]})}});const ae={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let h=[],_=!1,E=b({},ae);const L=new Map;function se(e){return De(e)?e:{message:e}}function Qe(){const{instance:e,unmount:t}=Ge({setup(){const o=v(""),{open:a,state:n,close:s,toggle:l}=Fe(),i=()=>{_&&(h=h.filter(d=>d!==e),t())},O=()=>f(ne,Y(n,{onClosed:i,"onUpdate:show":l}),null);return P(o,d=>{n.message=d}),Ee().render=O,{open:a,clear:s,message:o}}});return e}function et(){if(!h.length||_){const e=Qe();h.push(e)}return h[h.length-1]}function C(e={}){if(!Ae)return{};const t=et(),o=se(e);return t.open(b({},E,L.get(o.type||E.type),o)),t}const K=e=>t=>C(b({type:e},se(t)));C.loading=K("loading");C.success=K("success");C.fail=K("fail");C.clear=e=>{var t;h.length&&(e?(h.forEach(o=>{o.clear()}),h=[]):_?(t=h.shift())==null||t.clear():h[0].clear())};function tt(e,t){typeof e=="string"?L.set(e,t):b(E,e)}C.setDefaultOptions=tt;C.resetDefaultOptions=e=>{typeof e=="string"?L.delete(e):(E=b({},ae),L.clear())};C.allowMultiple=(e=!0)=>{_=e};C.install=e=>{e.use(j(ne)),e.config.globalProperties.$toast=C};export{Ve as P,C as T,nt as a,Le as c,Ge as m,te as p,Fe as u};
