var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},__extends=function(e,t){function i(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)},__assign=Object.assign||function(e){for(var t,i=1,n=arguments.length;n>i;i++){t=arguments[i];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},__rest=function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(i[n[o]]=e[n[o]]);return i},__decorate=function(e,t,i,n){var o,a=arguments.length,r=3>a?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(3>a?o(r):a>3?o(t,i,r):o(t,i))||r);return a>3&&r&&Object.defineProperty(t,i,r),r},__param=function(e,t){return function(i,n){t(i,n,e)}},__metadata=function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},__awaiter=function(e,t,i,n){function o(e){return e instanceof i?e:new i(function(t){t(e)})}return new(i||(i=Promise))(function(i,a){function r(e){try{c(n.next(e))}catch(t){a(t)}}function s(e){try{c(n["throw"](e))}catch(t){a(t)}}function c(e){e.done?i(e.value):o(e.value).then(r,s)}c((n=n.apply(e,t||[])).next())})},__generator=function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(r=2&i[0]?a["return"]:i[0]?a["throw"]||((r=a["return"])&&r.call(a),0):a.next)&&!(r=r.call(a,i[1])).done)return r;switch(a=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,a=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(r=c.trys,!(r=r.length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){c=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){c.label=i[1];break}if(6===i[0]&&c.label<r[1]){c.label=r[1],r=i;break}if(r&&c.label<r[2]){c.label=r[2],c.ops.push(i);break}r[2]&&c.ops.pop(),c.trys.pop();continue}i=t.call(e,c)}catch(n){i=[6,n],a=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,a,r,s,c={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},__exportStar=function(e,t){for(var i in e)"default"===i||t.hasOwnProperty(i)||__createBinding(t,e,i)},__createBinding=Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]},__values=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},__read=function(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,o,a=i.call(e),r=[];try{for(;(void 0===t||t-->0)&&!(n=a.next()).done;)r.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(i=a["return"])&&i.call(a)}finally{if(o)throw o.error}}return r},__spread=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e},__spreadArrays=function(){for(var e=0,t=0,i=arguments.length;i>t;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;i>t;t++)for(var a=arguments[t],r=0,s=a.length;s>r;r++,o++)n[o]=a[r];return n},__await=function(e){return this instanceof __await?(this.v=e,this):new __await(e)},__asyncGenerator=function(e,t,i){function n(e){u[e]&&(l[e]=function(t){return new Promise(function(i,n){h.push([e,t,i,n])>1||o(e,t)})})}function o(e,t){try{a(u[e](t))}catch(i){c(h[0][3],i)}}function a(e){e.value instanceof __await?Promise.resolve(e.value.v).then(r,s):c(h[0][2],e)}function r(e){o("next",e)}function s(e){o("throw",e)}function c(e,t){e(t),h.shift(),h.length&&o(h[0][0],h[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,u=i.apply(e,t||[]),h=[];return l={},n("next"),n("throw"),n("return"),l[Symbol.asyncIterator]=function(){return this},l},__asyncDelegator=function(e){function t(t,o){i[t]=e[t]?function(i){return(n=!n)?{value:__await(e[t](i)),done:"return"===t}:o?o(i):i}:o}var i,n;return i={},t("next"),t("throw",function(e){throw e}),t("return"),i[Symbol.iterator]=function(){return this},i},__asyncValues=function(e){function t(t){n[t]=e[t]&&function(n){return new Promise(function(o,a){n=e[t](n),i(o,a,n.done,n.value)})}}function i(e,t,i,n){Promise.resolve(n).then(function(t){e({value:t,done:i})},t)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=e[Symbol.asyncIterator];return o?o.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n)},__makeTemplateObject=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__setModuleDefault=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t},__importStar=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t},__importDefault=function(e){return e&&e.__esModule?e:{"default":e}},__classPrivateFieldGet=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)},__classPrivateFieldSet=function(e,t,i){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,i),i},__reflect=function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i};!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,i){if(1&i&&(e=t(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var o in e)t.d(n,o,function(t){return e[t]}.bind(null,o));return n},t.n=function(e){var i=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,i){i(1),i(2),i(3),i(4),i(5),i(6),i(7),i(0),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(22),i(23),i(24),i(25),i(26),i(27),i(28);var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.getInstance=function(){return this.instance},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var i=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",i),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)}),t.instance=this},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return t.sent(),[4,RES.loadGroup("preload",0)];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),console.error(e),[3,4];case 4:return[2]}})})},t.prototype.onResourceLoadComplete=function(e){if("preload"==e.groupName){var t=new MainUI;this.stage.addChild(t)}},t.instance=null,t}(eui.UILayer);window.Main=n,__reflect(n.prototype,"Main",[])},function(e,t){var i=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var o=RES.getRes(e);o?n(o):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();window.AssetAdapter=i,__reflect(i.prototype,"AssetAdapter",["eui.IAssetAdapter"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);window.LoadingUI=i,__reflect(i.prototype,"LoadingUI",["RES.PromiseTaskReporter"])},function(e,t){var i,i=window.MThrid;!function(e){var t=function(){function e(){}return e.chufa=function(e,t){return new Big(e).div(new Big(Math.pow(10,t)))},e.parseNumber=function(t,i){return e.roundFun(new Big(String(t)).div(new Big(10).pow(i)).toNumber(),4)},e.roundFun=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},e.pow=function(e,t){return new Big(e).times(new Big(10).pow(t)).toString()},e}();e.BigUtil=t,__reflect(t.prototype,"MThrid.BigUtil",[])}(i||(i={})),window.MThrid=i},function(e,t){var i,i=window.MThrid;!function(e){var t=function(){function e(){}return e.ZombieBgPngs=["atlas_game_44","atlas_game_42","atlas_game_43","atlas_game_39","atlas_game_40","atlas_game_41"],e.ZombieNames=["普通僵尸","吓人僵尸","僵尸士兵","僵尸将军","僵尸王","传说的僵尸"],e.ZombieBattleNum=[300,696,720,756,756,756],e}();e.Const=t,__reflect(t.prototype,"MThrid.Const",[])}(i||(i={})),window.MThrid=i},function(e,t){var i,i=window.MThrid;!function(e){var t=function(){function e(){}return e.coordinateY=0,e.eventDispatcher=new egret.EventDispatcher,e}();e.MouseWheelEvent=t,__reflect(t.prototype,"MThrid.MouseWheelEvent",[])}(i||(i={})),window.MThrid=i},function(e,t){var i,i=window.MThrid;!function(e){var t=function(){function e(){this.ip="http://zombie-api.wkcloud.link/api",this.tokenStr=null,this.servceTime=0,this.clientTime=0}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.getStringParamKey=function(e){var t=[],i="";for(var n in e)t.push(n+"="+e[n]);return i=t.join("&")},e.prototype.httpRequest=function(e,t,i,n,o,a){function r(e){var t=e.currentTarget;o&&o(t)}function s(e){var t=e.currentTarget;a&&a(t)}function c(e){Math.floor(100*e.bytesLoaded/e.bytesTotal)}null==t&&(t={});var l=this.getStringParamKey(i);console.log(l);var u=new egret.HttpRequest;u.responseType=egret.HttpResponseType.TEXT;for(var h in t)u.setRequestHeader(h,t[h]);"post"==n?(u.open(e,egret.HttpMethod.POST),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send(l)):"get"==n&&(console.log(e+"?"+l),l.length>1?u.open(e+"?"+l,egret.HttpMethod.GET):u.open(e,egret.HttpMethod.GET),u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.send()),u.addEventListener(egret.Event.COMPLETE,r,this),u.addEventListener(egret.IOErrorEvent.IO_ERROR,s,this),u.addEventListener(egret.ProgressEvent.PROGRESS,c,this)},e.prototype.userLogin=function(e){return __awaiter(this,void 0,void 0,function(){var t,i=this;return __generator(this,function(n){return t=new Promise(function(t){var n=i.ip+"/user/auth",o=i;i.httpRequest(n,[],e,"post",function(e){var i=e.response;i=JSON.parse(i),1==i.success?(o.tokenStr=i.data,t(!0)):(console.log("response false"),t(!1))},null)}),[2,t]})})},e.prototype.freeGetZombie=function(e,t,i){var n=this.ip+"/zombie/free/box",o={address:t};this.httpRequest(n,o,i,"post",function(e){},null)},e.prototype.allGetZombie=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,o=this;return __generator(this,function(a){return t=this.ip+"/zombie/list",i={"X-token":this.tokenStr},n=new Promise(function(n){o.httpRequest(t,i,e,"get",function(e){var t=JSON.parse(e.response);n(t)},null)}),[2,n]})})},e.prototype.requestCheckHash=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,o=this;return __generator(this,function(a){return t=this.ip+"/contract/check/hash",i={},n=new Promise(function(n){o.httpRequest(t,i,e,"post",function(e){var t=JSON.parse(e.response);n(t)},null)}),[2,n]})})},e.prototype.getZombieInfo=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,o=this;return __generator(this,function(a){return t=this.ip+"/zombie/info",i={"X-token":this.tokenStr},n=new Promise(function(n){o.httpRequest(t,i,e,"get",function(e){var t=JSON.parse(e.response);n(t)},null)}),[2,n]})})},e.prototype.allGetMarketZombie=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,o=this;return __generator(this,function(a){return t=this.ip+"/zombie-market/list",i={"X-token":this.tokenStr},n=new Promise(function(n){o.httpRequest(t,i,e,"get",function(e){var t=JSON.parse(e.response);console.log(t),n(t)},null)}),[2,n]})})},e.prototype.getNetServceTime=function(){var e=this.ip+"/user/time",t={"X-token":this.tokenStr},i=this;this.httpRequest(e,t,{},"get",function(e){console.log(e.response);var t=JSON.parse(e.response);t.success&&(i.servceTime=t.data,i.clientTime=Math.floor((new Date).getTime()/1e3))},null)},e.prototype.getCurrentServceTime=function(){var e=Math.floor((new Date).getTime()/1e3);return this.servceTime+(e-this.clientTime)},e.prototype.allGetMarketZombieLog=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,o=this;return __generator(this,function(a){return t=this.ip+"/zombie-market-log/list",i={"X-token":this.tokenStr},n=new Promise(function(n){o.httpRequest(t,i,e,"get",function(e){var t=JSON.parse(e.response);console.log(t),n(t)},null)}),[2,n]})})},e.prototype.IsInLogin=function(){return this.tokenStr&&this.tokenStr.length>0?!0:!1},e.prototype.CultureSpeedConfig=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,o=this;return __generator(this,function(a){return e={nodeId:"CultureSpeedConfig"},t=this.ip+"/config/list",i={"X-token":this.tokenStr},n=new Promise(function(n){o.httpRequest(t,i,e,"post",function(e){var t=JSON.parse(e.response);console.log(t),n(t)},null)}),[2,n]})})},e.prototype.OptionAttackBlood=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,o=this;return __generator(this,function(a){return e={nodeId:"OptionAttackBlood"},t=this.ip+"/config/list",i={"X-token":this.tokenStr},n=new Promise(function(n){o.httpRequest(t,i,e,"post",function(e){var t=JSON.parse(e.response);n(t)},null)}),[2,n]})})},e.prototype.zombieMarketLog7=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,o=this;return __generator(this,function(a){return e={},t=this.ip+"/zombie-market-log/days7",i={"X-token":this.tokenStr},n=new Promise(function(n){o.httpRequest(t,i,e,"post",function(e){var t=JSON.parse(e.response);n(t)},null)}),[2,n]})})},e.prototype.zombiePveBattle=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,o=this;return __generator(this,function(a){return t=this.ip+"/zombie/pve/battle",i={"X-token":this.tokenStr},n=new Promise(function(n){o.httpRequest(t,i,e,"post",function(e){var t=JSON.parse(e.response);n(t)},null)}),[2,n]})})},e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,o=this;return __generator(this,function(a){return e=this.ip+"/user/by",t={"X-token":this.tokenStr},i={},n=new Promise(function(n){o.httpRequest(e,t,i,"get",function(e){var t=JSON.parse(e.response);n(t)},null)}),[2,n]})})},e.prototype.getUserWithDraw=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,o=this;return __generator(this,function(a){return t=this.ip+"/user/withdraw",i={"X-token":this.tokenStr},n=new Promise(function(n){o.httpRequest(t,i,e,"post",function(e){var t=JSON.parse(e.response);n(t)},null)}),[2,n]})})},e}();e.NetworkManager=t,__reflect(t.prototype,"MThrid.NetworkManager",[])}(i||(i={})),window.MThrid=i},function(e,t){var i,i=window.MThrid;!function(e){var t=function(){function e(){this.buyAddress="0x3feFf7F5C66A98a377C4cEc62b24C15c8F12a93B",this.marketAddress="0x510f0952067b62781EF78ee0E258b34f659859f8",this.nftAddress="0xEc9CCdFf3bdD501Cae66A4f656b05AFb1bA3B2CB",this.breedAddress="0x8015DD4cE4278E60fB4c89fFBd0c77b99DBCBA78",this.tokenAddress="0x90f28Cd19C38b13BB61b16b85AbcD3470d08d517"}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.init=function(){return this.web3?!0:(window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x61"}]}).then(function(e){console.log(e)})["catch"](function(e){console.log(e)}),window.ethereum.on("accountsChanged",function(e){console.log("accountsChanged:"+e)}),window.ethereum.on("chainChanged",function(e){console.log("chainChanged:"+e)}),window.ethereum.on("networkChanged",function(e){console.log("networkChanged:"+e)}),"undefined"!=typeof window.web3?(this.web3=new Web3(Web3.givenProvider),console.log(this.web3),!0):(alert("请安装MetaMask插件并解锁您的以太坊账户"),!1))},e.prototype.getUserAddress=function(){return this.curAccount},e.prototype.userSign=function(e,t){var i=this,n="hello";window.ethereum.enable(),this.web3.eth.getAccounts().then(function(e){i.curAccount=e[0];var o=i;i.web3.eth.personal.sign(n,i.curAccount,"test hello",function(e,i){o.initAllContract(),t(e,i)})})},e.prototype.initAllContract=function(){if(null==this.zombieMysteryBox){var e=RES.getRes("ZombieMysteryBox_json"),t=this.buyAddress;this.zombieMysteryBox=new this.web3.eth.Contract(e,t)}if(null==this.zombieMarket){var e=RES.getRes("market_json"),t=this.marketAddress;this.zombieMarket=new this.web3.eth.Contract(e,t)}if(null==this.nftContract){var e=RES.getRes("NFT_json"),t=this.nftAddress;this.nftContract=new this.web3.eth.Contract(e,t)}if(null==this.breedContract){var e=RES.getRes("breed_json"),t=this.breedAddress;this.breedContract=new this.web3.eth.Contract(e,t)}if(null==this.zombieToken){var e=RES.getRes("zombieToken_json"),t=this.tokenAddress;this.zombieToken=new this.web3.eth.Contract(e,t)}},e.prototype.isFreeZombie=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.zombieMysteryBox.methods.isFreeStatus().call()];case 1:return e=i.sent(),[4,this.zombieMysteryBox.methods.received(this.curAccount).call()];case 2:return t=i.sent(),[2,e&&!t]}})})},e.prototype.getBoxZombie=function(e,t,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(o){switch(o.label){case 0:return n=null,console.log("是否免费",t),t?[4,this.zombieMysteryBox.methods.freeZombie(e).send({from:this.curAccount,gasPrice:1e10}).on("confirmation",function(e,t){}).on("transactionHash",function(e){i("transactionHash")})]:[3,2];case 1:return n=o.sent(),[3,4];case 2:return console.log(333,this.zombieMysteryBox,10*Math.pow(10,18)),[4,this.zombieMysteryBox.methods.buyZombie(e).send({from:this.curAccount,gasPrice:1e10,value:10}).on("confirmation",function(e,t){}).on("transactionHash",function(e){i("transactionHash")})];case 3:n=o.sent(),o.label=4;case 4:return[2,n]}})})},e.prototype.createAskOrder=function(e,t,i){return __awaiter(this,void 0,void 0,function(){var n,o;return __generator(this,function(a){switch(a.label){case 0:return n=this.nftAddress,[4,this.zombieMarket.methods.createAskOrder(n,e,t).send({from:this.curAccount,gasPrice:1e10}).on("transactionHash",function(e){i("transactionHash")})];case 1:return o=a.sent(),[2,o]}})})},e.prototype.cancelAskOrder=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,n;return __generator(this,function(o){switch(o.label){case 0:return i=this.nftAddress,[4,this.zombieMarket.methods.cancelAskOrder(i,e).send({from:this.curAccount,gasPrice:1e10}).on("transactionHash",function(e){t("transactionHash")})];case 1:return n=o.sent(),[2,n]}})})},e.prototype.isApprovedForAll=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return e=this.marketAddress,[4,this.nftContract.methods.isApprovedForAll(this.curAccount,e).call()];case 1:return t=i.sent(),[2,t]}})})},e.prototype.setApprovalForAll=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return e=this.marketAddress,[4,this.nftContract.methods.setApprovalForAll(e,!0).send({from:this.curAccount,gasPrice:1e10})];case 1:return t=i.sent(),[2,t]}})})},e.prototype.getMarketBoxZombie=function(e,t,i){return __awaiter(this,void 0,void 0,function(){var n,o;return __generator(this,function(a){switch(a.label){case 0:return n=this.nftAddress,[4,this.zombieMarket.methods.buyTokenUsingBNB(n,e).send({from:this.curAccount,value:t}).on("transactionHash",function(e){i("transactionHash")})];case 1:return o=a.sent(),[2,o]}})})},e.prototype.attributeCultivation=function(e,t,i){return __awaiter(this,void 0,void 0,function(){var n;return __generator(this,function(o){switch(o.label){case 0:return[4,this.breedContract.methods.attributeCultivation(e,t,i).send({from:this.curAccount})];case 1:return n=o.sent(),[2,n]}})})},e.prototype.requestAllowance=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,this.zombieToken.methods.allowance(this.curAccount,this.breedAddress).call()];case 1:return e=t.sent(),[2,e]}})})},e.prototype.requestApprove=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return[4,this.zombieToken.methods.approve(this.breedAddress,e).send({from:this.curAccount})];case 1:return t=i.sent(),[2,t]}})})},e.prototype.changeZombieName=function(e,t){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return[4,this.breedContract.methods.zombieRename(e,t).send({from:this.curAccount})];case 1:return i=n.sent(),[2,i]}})})},e}();e.Web3Manager=t,__reflect(t.prototype,"MThrid.Web3Manager",[])}(i||(i={})),window.MThrid=i},function(e,t){var i=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();window.DebugPlatform=i,__reflect(i.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new i)},function(e,t){var i=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function o(e){t.call(n,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),i.call(n))}var r=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(n,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(n,generateEUI2)},r)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var s=e.replace(".exml","_EUI.json");generateJSON.paths[e]?egret.callLater(function(){t.call(n,generateJSON.paths[e])},this):RES.getResByUrl(s,function(i){window.JSONParseClass.setData(i),egret.callLater(function(){t.call(n,generateJSON.paths[e])},r)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(n,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_TEXT)},e}();window.ThemeAdapter=i,__reflect(i.prototype,"ThemeAdapter",["eui.IThemeAdapter"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/friendui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onAddToStage=function(e){},t.prototype.onHomePageClick=function(e){},t}(eui.Component);window.FriendUI=i,__reflect(i.prototype,"FriendUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/gameattacklifeui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeNameClick,this),this.btn_train_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTrainClick,this),this.btn_train_10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTrain10Click,this),this.btn_train_100.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTrain100Click,this),this.refreshUI()},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.refreshUI=function(){var e=JSON.parse(this.configData.data[0].configValue);this.label_train1_prop.text="攻击+"+e.attribute.attack+"     血量+"+e.attribute.blood;var t=JSON.parse(this.configData.data[1].configValue);this.label_train10_prop.text="攻击+"+t.attribute.attack+"     血量+"+t.attribute.blood;var i=JSON.parse(this.configData.data[2].configValue);this.label_train100_prop.text="攻击+"+i.attribute.attack+"     血量+"+i.attribute.blood},t.prototype.onChangeNameClick=function(e){this.visible=!1},t.prototype.onTrainClick=function(e){this.attributeCultivation(1,1,1,null)},t.prototype.onTrain10Click=function(e){this.attributeCultivation(1,10,1,null)},t.prototype.onTrain100Click=function(e){this.attributeCultivation(1,100,1,null)},t.prototype.attributeCultivation=function(e,t,i,n){var o=Number(this.zombieData.nftNum),a=MThrid.Web3Manager.getInstance().requestAllowance();a.then(function(e){var i=MThrid.BigUtil.parseNumber(e,18),a=MThrid.BigUtil.pow(1e6,18);if(i>1){var r=MThrid.Web3Manager.getInstance().attributeCultivation(o,0,t);r.then(function(e){console.log(e),n&&n(e)})}else{var s=MThrid.Web3Manager.getInstance().requestApprove(a);s.then(function(e){console.log(e)})}})},t}(eui.Component);window.GameAttackLifeUI=i,__reflect(i.prototype,"GameAttackLifeUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.updateTimer=5,t.bgPngs=MThrid.Const.ZombieBgPngs,t.skinName="resource/ui/gamebattlematchui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.initProp()},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.initProp=function(){this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseClick,this);var e={scaleX:.11,scaleY:.11,posX:169,posY:50};this.attackZombieFigureUI=new ZombieFigureUI(e),this.group1.addChildAt(this.attackZombieFigureUI,2);var t={scaleX:.11,scaleY:.11,posX:369,posY:50,skewY:180};this.defZombieFigureUI=new ZombieFigureUI(t),this.group2.addChildAt(this.defZombieFigureUI,2),this.label_update_time.text=""+this.updateTimer,this.timer=new egret.Timer(.02,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timeFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timeFuncFinish,this),this.startMatch()},t.prototype.updateUI=function(e,t){var i=e.getChildByName("label_zombie_name"),n=e.getChildByName("label_zombie_type"),o=e.getChildByName("label_atk_value"),a=e.getChildByName("label_hp_value"),r=e.getChildByName("label_speed_value"),s=e.getChildByName("label_lacky_value"),c=e.getChildByName("label_grow_value"),l=e.getChildByName("image_bg");i.text="#"+t.nftNum,o.text=""+t.attack,a.text=""+t.blood,r.text=""+t.speed,s.text=""+t.speed,c.text=""+t.power,t.type=1,l.source=RES.getRes(this.bgPngs[t.type]),n.text=MThrid.Const.ZombieNames[t.type]},t.prototype.startMatch=function(){console.log(this.battleData),this.updateTimer=5,this.label_update_time.text=""+this.updateTimer,this.timer.start(),this.updateUI(this.group1,this.battleData.Attacker),this.updateUI(this.group2,this.battleData.Defender);var e=JSON.parse(this.battleData.Attacker.gene);this.attackZombieFigureUI.setHeadByIndex(e.head_style),this.attackZombieFigureUI.setEyeByIndex(e.eye_style),this.attackZombieFigureUI.setShirtByIndex(e.shirt_style),e=JSON.parse(this.battleData.Defender.gene),this.defZombieFigureUI.setHeadByIndex(e.head_style),this.defZombieFigureUI.setEyeByIndex(e.eye_style),this.defZombieFigureUI.setShirtByIndex(e.shirt_style)},t.prototype.timeFunc=function(){this.updateTimer>0&&(this.updateTimer=this.updateTimer-.02,this.label_update_time.text=""+Math.ceil(this.updateTimer),this.updateTimer<0&&(this.timer.stop(),MainUI.getInstance().gameUI.gameMyZombieUI.openGameBattleShowUI(this.battleData),this.visible=!1))},t.prototype.timeFuncFinish=function(){},t.prototype.onCloseClick=function(e){this.visible=!1},t}(eui.Component);window.GameBattleMatchUI=i,__reflect(i.prototype,"GameBattleMatchUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.updateTimer=2,t.cdUpdateTime=0,t.roundIndex=0,t.attackMoving=!1,t.defMoving=!1,t.attackTo=!1,t.defTo=!1,t.moveStep=11,t.skinName="resource/ui/gamebattleshowui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.initProp()},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.initProp=function(){this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseClick,this),this.refreshUI()},t.prototype.refreshUI=function(){this.start()},t.prototype.start=function(){if(null==this.attackZombieFigureUI){var e={scaleX:.1,scaleY:.1,posX:199,posY:220};this.attackZombieFigureUI=new ZombieFigureUI(e),this.goup_root.addChildAt(this.attackZombieFigureUI,2);var t=RES.getRes("effect_1_json"),i=RES.getRes("effect_1_png"),n=new egret.MovieClipDataFactory(t,i);this.effect_node_atk=new egret.MovieClip(n.generateMovieClipData("effect_1")),this.goup_root.addChild(this.effect_node_atk),this.effect_node_atk.scaleX=2.5,this.effect_node_atk.scaleY=2.5,this.effect_node_atk.x=50,this.effect_node_atk.y=250,this.effect_node_atk.visible=!1}else this.attackZombieFigureUI.setZombieRotation(0),this.attackZombieFigureUI.setZombiePosX(199),this.attackZombieFigureUI.setZombiePosY(220);var o=JSON.parse(this.battleData.Attacker.gene);if(this.attackZombieFigureUI.setHeadByIndex(o.head_style),this.attackZombieFigureUI.setEyeByIndex(o.eye_style),this.attackZombieFigureUI.setShirtByIndex(o.shirt_style),null==this.defZombieFigureUI){var a={scaleX:.1,scaleY:.1,posX:999,posY:220,skewY:180};this.defZombieFigureUI=new ZombieFigureUI(a),this.goup_root.addChildAt(this.defZombieFigureUI,2);var t=RES.getRes("effect_1_json"),i=RES.getRes("effect_1_png"),n=new egret.MovieClipDataFactory(t,i);this.effect_node_def=new egret.MovieClip(n.generateMovieClipData("effect_1")),this.goup_root.addChild(this.effect_node_def),this.effect_node_def.scaleX=2.5,this.effect_node_def.scaleY=2.5,this.effect_node_def.x=748,this.effect_node_def.y=250,this.effect_node_def.visible=!1
}else this.defZombieFigureUI.setZombieRotation(0),this.defZombieFigureUI.setZombiePosX(999),this.defZombieFigureUI.setZombiePosY(220);o=JSON.parse(this.battleData.Defender.gene),this.defZombieFigureUI.setHeadByIndex(o.head_style),this.defZombieFigureUI.setEyeByIndex(o.eye_style),this.defZombieFigureUI.setShirtByIndex(o.shirt_style),null==this.timer&&(this.timer=new egret.Timer(.02,0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timeFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timeFuncFinish,this)),this.timer.start(),this.attackMoving=!1,this.defMoving=!1,this.updateTimer=.1,this.roundIndex=0,this.cdUpdateTime=0,this.setBattleResult(),this.showEffect()},t.prototype.showEffect=function(){},t.prototype.timeFunc=function(){var e=this.battleData.Logs[this.roundIndex];this.attackMoving&&0==this.cdUpdateTime&&(!this.attackTo&&this.attackZombieFigureUI.x<600?(this.attackZombieFigureUI.x=this.attackZombieFigureUI.x+3*this.moveStep,this.attackZombieFigureUI.x>=600&&(this.attackZombieFigureUI.x=600,this.attackTo=!0,this.cdUpdateTime=6,this.effect_node_def.visible=!0,this.effect_node_def.gotoAndPlay(0,1),this.defZombieFigureUI.showHurtBuff(e.Blood),this.showBattleResult(),this.roundIndex++)):(this.attackZombieFigureUI.x=this.attackZombieFigureUI.x-3*this.moveStep,this.attackTo&&this.attackZombieFigureUI.x<=0&&(this.attackZombieFigureUI.x=0,this.attackTo=!1,this.attackMoving=!1,this.defMoving=!0,this.cdUpdateTime=5,this.endRound()))),this.defMoving&&0==this.cdUpdateTime&&(!this.attackTo&&this.defZombieFigureUI.x>-500?(this.defZombieFigureUI.x=this.defZombieFigureUI.x-3*this.moveStep,this.defZombieFigureUI.x<=-500&&(this.defZombieFigureUI.x=-500,this.attackTo=!0,this.cdUpdateTime=6,this.effect_node_atk.visible=!0,this.effect_node_atk.gotoAndPlay(0,1),this.attackZombieFigureUI.showHurtBuff(e.Blood),this.showBattleResult(),this.roundIndex++)):(this.defZombieFigureUI.x=this.defZombieFigureUI.x+3*this.moveStep,this.attackTo&&this.defZombieFigureUI.x>100&&(this.defZombieFigureUI.x=100,this.attackTo=!1,this.attackMoving=!0,this.defMoving=!1,this.cdUpdateTime=5,this.endRound()))),this.cdUpdateTime>0&&(this.cdUpdateTime=this.cdUpdateTime-.15,this.cdUpdateTime<0&&(this.cdUpdateTime=0)),this.updateTimer>0&&(this.updateTimer=this.updateTimer-.02,this.updateTimer<0&&(this.attackMoving=!0))},t.prototype.endRound=function(){this.roundIndex>=this.battleData.Logs.length&&(this.timer.stop(),this.battleData.Logs[this.battleData.Logs.length-1].Attacker==this.battleData.Attacker.nftNum?(this.defZombieFigureUI.setZombieRotation(290),this.defZombieFigureUI.setZombiePosX(699),this.defZombieFigureUI.setZombiePosY(310)):(this.attackZombieFigureUI.setZombieRotation(80),this.attackZombieFigureUI.setZombiePosX(499),this.attackZombieFigureUI.setZombiePosY(320)))},t.prototype.setBattleResult=function(){for(var e=0,t=[this.scrollerview_item1,this.scrollerview_item2,this.scrollerview_item3,this.scrollerview_item4,this.scrollerview_item5,this.scrollerview_item6,this.scrollerview_item7,this.scrollerview_item8],i=0,n=t;i<n.length;i++){var o=n[i];if(e<this.battleData.Logs.length){var a=o.getChildByName("label_item_2"),r=this.battleData.Logs[e];a.text=r.Attacker+"攻击"+r.Defender+","+r.Defender+"受到了"+r.Blood+"点伤害",o.visible=!1}else o.visible=!1;e++}var s=1;this.label_type_1.text=MThrid.Const.ZombieNames[s],this.label_name_1.text="#"+this.battleData.Attacker.nftNum,this.label_type_2.text=MThrid.Const.ZombieNames[s],this.label_name_2.text="#"+this.battleData.Defender.nftNum},t.prototype.showBattleResult=function(){for(var e=0,t=[this.scrollerview_item1,this.scrollerview_item2,this.scrollerview_item3,this.scrollerview_item4,this.scrollerview_item5,this.scrollerview_item6,this.scrollerview_item7,this.scrollerview_item8],i=0,n=t;i<n.length;i++){var o=n[i];e<=this.roundIndex?o.visible=!0:o.visible=!1,e++}var a=this.scrollerview;this.roundIndex<=1?a.viewport.scrollV=0:a.viewport.scrollV=105*(this.roundIndex-1)},t.prototype.timeFuncFinish=function(){},t.prototype.ongetFirstZombieClick=function(e){},t.prototype.onCloseClick=function(e){this.visible=!1,this.timer.stop()},t.prototype.onTestClick=function(e){this.attackZombieFigureUI.showHurtBuff(20)},t}(eui.Component);window.GameBattleShowUI=i,__reflect(i.prototype,"GameBattleShowUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/gamebuyzombieui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.initProp()},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.initProp=function(){this.btn_ok.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseClick,this)},t.prototype.ongetFirstZombieClick=function(e){},t.prototype.onCloseClick=function(e){this.visible=!1},t}(eui.Component);window.GameBuyZombieUI=i,__reflect(i.prototype,"GameBuyZombieUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/gamechangenameui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.label_info.visible=!1,this.btn_ok.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeNameClick,this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseClick,this)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onChangeNameClick=function(e){var t=this.editabletext_get_name.text;if(t.length<=0)return void(this.label_info.visible=!0);var i=Number(this.data.nftNum);console.log(this.data),console.log(i),MThrid.Web3Manager.getInstance().changeZombieName(i,t).then(function(e){var t={contractType:"ChangeNameNft",txId:e.transactionHash},i=MThrid.NetworkManager.getInstance().requestCheckHash(t);i.then(function(e){console.log("retvalue"),console.log(e)})}),console.log(t),this.visible=!1},t.prototype.onCloseClick=function(e){this.visible=!1},t}(eui.Component);window.GameChangeNameUI=i,__reflect(i.prototype,"GameChangeNameUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/gamegettokenui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.initProp()},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.initProp=function(){this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseClick,this),this.btn_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetClick,this),console.log(this.Data),this.refreshUI()},t.prototype.refreshUI=function(){this.label_availableQuantity.text=""+this.Data.availableQuantity,this.label_coolingQuantity.text=""+this.Data.coolingQuantity,this.label_withdrawingQuantity.text=""+this.Data.withdrawingQuantity,this.Data.withdrawingQuantity>0;this.Data.availableQuantity>0?this.btn_get.visible=!0:this.btn_get.visible=!1},t.prototype.ongetFirstZombieClick=function(e){},t.prototype.onGetClick=function(e){var t=this;if(!(this.Data.withdrawingQuantity>0)){var i={quantity:this.Data.availableQuantity};MThrid.NetworkManager.getInstance().getUserWithDraw(i).then(function(e){console.log(e),t.btn_get.visible=!1})}},t.prototype.onCloseClick=function(e){this.visible=!1},t}(eui.Component);window.GameGetTokenUI=i,__reflect(i.prototype,"GameGetTokenUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.isFree=!1,t.skinName="resource/ui/gamegetzombieui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.initPropGetZombie()},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.initPropGetZombie=function(){var e=this;this.editabletext_get_name.addEventListener(egret.Event.CHANGE,this.change,this),this.btn_get_zombie.addEventListener(egret.TouchEvent.TOUCH_TAP,this.ongetFirstZombieClick,this),MThrid.Web3Manager.getInstance().isFreeZombie().then(function(t){e.isFree=t})},t.prototype.ongetFirstZombieClick=function(e){var t=this.editabletext_get_name.text;if(t.length<=0)return void(this.label_info.textColor=14560300);console.log("僵尸名称",t);var i=300,n=!1,o=null,a=MThrid.Web3Manager.getInstance().getBoxZombie(t,this.isFree,function(e){if("transactionHash"==e){MainUI.getInstance().showGamePopInfoUI(!0),MainUI.getInstance().gamePopInfoUI.setTimeInfo(i),MainUI.getInstance().gamePopInfoUI.timeUpdateFunc=function(){if(i-=.016,n||MainUI.getInstance().gamePopInfoUI.setTimeInfo(i),0>=i&&(MainUI.getInstance().showGamePopInfoUI(!1),MainUI.getInstance().gamePopInfoUI.stopTimer()),console.log("this.updateTime "+i),null!=o){var e={contractType:"CreateNft",txId:o},t=MThrid.NetworkManager.getInstance().requestCheckHash(e);t.then(function(e){console.log("retvalue"),console.log(e),e.success&&!n&&(n=!0,i=1,MainUI.getInstance().gamePopInfoUI.setBoardInfo("购买成功"),MainUI.getInstance().gameUI.onMyZombieClick(null)),0==e.success&&(MainUI.getInstance().gamePopInfoUI.setBoardInfo("购买失败"),MainUI.getInstance().gamePopInfoUI.stopTimer())})}},MainUI.getInstance().gamePopInfoUI.startTimer(),a.then(function(e){o=e.transactionHash})}})},t.prototype.showBuySucc=function(){null==this.gameBuyZombieUI,MThrid.NetworkManager.getInstance().getNetServceTime()},t.prototype.change=function(e){console.log("change change ")},t}(eui.Component);window.GameGetZombieUI=i,__reflect(i.prototype,"GameGetZombieUI",["eui.Component"])},function(e,t){var i=function(){function e(){}return e}();window.ZombieNode=i,__reflect(i.prototype,"ZombieNode",[]);var n=function(e){function t(){var t=e.call(this)||this;return t.zombieNodeDict=[],t.bgPngs=MThrid.Const.ZombieBgPngs,t.skinName="resource/ui/gamemyzombieui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){var t=this;this.label_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackListClick,this),this.image_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackListClick,this),this.btn_changeName.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeNameClick,this),this.btn_battle.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onZombieBattleClick,this),this.btn_atklife.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAtkLifeClick,this),this.btn_speedtrain.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSpeedTrainClick,this),this.btn_sell.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onZombieSellClick,this);var n=0,o=function(){var e=n,o=a.group_zombie.getChildByName("group_item"+(n+1)),r=o.getChildByName("image_bg"),s=o.getChildByName("label_nft"),c=o.getChildByName("label_state"),l=o.getChildByName("label_name");r.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){t.group_zombie.visible=!1,t.group_zombieDetial.visible=!0},a);var u=new i;u.image_bg=r,u.label_nft=s,u.label_name=l,r.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){u.clickCallFunc&&u.clickCallFunc()},a);var h={scaleX:.1,scaleY:.1,posX:20,posY:90};u.zombieFigureUI=new ZombieFigureUI(h),o.addChildAt(u.zombieFigureUI,2),u.zombieFigureUI=u.zombieFigureUI,u.group=o,u.group.visible=!1,u.label_state=c,a.zombieNodeDict[e]=u},a=this;for(n=0;10>n;n++)o();var r={scaleX:.17,scaleY:.17,posX:80,posY:170};this.zombieFigureUI=new ZombieFigureUI(r),this.group_zombieDetial.addChild(this.zombieFigureUI),this.group_zombie.visible=!0,this.group_zombieDetial.visible=!1,this.pageTurnUI=new PageTurnUI,this.pageTurnUI.x=502,this.pageTurnUI.y=930,this.group_zombie.addChild(this.pageTurnUI),this.pageTurnUI.setClickPageCall(function(e){t.requestPageGetZombie(e)}),this.requestPageGetZombie(1)},t.prototype.refreshUI=function(){this.pageTurnUI.reSetData(),this.requestPageGetZombie(1)},t.prototype.requestPageGetZombie=function(e){var t=this,i={page:e,limit:10},n=MThrid.NetworkManager.getInstance().allGetZombie(i);n.then(function(e){console.log(e),t.curPageData=e,t.setSelePageUI()}),this.curShowPage=e},t.prototype.setSelePageUI=function(){var e=this;console.log(this.curPageData.data.results);var t=this.curPageData.data.results,i=t.length,n=0,o=Math.ceil(this.curPageData.data.page.total/10),a=this.curPageData.data.page.total%10,r=function(){var i=s.zombieNodeDict[n];if(s.curShowPage<o||s.curShowPage==o&&a>n){var r=t[n];i.clickCallFunc=function(){var t=JSON.parse(r.gene);e.zombieFigureUI.setHeadByIndex(t.head_style),e.zombieFigureUI.setEyeByIndex(t.eye_style),e.zombieFigureUI.setShirtByIndex(t.shirt_style),e.setZombieDetailInfo(r)};var c=JSON.parse(r.gene);i.zombieFigureUI.setHeadByIndex(c.head_style),i.zombieFigureUI.setEyeByIndex(c.eye_style),i.zombieFigureUI.setShirtByIndex(c.shirt_style),i.label_nft.text="#"+r.nftNum,i.label_name.text=r.nickName,i.image_bg.source=RES.getRes(s.bgPngs[r.type]),i.group.visible=!0,i.label_state.text="",1==r.status&&(i.label_state.text="出售中");var l=r.pveCooledTime-MThrid.NetworkManager.getInstance().getCurrentServceTime();l>0&&(i.label_state.text="冷却中"),console.log(r)}else i.group.visible=!1},s=this;for(n=0;10>n;n++)r();this.pageTurnUI.visible=o>1,this.pageTurnUI.visible&&this.pageTurnUI.setToolPageIndex(o),this.label_nohave_info.visible=0>=i},t.prototype.setZombieDetailInfo=function(e){this.label_atkvalue.text=e.attack,this.label_lifevalue.text=e.blood,this.label_speedvalue.text=e.speed,this.label_lackyvalue.text=e.lucky,this.label_growthvalue.text=e.gorw,this.label_owner_name.text="主人     "+e.address,this.label_name.text=e.nickName,this.label_battle_num.text=e.pveAttackNum+"/"+MThrid.Const.ZombieBattleNum[e.type],this.label_pit_num.text=e.win+"/100",this.image_zombie_bg.source=RES.getRes(this.bgPngs[e.type]);var t=e.pveCooledTime-MThrid.NetworkManager.getInstance().getCurrentServceTime();console.log("left "+t),t>0?this.label_atktime.text="战斗倒计时："+this.getFormateTime(t):this.label_atktime.text="战斗倒计时：0",this.curSeleZombieData=e;var i;i=0==this.curSeleZombieData.status?"atlas_game_48":"atlas_game2_8";var n=this.btn_sell.getChildAt(0);n.source=RES.getRes(i)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onChangeNameClick=function(e){null==this.gameChangeNameUI&&(this.gameChangeNameUI=new GameChangeNameUI,MainUI.getInstance().addChild(this.gameChangeNameUI)),this.gameChangeNameUI.data=this.curSeleZombieData,this.gameChangeNameUI.visible=!0},t.prototype.onAtkLifeClick=function(e){var t=this;return 1==this.curSeleZombieData.status?(MainUI.getInstance().showGamePopInfoUI(!0),void MainUI.getInstance().gamePopInfoUI.setBoardInfo("出售中不能战斗")):void(null==this.gameAttackLifeUI?MThrid.NetworkManager.getInstance().OptionAttackBlood().then(function(e){t.gameAttackLifeUI=new GameAttackLifeUI,t.gameAttackLifeUI.configData=e,MainUI.getInstance().addChild(t.gameAttackLifeUI),t.gameAttackLifeUI.zombieData=t.curSeleZombieData,t.gameAttackLifeUI.visible=!0}):MThrid.NetworkManager.getInstance().OptionAttackBlood().then(function(e){t.gameAttackLifeUI.configData=e,t.gameAttackLifeUI.zombieData=t.curSeleZombieData,t.gameAttackLifeUI.refreshUI(),t.gameAttackLifeUI.visible=!0}))},t.prototype.onZombieBattleClick=function(e){var t=this;if(1==this.curSeleZombieData.status)return MainUI.getInstance().showGamePopInfoUI(!0),void MainUI.getInstance().gamePopInfoUI.setBoardInfo("出售中不能战斗");console.log(Number(this.curSeleZombieData.nftNum));var i=this.curSeleZombieData.pveCooledTime-MThrid.NetworkManager.getInstance().getCurrentServceTime();if(!(i>0))if(null==this.gameBattleMatchUI){var n={nftNum:this.curSeleZombieData.nftNum};MThrid.NetworkManager.getInstance().zombiePveBattle(n).then(function(e){console.log(e),e.success&&(t.gameBattleMatchUI=new GameBattleMatchUI,t.gameBattleMatchUI.battleData=e.data,MainUI.getInstance().addChild(t.gameBattleMatchUI))})}else{var n={nftNum:this.curSeleZombieData.nftNum};MThrid.NetworkManager.getInstance().zombiePveBattle(n).then(function(e){console.log(e),e.success&&(t.gameBattleMatchUI.battleData=e.data,t.gameBattleMatchUI.startMatch(),t.gameBattleMatchUI.visible=!0)})}},t.prototype.openGameBattleShowUI=function(e){null==this.gameBattleShowUI?(this.gameBattleShowUI=new GameBattleShowUI,this.gameBattleShowUI.battleData=e,MainUI.getInstance().addChild(this.gameBattleShowUI)):(this.gameBattleShowUI.visible=!0,this.gameBattleShowUI.battleData=e,this.gameBattleShowUI.refreshUI())},t.prototype.onSpeedTrainClick=function(e){var t=this;return 1==this.curSeleZombieData.status?(MainUI.getInstance().showGamePopInfoUI(!0),void MainUI.getInstance().gamePopInfoUI.setBoardInfo("出售中不能战斗")):void(null==this.gameSpeedTrainUI?MThrid.NetworkManager.getInstance().CultureSpeedConfig().then(function(e){t.gameSpeedTrainUI=new GameSpeedTrainUI,t.gameSpeedTrainUI.configData=e,MainUI.getInstance().addChild(t.gameSpeedTrainUI),t.gameSpeedTrainUI.zombieData=t.curSeleZombieData,t.gameSpeedTrainUI.visible=!0}):MThrid.NetworkManager.getInstance().CultureSpeedConfig().then(function(e){t.gameSpeedTrainUI.configData=e,t.gameSpeedTrainUI.zombieData=t.curSeleZombieData,t.gameSpeedTrainUI.refreshUI(),t.gameSpeedTrainUI.visible=!0}))},t.prototype.createAskOrderFunc=function(e){var t=this,i=Number(this.curSeleZombieData.nftNum),n=300,o=!1,a=null,r=function(){var r=MThrid.Web3Manager.getInstance().createAskOrder(i,e,function(){MainUI.getInstance().showGamePopInfoUI(!0),MainUI.getInstance().gamePopInfoUI.setTimeInfo(n),MainUI.getInstance().gamePopInfoUI.timeUpdateFunc=function(){if(n-=.016,o||MainUI.getInstance().gamePopInfoUI.setTimeInfo(n),0>=n&&(MainUI.getInstance().showGamePopInfoUI(!1),MainUI.getInstance().gamePopInfoUI.stopTimer()),console.log("this.updateTime "+n),null!=a){var e={contractType:"ShelvesNft",txId:a},i=MThrid.NetworkManager.getInstance().requestCheckHash(e);i.then(function(e){console.log("retvalue"),console.log(e),e.success&&!o&&(o=!0,n=1,MainUI.getInstance().gamePopInfoUI.setBoardInfo("出售成功"),t.curSeleZombieData.status=1,t.setZombieDetailInfo(t.curSeleZombieData))})}},MainUI.getInstance().gamePopInfoUI.startTimer()});r.then(function(e){console.log(e),a=e.transactionHash})};console.log(i);var s=MThrid.Web3Manager.getInstance().isApprovedForAll();s.then(function(e){if(console.log(e),e)r();else{var t=MThrid.Web3Manager.getInstance().setApprovalForAll();t.then(function(e){r()})}})},t.prototype.cancelAskOrderFunc=function(){var e=this,t=Number(this.curSeleZombieData.nftNum),i=300,n=!1,o=null;console.log(t);var a=MThrid.Web3Manager.getInstance().cancelAskOrder(t,function(){MainUI.getInstance().showGamePopInfoUI(!0),MainUI.getInstance().gamePopInfoUI.setTimeInfo(i),MainUI.getInstance().gamePopInfoUI.timeUpdateFunc=function(){if(i-=.016,n||MainUI.getInstance().gamePopInfoUI.setTimeInfo(i),0>=i&&(MainUI.getInstance().showGamePopInfoUI(!1),MainUI.getInstance().gamePopInfoUI.stopTimer()),console.log("this.updateTime "+i),null!=o){var t={contractType:"ShelfNft",txId:o},a=MThrid.NetworkManager.getInstance().requestCheckHash(t);a.then(function(t){console.log("retvalue"),console.log(t),t.success&&!n&&(n=!0,i=1,MainUI.getInstance().gamePopInfoUI.setBoardInfo("撤销成功"),e.curSeleZombieData.status=0,e.setZombieDetailInfo(e.curSeleZombieData))})}},MainUI.getInstance().gamePopInfoUI.startTimer()});a.then(function(e){console.log(e),o=e.transactionHash})},t.prototype.onZombieSellClick=function(e){console.log(this.curSeleZombieData),0!=this.curSeleZombieData.type&&(0==this.curSeleZombieData.status?null==this.gameSellPopUI?(this.gameSellPopUI=new GameSellPopUI,MainUI.getInstance().stage.addChild(this.gameSellPopUI)):(this.gameSellPopUI.visible=!0,this.gameSellPopUI.refreshUI()):this.cancelAskOrderFunc())},t.prototype.onBackListClick=function(e){this.group_zombie.visible=!0,this.group_zombieDetial.visible=!1},t.prototype.getFormateTime=function(e){var t="",i=Math.floor(e/3600);t=10>i?"0"+i:""+i;var n=Math.floor(e%60/60);t=10>n?t+":0"+n:t+":"+n;var o=Math.floor(e%60%60);return t=10>o?t+":0"+o:t+":"+o},t.prototype.getFormateDate=function(e){var t=new Date(e),i=(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours()),n=t.getMinutes(),o=t.getSeconds(),a=i.toString();i>=0&&9>=i&&(a="0"+i);var r=n.toString();n>=0&&9>=n&&(r="0"+n);var s=o.toString();o>=0&&9>=o&&(s="0"+o);var c=a+":"+r+":"+s;return c},t}(eui.Component);window.GameMyZombieUI=n,__reflect(n.prototype,"GameMyZombieUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.updateTime=300,t.skinName="resource/ui/gamepopinfoui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onAddToStage=function(e){var t=this;this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseClick,this),this.timer=new egret.Timer(0,0),this.timer.addEventListener(egret.TimerEvent.TIMER,function(){t.timeUpdateFunc&&t.timeUpdateFunc()},this)},t.prototype.setUpdateTime=function(e){this.updateTime=e},t.prototype.startTimer=function(){this.timer.start()},t.prototype.stopTimer=function(){this.timer.stop()},t.prototype.onCloseClick=function(e){this.visible=!1,this.stopTimer()},t.prototype.setTimeInfo=function(e){null!=this.label_info&&(this.label_info.text="等待中"+this.getFormateTime(e))},t.prototype.setBoardInfo=function(e){this.label_info.text=e},t.prototype.getFormateTime=function(e){var t="",i=Math.floor(e/3600);t=10>i?"0"+i:""+i;var n=Math.floor(e/60);t=10>n?t+":0"+n:t+":"+n;var o=Math.floor(e%60);return t=10>o?t+":0"+o:t+":"+o},t}(eui.Component);window.GamePopInfoUI=i,__reflect(i.prototype,"GamePopInfoUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/gamesellpopui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onAddToStage=function(e){this.btn_get_zombie.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSellClick,this),this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseClick,this)},t.prototype.refreshUI=function(){this.editabletext_price.text=""},t.prototype.onSellClick=function(e){var t=Number(this.editabletext_price.text);0>=t||(MainUI.getInstance().gameUI.gameMyZombieUI.createAskOrderFunc(t),this.visible=!1)},t.prototype.onCloseClick=function(e){this.visible=!1},t}(eui.Component);window.GameSellPopUI=i,__reflect(i.prototype,"GameSellPopUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/gamespeedtrainui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangeNameClick,this),this.btn_train_1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTrainClick,this),this.btn_train_10.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTrain10Click,this),this.btn_train_100.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTrain100Click,this),this.refreshUI()},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.refreshUI=function(){var e=JSON.parse(this.configData.data[0].configValue);this.label_train1_prop.text="速度+"+e.attribute.speed;var t=JSON.parse(this.configData.data[1].configValue);this.label_train10_prop.text="速度+"+t.attribute.speed;var i=JSON.parse(this.configData.data[2].configValue);this.label_train100_prop.text="速度+"+i.attribute.speed},t.prototype.onChangeNameClick=function(e){this.visible=!1},t.prototype.onTrainClick=function(e){this.attributeCultivation(0,1,1,null)},t.prototype.onTrain10Click=function(e){this.attributeCultivation(0,10,1,null)},t.prototype.onTrain100Click=function(e){this.attributeCultivation(0,100,1,null)},t.prototype.attributeCultivation=function(e,t,i,n){var o=Number(this.zombieData.nftNum),a=MThrid.Web3Manager.getInstance().requestAllowance();a.then(function(e){var i=MThrid.BigUtil.parseNumber(e,18),a=MThrid.BigUtil.pow(1e6,18);if(i>1){var r=MThrid.Web3Manager.getInstance().attributeCultivation(o,1,t);r.then(function(e){console.log(e),n&&n(e)})}else{var s=MThrid.Web3Manager.getInstance().requestApprove(a);s.then(function(e){console.log(e)})}})},t}(eui.Component);window.GameSpeedTrainUI=i,__reflect(i.prototype,"GameSpeedTrainUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/gameui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.getRoot=function(){return this.root},t.prototype.onAddToStage=function(e){this.btn_get.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetZombieClick,this),this.btn_my.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMyZombieClick,this),this.btn_pit.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onPitZombieClick,this),this.btn_lingqu.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGetCoinClick,this),this.initGetZombieUI()},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.refreshUI=function(){this.gameMyZombieUI&&this.gameMyZombieUI.visible&&this.gameMyZombieUI.refreshUI()},t.prototype.onGetZombieClick=function(e){this.initGetZombieUI(),this.setButtonSourceState(1,!0),this.setButtonSourceState(2,!1),this.setButtonSourceState(4,!1),this.setButtonSourceState(5,!1)},t.prototype.initGetZombieUI=function(){null==this.gameGetZombieUI&&(this.gameGetZombieUI=new GameGetZombieUI,this.root.addChild(this.gameGetZombieUI))},t.prototype.onMyZombieClick=function(e){this.initMyZombieUI(),this.setButtonSourceState(1,!1),this.setButtonSourceState(2,!0),this.setButtonSourceState(4,!1),this.setButtonSourceState(5,!1)},t.prototype.initMyZombieUI=function(){null==this.gameMyZombieUI?(this.gameMyZombieUI=new GameMyZombieUI,this.root.addChild(this.gameMyZombieUI)):this.gameMyZombieUI.refreshUI()},t.prototype.onAspectZombieClick=function(e){console.log("onAspectZombieClick"),this.setButtonSourceState(1,!1),this.setButtonSourceState(2,!1),this.setButtonSourceState(4,!1),this.setButtonSourceState(5,!1)},t.prototype.onPitZombieClick=function(e){console.log("onPitZombieClick"),null==this.gameZombiePitUI&&(this.gameZombiePitUI=new GameZombiePitUI,this.root.addChild(this.gameZombiePitUI)),this.setButtonSourceState(1,!1),this.setButtonSourceState(2,!1),this.setButtonSourceState(4,!0),this.setButtonSourceState(5,!1)},t.prototype.onGetCoinClick=function(e){var t=this;null==this.gameGetTokenUI?MThrid.NetworkManager.getInstance().getUserInfo().then(function(e){console.log("value "),console.log(e),t.gameGetTokenUI=new GameGetTokenUI,t.gameGetTokenUI.Data=e.data,t.root.addChild(t.gameGetTokenUI)}):MThrid.NetworkManager.getInstance().getUserInfo().then(function(e){console.log(e),t.gameGetTokenUI.Data=e.data,t.gameGetTokenUI.refreshUI()}),console.log("onGetCoinClick"),this.setButtonSourceState(1,!1),this.setButtonSourceState(2,!1),this.setButtonSourceState(4,!1),this.setButtonSourceState(5,!0)},t.prototype.setButtonSourceState=function(e,t){var i,n=null,o=null;1==e?(n=this.btn_get,i=t?"atlas_game_51":"atlas_game_10",o=this.gameGetZombieUI):2==e?(n=this.btn_my,i=t?"atlas_game_2":"atlas_game_9",o=this.gameMyZombieUI):4==e?(n=this.btn_pit,i=t?"atlas_game_4":"atlas_game_12",o=this.gameZombiePitUI):5==e&&(n=this.btn_lingqu,i=t?"atlas_game_50":"atlas_game_52",o=this.gameGetTokenUI),n.enabled=!t;var a=n.getChildAt(0);a.source=RES.getRes(i),o&&(o.visible=t)},t}(eui.Component);window.GameUI=i,__reflect(i.prototype,"GameUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/gamezombiepitui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){},t}(eui.Component);window.GameZombiePitUI=i,__reflect(i.prototype,"GameZombiePitUI",["eui.Component"])},function(e,t){var i=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/ui/homepageui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAdd,t),t}return __extends(t,e),t.prototype.startGame=function(e){console.log("跳转",this.stage),(new MainUI).onAddToStage(null,1)},t.prototype.onMoneyLinkClick=function(e){MThrid.Web3Manager.getInstance().userSign("hello",function(e,t){if(console.log(t),e);else{var i=MThrid.Web3Manager.getInstance().getUserAddress(),n={address:i,message:"hello",signatureMessage:t};MThrid.NetworkManager.getInstance().userLogin(n).then(function(e){})}})},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onAdd=function(e){this.btn_start_game0.addEventListener(egret.TouchEvent.TOUCH_TAP,this.startGame,this)},t.prototype.onHomePageClick=function(e){},t}(eui.Component);window.HomePageUI=i,__reflect(i.prototype,"HomePageUI",["eui.Component"])},function(e,t){var i;!function(e){e[e.eMainUI=0]="eMainUI",e[e.eMarketUI=1]="eMarketUI",e[e.eGameUI=2]="eGameUI",e[e.eFriendUI=3]="eFriendUI"}(i||(i={})),window.emPageUIName=i;var n=function(e){function t(){var n=e.call(this)||this;return n.pageUIName=i.eMainUI,n.skinName="resource/ui/mainui.exml",n.addEventListener(egret.Event.COMPLETE,n.onAddToStage,n),t.instance=n,n}return __extends(t,e),t.getInstance=function(){return this.instance},t.prototype.onAddToStage=function(e,t){void 0===t&&(t=0),this.initProp(t)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.mouseScrollviewContent=function(){var e=this,t=this.scrollerview;MThrid.MouseWheelEvent.eventDispatcher.addEventListener("EVT_MOUSE_WHEEL",function(i){var n=e.scrollerviewContentHeight,o=n-t.height+130;t.viewport.scrollV+=MThrid.MouseWheelEvent.coordinateY,t.viewport.scrollV<=0?t.viewport.scrollV=0:t.viewport.scrollV>=o&&(t.viewport.scrollV=o)},this),this.scrollerview.viewport.validateNow(),this.scrollerview.viewport.scrollV=0,this.scrollerview.touchEnabled=!1,this.scrollerview.viewport.scrollEnabled=!0,this.scrollerview.scrollPolicyH=eui.ScrollPolicy.OFF,this.scrollerview.scrollPolicyV=eui.ScrollPolicy.ON,this.scrollerviewContentHeight=this.scrollerviewContent.height},t.prototype.initProp=function(e){if(e&&(console.log(12378),this.onGameClick),this.label_homepage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onHomePageClick,this),this.btn_money_link.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMoneyLinkClick,this),this.label_game.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onGameClick,this),this.label_market.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMarketClick,this),this.label_friend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onFriendClick,this),this.homePageUI=new HomePageUI,this.scrollerviewContent.addChild(this.homePageUI),this.mouseScrollviewContent(),MThrid.Web3Manager.getInstance().init(),this.showGamePopInfoUI(!1),MThrid.NetworkManager.getInstance().IsInLogin()){console.log("已登录");var t=this.btn_money_link.getChildAt(0);t.source=RES.getRes("atlas_main_14")}},t.prototype.mouseFloatEffect=function(){mouse.enable(this.stage),mouse.setMouseMoveEnabled(!0),mouse.setMouseMoveEnabled(!0)},t.prototype.onStartGameClick=function(e){},t.prototype.onMoneyLinkClick=function(e){var t=this;
MThrid.NetworkManager.getInstance().IsInLogin()?(this.onGameClick(null),this.gameUI.onGetZombieClick(null)):MThrid.Web3Manager.getInstance().userSign("hello",function(e,i){if(console.log(i),e);else{var n=MThrid.Web3Manager.getInstance().getUserAddress(),o={address:n,message:"hello",signatureMessage:i};MThrid.NetworkManager.getInstance().userLogin(o).then(function(e){if(console.log("atlas_main_14",e),e){var i=t.btn_money_link.getChildAt(0);i.source=RES.getRes("atlas_main_14")}})}})},t.prototype.onHomePageClick=function(e){this.pageUIName=i.eMainUI,this.switchPageState()},t.prototype.onGameClick=function(e){console.log("this.pageUIName",i.eGameUI,this.gameUI,this.pageUIName),this.pageUIName=i.eGameUI,null==this.gameUI?(this.gameUI=new GameUI,this.scrollerviewContent.addChild(this.gameUI)):this.gameUI.refreshUI(),this.switchPageState()},t.prototype.onMarketClick=function(e){return MThrid.NetworkManager.getInstance().IsInLogin()?(this.pageUIName=i.eMarketUI,null==this.marketUI?(this.marketUI=new MarketUI,this.scrollerviewContent.addChild(this.marketUI)):this.marketUI.refreshUI(),void this.switchPageState()):void this.onMoneyLinkClick(null)},t.prototype.onFriendClick=function(e){this.pageUIName=i.eFriendUI,null==this.friendUI&&(this.friendUI=new FriendUI,this.scrollerviewContent.addChild(this.friendUI)),this.switchPageState()},t.prototype.switchPageState=function(){var e=0,t=this.pageUIName;t==i.eMainUI?(this.changeLabelPageState(!0,this.homePageUI,this.label_homepage),this.changeLabelPageState(!1,this.gameUI,this.label_game),this.changeLabelPageState(!1,this.marketUI,this.label_market),this.changeLabelPageState(!1,this.friendUI,this.label_friend),e=3760):t==i.eGameUI?(this.changeLabelPageState(!1,this.homePageUI,this.label_homepage),this.changeLabelPageState(!0,this.gameUI,this.label_game),this.changeLabelPageState(!1,this.marketUI,this.label_market),this.changeLabelPageState(!1,this.friendUI,this.label_friend),e=2312):t==i.eMarketUI?(this.changeLabelPageState(!1,this.homePageUI,this.label_homepage),this.changeLabelPageState(!1,this.gameUI,this.label_game),this.changeLabelPageState(!0,this.marketUI,this.label_market),this.changeLabelPageState(!1,this.friendUI,this.label_friend),e=2403):t==i.eFriendUI&&(this.changeLabelPageState(!1,this.homePageUI,this.label_homepage),this.changeLabelPageState(!1,this.gameUI,this.label_game),this.changeLabelPageState(!1,this.marketUI,this.label_market),this.changeLabelPageState(!0,this.friendUI,this.label_friend),e=1755),t==i.eGameUI?this.scrollerview.viewport.scrollV=430:this.scrollerview.viewport.scrollV=0,this.scrollerviewContentHeight=e},t.prototype.changeLabelPageState=function(e,t,i){var n=e?16304951:16777215;i.textColor=n,t&&(t.visible=e)},t.prototype.showGamePopInfoUI=function(e){null==this.gamePopInfoUI&&(this.gamePopInfoUI=new GamePopInfoUI,this.stage.addChild(this.gamePopInfoUI)),this.gamePopInfoUI.visible=e},t.instance=null,t}(eui.Component);window.MainUI=n,__reflect(n.prototype,"MainUI",["eui.Component"])},function(e,t){var i=function(){function e(){}return e}();window.MarketZombieItem=i,__reflect(i.prototype,"MarketZombieItem",[]);var n=function(){function e(){}return e}();window.MarketTransactionItem=n,__reflect(n.prototype,"MarketTransactionItem",[]);var o=function(e){function t(){var t=e.call(this)||this;return t.bgPngs=MThrid.Const.ZombieBgPngs,t.marketZombieItemDict=[],t.marketTransactionItem=[],t.skinName="resource/ui/marketui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){var t=this;this.group_zombie.visible=!0,this.group_zombieDetial.visible=!1,this.label_nohave_marketinfo.visible=!1,this.label_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackListClick,this),this.image_back.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBackListClick,this),this.btn_buy_zombie.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBuyZombieClick,this),this.image_kind_select.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onKindSeleClick,this);for(var n=[this.group_item1,this.group_item2,this.group_item3,this.group_item4,this.group_item5,this.group_item6,this.group_item7,this.group_item8,this.group_item9,this.group_item10,this.group_item11,this.group_item12],o=0,a=function(e){var t=e.getChildByName("image_bg"),n=e.getChildByName("label_nft"),a=e.getChildByName("label_battle_num"),s=e.getChildByName("label_curPrice"),c=e.getChildByName("label_curPrice_m"),l={scaleX:.1,scaleY:.1,posX:20,posY:57},u=new ZombieFigureUI(l);e.addChildAt(u,2);var h=new i;h.image_bg=t,h.group=e,h.zombieFigureUI=u,h.label_nft=n,h.label_battle_num=a,h.label_curPrice=s,h.label_curPrice_m=c,r.marketZombieItemDict[o]=h,o+=1,t.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){h.clickCallFunc&&h.clickCallFunc()},r)},r=this,s=0,c=n;s<c.length;s++){var l=c[s];a(l)}var u={scaleX:.19,scaleY:.19,posX:80,posY:250};this.zombieFigureUI=new ZombieFigureUI(u),this.group_zombieDetial.addChild(this.zombieFigureUI),this.zombieFigureUI.visible=!1,this.pageTurnUI=new PageTurnUI,this.pageTurnUI.x=502,this.pageTurnUI.y=1017,this.group_zombie.addChild(this.pageTurnUI),this.pageTurnUI.setClickPageCall(function(e){t.requestPageGetZombie(e)}),this.requestPageGetZombie(1),this.initKindCondiction(),this.initTransactionGroup(),this.zombieMarketLog7()},t.prototype.refreshUI=function(){this.pageTurnUI.reSetData(),this.requestPageGetZombie(1)},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onBackListClick=function(e){this.group_zombie.visible=!0,this.group_zombieDetial.visible=!1},t.prototype.zombieMarketLog7=function(){var e=this,t=MThrid.NetworkManager.getInstance().zombieMarketLog7();t.then(function(t){var i=t.data;e.label_genesisprice_min.text=""+i.cZombieMin/MThrid.BigUtil.pow(1,10),e.label_price_min.text=""+i.zombieMin/MThrid.BigUtil.pow(1,10),e.label_genesisprice_max.text=""+i.cZombieMax/MThrid.BigUtil.pow(1,10),e.label_price_max.text=""+i.zombieMax/MThrid.BigUtil.pow(1,10),e.label_genesisprice_mean.text=""+i.cZombieAverage/MThrid.BigUtil.pow(1,10),e.label_price_mean.text=""+i.zombieAverage/MThrid.BigUtil.pow(1,10)})},t.prototype.initKindCondiction=function(){var e=this,t=0,i=function(){var i=t,o=n.group_kind_select.getChildByName(""+i);o.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.group_kind_select.visible=!1,e.label_kind_info.text=o.text,e.image_kind_down.visible=!0,e.image_kind_up.visible=!1},n)},n=this;for(t=0;7>t;t++)i();this.group_kind_select.visible=!1,this.image_kind_down.visible=!0,this.image_kind_up.visible=!1;var o=function(t){1==t||2==t?(e.checkbox_price_down.selected=!1,e.checkbox_price_up.selected=!1,e.checkbox_battlenum_down.selected=!1,e.checkbox_battlenum_up.selected=!1):3==t||4==t?(e.checkbox_inmarket_down.selected=!1,e.checkbox_inmarket_up.selected=!1,e.checkbox_battlenum_down.selected=!1,e.checkbox_battlenum_up.selected=!1):(5==t||6==t)&&(e.checkbox_inmarket_down.selected=!1,e.checkbox_inmarket_up.selected=!1,e.checkbox_price_down.selected=!1,e.checkbox_price_up.selected=!1)};this.checkbox_inmarket_down.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.checkbox_inmarket_up.selected=!e.checkbox_inmarket_down.selected,o(1)},this),this.checkbox_inmarket_up.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.checkbox_inmarket_down.selected=!e.checkbox_inmarket_up.selected,o(2)},this),this.checkbox_price_down.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.checkbox_price_up.selected=!e.checkbox_price_down.selected,o(3)},this),this.checkbox_price_up.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.checkbox_price_down.selected=!e.checkbox_price_up.selected,o(4)},this),this.checkbox_battlenum_down.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.checkbox_battlenum_up.selected=!e.checkbox_battlenum_down.selected,o(5)},this),this.checkbox_battlenum_up.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.checkbox_battlenum_down.selected=!e.checkbox_battlenum_up.selected,o(6)},this)},t.prototype.onKindSeleClick=function(e){this.group_kind_select.visible?(this.group_kind_select.visible=!1,this.image_kind_down.visible=!0,this.image_kind_up.visible=!1):(this.group_kind_select.visible=!0,this.image_kind_down.visible=!1,this.image_kind_up.visible=!0)},t.prototype.requestPageGetZombie=function(e){var t=this,i={page:e,limit:12},n=MThrid.NetworkManager.getInstance().allGetMarketZombie(i);n.then(function(e){console.log(e),t.curPageData=e,t.setSelePageUI()}),this.curShowPage=e},t.prototype.setSelePageUI=function(){var e=this;console.log(this.curPageData.data.results);var t=this.curPageData.data.results,i=t.length,n=0,o=Math.ceil(this.curPageData.data.page.total/12),a=this.curPageData.data.page.total%12,r=function(){var i=s.marketZombieItemDict[n];if(s.curShowPage<o||s.curShowPage==o&&a>n){var r=t[n];i.clickCallFunc=function(){console.log("点击",r),e.curSeleMarketZombieData=r;var t={nftNum:r.nftNum},i=MThrid.NetworkManager.getInstance().getZombieInfo(t);i.then(function(t){e.setZombieDetailInfo(t.data)});var n={page:1,limit:5,nftNum:r.nftNum},o=MThrid.NetworkManager.getInstance().allGetMarketZombieLog(n);o.then(function(t){console.log(t),e.updateTransactionGroup(t)})};var c=1;i.image_bg.source=RES.getRes(s.bgPngs[c]),i.group.visible=!0,i.label_nft.text="#"+r.nftNum,i.label_battle_num.text=r.pveAttackNum+"/"+MThrid.Const.ZombieBattleNum[c],i.label_curPrice.text=""+r.price/MThrid.BigUtil.pow(1,10),i.label_curPrice_m.text=""+r.price/MThrid.BigUtil.pow(1,10);var l=JSON.parse(r.gene);i.zombieFigureUI.setHeadByIndex(l.head_style),i.zombieFigureUI.setEyeByIndex(l.eye_style),i.zombieFigureUI.setShirtByIndex(l.shirt_style),console.log(22,i.zombieFigureUI)}else console.log("点击1"),i.group.visible=!1},s=this;for(n=0;12>n;n++)r();this.pageTurnUI.visible=o>1,this.pageTurnUI.visible&&this.pageTurnUI.setToolPageIndex(o),this.label_nohave_marketinfo.visible=0>=i},t.prototype.setZombieDetailInfo=function(e){if(console.log(e),null!=e){this.group_zombie.visible=!1,this.group_zombieDetial.visible=!0,this.label_atkvalue.text=e.attack,this.label_lifevalue.text=e.blood,this.label_speedvalue.text=e.speed,this.label_lackyvalue.text=e.lucky,this.label_growthvalue.text=e.gorw,this.label_owner_name.text=e.address,this.label_z_cur_price.text=""+this.curSeleMarketZombieData.price/MThrid.BigUtil.pow(1,10),this.label_m_cur_price.text=""+this.curSeleMarketZombieData.price/MThrid.BigUtil.pow(1,10),this.image_zombie_bg.source=RES.getRes(this.bgPngs[e.type]),this.label_battle_num.text=e.pveAttackNum+"/"+MThrid.Const.ZombieBattleNum[e.type],this.curSeleZombieData=e,MThrid.Web3Manager.getInstance().getUserAddress()==this.curSeleZombieData.address?this.btn_buy_zombie.visible=!1:this.btn_buy_zombie.visible=!0;var t=JSON.parse(e.gene);this.zombieFigureUI.setHeadByIndex(t.head_style),this.zombieFigureUI.setEyeByIndex(t.eye_style),this.zombieFigureUI.setShirtByIndex(t.shirt_style),this.zombieFigureUI.visible=!0;var i,n=MThrid.Web3Manager.getInstance().getUserAddress();i=n.toLowerCase()==this.curSeleZombieData.address?"atlas_mark_29":"atlas_mark_22";var o=this.btn_buy_zombie.getChildAt(0);o.source=RES.getRes(i)}},t.prototype.onBuyZombieClick=function(e){var t=this,i=MThrid.Web3Manager.getInstance().getUserAddress(),n=Number(this.curSeleZombieData.nftNum),o=this.curSeleMarketZombieData.price,a=300,r=!1,s=null;if(i.toLowerCase()==this.curSeleZombieData.address){console.log("if");var c=MThrid.Web3Manager.getInstance().cancelAskOrder(n,function(){MainUI.getInstance().showGamePopInfoUI(!0),MainUI.getInstance().gamePopInfoUI.setTimeInfo(a),MainUI.getInstance().gamePopInfoUI.timeUpdateFunc=function(){if(a-=.016,r||MainUI.getInstance().gamePopInfoUI.setTimeInfo(a),0>=a&&(MainUI.getInstance().showGamePopInfoUI(!1),MainUI.getInstance().gamePopInfoUI.stopTimer()),console.log("this.updateTime "+a),null!=s){var e={contractType:"ShelfNft",txId:s},i=MThrid.NetworkManager.getInstance().requestCheckHash(e);i.then(function(e){console.log("retvalue"),console.log(e),e.success&&!r&&(r=!0,a=1,t.group_zombie.visible=!0,t.group_zombieDetial.visible=!1,t.requestPageGetZombie(t.curShowPage))})}},MainUI.getInstance().gamePopInfoUI.startTimer()});c.then(function(e){console.log(e),s=e.transactionHash})}else{console.log("else");var l=MThrid.Web3Manager.getInstance().getMarketBoxZombie(n,o,function(){MainUI.getInstance().showGamePopInfoUI(!0),MainUI.getInstance().gamePopInfoUI.setTimeInfo(a),MainUI.getInstance().gamePopInfoUI.timeUpdateFunc=function(){if(a-=.016,r||MainUI.getInstance().gamePopInfoUI.setTimeInfo(a),0>=a&&(MainUI.getInstance().showGamePopInfoUI(!1),MainUI.getInstance().gamePopInfoUI.stopTimer()),console.log("this.updateTime "+a),null!=s){var e={contractType:"PurchaseNft",txId:s},i=MThrid.NetworkManager.getInstance().requestCheckHash(e);i.then(function(e){console.log("retvalue"),console.log(e),e.success&&!r&&(r=!0,a=1,t.group_zombie.visible=!0,t.group_zombieDetial.visible=!1,MainUI.getInstance().gamePopInfoUI.setBoardInfo("购买成功"),t.requestPageGetZombie(t.curShowPage))})}},MainUI.getInstance().gamePopInfoUI.startTimer()});l.then(function(e){console.log(e),s=e.transactionHash})}},t.prototype.initTransactionGroup=function(){for(var e=[this.group_transaction_1,this.group_transaction_2,this.group_transaction_3,this.group_transaction_4,this.group_transaction_5],t=0,i=0,o=e;i<o.length;i++){var a=o[i],r=a.getChildByName("label_name"),s=a.getChildByName("label_price"),c=a.getChildByName("label_from"),l=a.getChildByName("label_to"),u=a.getChildByName("label_time"),h=new n;h.group=a,h.label_name=r,h.label_price=s,h.label_from=c,h.label_to=l,h.label_time=u,this.marketTransactionItem[t]=h,t+=1}},t.prototype.updateTransactionGroup=function(e){var t=e.data.results,i=(t.length,0),n=Math.ceil(e.data.page.total/5),o=e.data.page.total%5,a=1;for(i=0;5>i;i++){var r=this.marketTransactionItem[i],s=t[i];if(n>a||a==n&&o>i){r.label_price.text=s.price/MThrid.BigUtil.pow(1,10)+"BNB";var c=s.sellerAddress.length;c>0?r.label_from.text="(地址："+s.sellerAddress.substr(0,7)+"..."+s.sellerAddress.substr(c-5,c)+")":r.label_from.text="UNKnow",c=s.toAddress.length,c>0?r.label_to.text="(地址："+s.toAddress.substr(0,7)+"..."+s.toAddress.substr(c-5,c)+")":r.label_to.text="UNKnow",r.label_time.text=this.getFormateDate(s.updateTime);var l=new Date(s.updateTime);console.log(l.getHours()),console.log(l.getMinutes()),console.log(l.getSeconds()),r.group.visible=!0}else r.group.visible=!1}},t.prototype.getFormateDate=function(e){var t=new Date(e),i=(t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours()),n=t.getMinutes(),o=t.getSeconds(),a=i.toString();i>=0&&9>=i&&(a="0"+i);var r=n.toString();n>=0&&9>=n&&(r="0"+n);var s=o.toString();o>=0&&9>=o&&(s="0"+o);var c=a+":"+r+":"+s;return c},t}(eui.Component);window.MarketUI=o,__reflect(o.prototype,"MarketUI",["eui.Component"])},function(e,t){var i=function(){function e(){}return e}();window.ZombiePageChildNode=i,__reflect(i.prototype,"ZombiePageChildNode",[]);var n=function(e){function t(){var t=e.call(this)||this;return t.nodeChilds=[],t.curPageIndex=1,t.toolPageIndex=8,t.toMaxIndex=0,t.skinName="resource/ui/pageturnui.exml",t.addEventListener(egret.Event.COMPLETE,t.onAddToStageComplete,t),t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStageComplete=function(e){this.initPageButton()},t.prototype.onAddToStage=function(e){this.group_page1&&this.initPageButton()},t.prototype.setClickPageCall=function(e){this.clickPageCall=e},t.prototype.reSetData=function(){this.curPageIndex=1,this.toMaxIndex=0},t.prototype.setToolPageIndex=function(e){this.toolPageIndex=e,this.initPageNode()},t.prototype.callPageFunc=function(e){this.clickPageCall&&this.clickPageCall(e)},t.prototype.initPageButton=function(){for(var e=this,t=0,n=[this.group_page1,this.group_page2,this.group_page3,this.group_page4,this.group_page5,this.group_page6,this.group_page7],o=function(e){var n=e.getChildByName("label"),o=e.getChildByName("image"),r=e.getChildByName("image_sele");n.touchEnabled=!1;var s=new i;s.label=n,s.image=o,s.image_sele=r,s.node=e,s.callFunc=function(){},o.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){s.callFunc&&s.callFunc()},a),a.nodeChilds[t]=s,t+=1},a=this,r=0,s=n;r<s.length;r++){var c=s[r];o(c)}this.image_leftpage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){if(e.toolPageIndex<8)e.curPageIndex>1&&(e.curPageIndex=e.curPageIndex-1,e.changePage7(),e.callPageFunc(e.curPageIndex));else{if(console.log(e.curPageIndex),e.toolPageIndex-e.curPageIndex<=2&&e.toMaxIndex>0)return e.toMaxIndex=e.toMaxIndex-1,e.changePage(),void e.callPageFunc(e.curPageIndex);e.curPageIndex>1&&(e.curPageIndex=e.curPageIndex-1,e.changePage(),e.callPageFunc(e.curPageIndex))}},this),this.image_rightpage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){if(e.toolPageIndex<8)e.curPageIndex<e.toolPageIndex&&(console.log(e.curPageIndex),console.log(e.toolPageIndex),e.curPageIndex=e.curPageIndex+1,e.changePage7(),e.callPageFunc(e.curPageIndex));else{if(e.toolPageIndex-e.curPageIndex<=2)return void(e.toMaxIndex<2&&(e.toMaxIndex=e.toMaxIndex+1,e.changePage(),e.callPageFunc(e.curPageIndex)));e.toMaxIndex=0,e.curPageIndex<e.toolPageIndex&&(e.curPageIndex=e.curPageIndex+1,console.log("this.curPageIndex  "+e.curPageIndex),e.changePage(),e.callPageFunc(e.curPageIndex))}},this)},t.prototype.initPageNode=function(){this.toolPageIndex<8?this.changePage7():this.changePage()},t.prototype.initPageNode7=function(){var e=this;this.changePage7(),this.image_leftpage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.curPageIndex>1&&(e.curPageIndex=e.curPageIndex-1,e.changePage7(),e.callPageFunc(e.curPageIndex))},this),this.image_rightpage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){console.log(e.curPageIndex),console.log(e.toolPageIndex),e.curPageIndex>=e.toolPageIndex||e.curPageIndex<e.toolPageIndex&&(console.log(e.curPageIndex),console.log(e.toolPageIndex),e.curPageIndex=e.curPageIndex+1,e.changePage7(),e.callPageFunc(e.curPageIndex))},this)},t.prototype.changePage7=function(){for(var e=this,t=1,i=function(i){var o=t,a=i.node,r=i.label,s=(i.image,i.image_sele);o<=n.toolPageIndex?(r.text=""+o,i.callFunc=function(){e.curPageIndex=o,e.changePage7(),e.callPageFunc(e.curPageIndex)},s.visible=o==n.curPageIndex,a.visible=!0):a.visible=!1,t+=1},n=this,o=0,a=this.nodeChilds;o<a.length;o++){var r=a[o];i(r)}},t.prototype.changePage=function(){var e,t=this,i=1,n=this.toolPageIndex-2;e=this.toolPageIndex-this.curPageIndex<=2?this.curPageIndex-3:this.curPageIndex<=3?1:this.curPageIndex-3;for(var o=function(o){var r=i,s=o.node,c=o.label,l=o.image,u=o.image_sele;if(l.removeEventListener(egret.TouchEvent.TOUCH_TAP,null,a),a.toolPageIndex-a.curPageIndex<=2){var h=e;1==i?c.text="1":6==i?c.text=""+a.toolPageIndex:2==i?c.text="...":c.text=""+h,6>=i?s.visible=!0:s.visible=!1;var d=a.toMaxIndex+a.curPageIndex;o.callFunc=function(){console.log("select curNum "+h),1==r?t.curPageIndex=1:6==r?(t.curPageIndex=n,t.toMaxIndex=2):2==r?t.curPageIndex=h:(t.curPageIndex=h,t.curPageIndex>=n&&(t.curPageIndex=n,t.toMaxIndex=h-n)),console.log("select index "+h),t.changePage(),t.callPageFunc(t.curPageIndex)},u.visible=d==h}else if(a.curPageIndex<=3){console.log("this.curPageIndex  == 1  "+a.curPageIndex);var g=i;6==i?c.text=""+a.toolPageIndex:5==i?c.text="...":c.text=""+e,6>=i?s.visible=!0:s.visible=!1,o.callFunc=function(){t.curPageIndex=g,console.log("select index "+t.curPageIndex),t.changePage(),t.callPageFunc(t.curPageIndex)},u.visible=a.curPageIndex==i}else{console.log("this.curPageIndex  == 2  "+a.curPageIndex);var p=e;1==i?c.text="1":7==i?c.text=""+a.toolPageIndex:2==i||6==i?c.text="...":c.text=""+e,s.visible=!0,o.callFunc=function(){t.curPageIndex=p,t.curPageIndex>=n&&(t.curPageIndex=n,t.toMaxIndex=p-n),console.log("select index "+t.curPageIndex),t.changePage(),t.callPageFunc(t.curPageIndex)},u.visible=a.curPageIndex==e}i+=1,e+=1},a=this,r=0,s=this.nodeChilds;r<s.length;r++){var c=s[r];o(c)}},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.Component);window.PageTurnUI=n,__reflect(n.prototype,"PageTurnUI",["eui.Component"])},function(e,t){var i=function(e){function t(t){var i=e.call(this)||this;return i.headIndex=1,i.eyeIndex=1,i.shirtIndex=1,i.isStartMoving=!1,i.skinName="resource/ui/zombiefigureui.exml",i.mData=t,i.addEventListener(egret.Event.COMPLETE,i.onAddToStage,i),i.addEventListener(egret.Event.ADDED_TO_STAGE,i.onAddToStage2,i),i}return __extends(t,e),t.prototype.setImageColor=function(e,t,i,n){var o=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];o[0]=t/255,o[6]=i/255,o[12]=n/255;var a=new egret.ColorMatrixFilter(o);e.filters=[a]},t.prototype.onAddToStage2=function(e){this.group_zombie&&this.initProp()},t.prototype.onAddToStage=function(e){this.initProp()},t.prototype.initProp=function(){this.group_hp.visible=!1,this.btn_head.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangHeadClick,this),this.btn_eye.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangEyeClick,this),this.btn_shirt.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangShirtClick,this),this.btn_head_color.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangHeadColorClick,this),this.btn_eye_color.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangEyeColorClick,this),this.btn_shirt_color.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChangShirtColorClick,this),this.mData.scaleX&&(this.group_zombie.scaleX=this.mData.scaleX),this.mData.scaleY&&(this.group_zombie.scaleY=this.mData.scaleY),this.mData.posX&&(this.group_zombie.x=this.mData.posX),this.mData.posY&&(this.group_zombie.y=this.mData.posY),this.mData.skewY&&(this.group_zombie.anchorOffsetX=.5,this.group_zombie.anchorOffsetY=.5,this.group_zombie.skewY=this.mData.skewY,this.group_hp.skewY=180,this.group_hp.x=1200),this.group_hp.scaleX=7,this.group_hp.scaleY=7,this.updateTimer=new egret.Timer(.02,0),this.updateTimer.addEventListener(egret.TimerEvent.TIMER,this.timeFunc,this),this.updateTimer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timeFuncFinish,this),console.log("this.bitmapLabel_buff_num  "+this.bitmapLabel_buff_num.x)},t.prototype.setZombieRotation=function(e){this.group_zombie.anchorOffsetX=.5,this.group_zombie.anchorOffsetY=.5,this.group_zombie.rotation=e},t.prototype.setZombiePosX=function(e){this.group_zombie.x=e},t.prototype.setZombiePosY=function(e){this.group_zombie.y=e},t.prototype.timeFunc=function(){this.group_hp.y=this.group_hp.y-27.6,this.group_hp.y<-700&&(this.group_hp.visible=!1,this.updateTimer.stop())},t.prototype.timeFuncFinish=function(){},t.prototype.showHurtBuff=function(e){this.group_hp.visible=!0,this.group_hp.y=26,this.bitmapLabel_buff_num.text=""+e,this.updateTimer.start()},t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t.prototype.onChangHeadClick=function(e){var t=this;this.headIndex>8&&(this.headIndex=0),this.headIndex=this.headIndex+1;var i="resource/assets/ui/figure/figure_head-"+this.headIndex+".png";RES.getResByUrl(i,function(){RES.getRes(i)&&(t.image_head.source=RES.getRes(i))})},t.prototype.setHeadByIndex=function(e){var t=this,i="resource/assets/ui/figure/figure_head-"+e+".png";RES.getResByUrl(i,function(){RES.getRes(i)&&(t.image_head.source=RES.getRes(i))})},t.prototype.onChangHeadColorClick=function(e){var t=255*Math.random(),i=255*Math.random(),n=255*Math.random();this.setImageColor(this.image_head,t,i,n),this.setImageColor(this.image_left_hand_1,t,i,n),this.setImageColor(this.image_left_hand_2,t,i,n),this.setImageColor(this.image_left_hand_3,t,i,n),this.setImageColor(this.image_right_hand_1,t,i,n),this.setImageColor(this.image_right_hand_2,t,i,n),this.setImageColor(this.image_right_hand_3,t,i,n)},t.prototype.onChangEyeClick=function(e){var t=this;this.eyeIndex>11&&(this.eyeIndex=0),this.eyeIndex=this.eyeIndex+1;var i="resource/assets/ui/figure/figure_eyes-"+this.eyeIndex+".png";RES.getResByUrl(i,function(){RES.getRes(i)&&(t.image_eye.source=RES.getRes(i))})},t.prototype.setEyeByIndex=function(e){var t=this,i="resource/assets/ui/figure/figure_eyes-"+e+".png";RES.getResByUrl(i,function(){RES.getRes(i)&&(t.image_eye.source=RES.getRes(i))})},t.prototype.onChangEyeColorClick=function(e){var t=255*Math.random(),i=255*Math.random(),n=255*Math.random();this.setImageColor(this.image_eye,t,i,n)},t.prototype.onChangShirtClick=function(e){var t=this;this.shirtIndex>5&&(this.shirtIndex=0),this.shirtIndex=this.shirtIndex+1;var i="resource/assets/ui/figure/figure_shirt-"+this.shirtIndex+".png";RES.getResByUrl(i,function(){RES.getRes(i)&&(t.image_shirt.source=RES.getRes(i))})},t.prototype.setShirtByIndex=function(e){var t=this,i="resource/assets/ui/figure/figure_shirt-"+e+".png";RES.getResByUrl(i,function(){RES.getRes(i)&&(t.image_shirt.source=RES.getRes(i))})},t.prototype.onChangShirtColorClick=function(e){var t=255*Math.random(),i=255*Math.random(),n=255*Math.random();this.setImageColor(this.image_shirt,t,i,n)},t}(eui.Component);window.ZombieFigureUI=i,__reflect(i.prototype,"ZombieFigureUI",["eui.Component"])}]);