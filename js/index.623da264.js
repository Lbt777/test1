import{_ as ae,o as $t,b as le,f as ce,d as fe,h as Be,c as Pe,a as ke,r as Ct,i as Lt,e as ot,t as pt,s as De,v as Te,ag as Ee,j as Se,k as Ie,u as Le,z as Me,A as Fe,C as Re,D as Ne,E as Oe,G as $e,H as Ue,I as ze,J as je,L as Ge,M as He,N as Ke,O as Xe,P as Ze,Q as Ve,R as Je,S as We,T as Ye,U as qe,V as Qe,W as tr,X as er,Y as rr,Z as nr,$ as or,a0 as ir,a1 as sr,a2 as ar,a3 as lr,a4 as cr,a5 as fr,a6 as ur,a7 as hr,a8 as gr,a9 as dr,aa as pr,ab as vr,ac as mr,aE as br,B as _r,af as wr,b6 as yr}from"./index.cf7aa455.js";function Mt(i){return i===""?i:i==="true"||i=="1"}function Cr(i,t){return new Promise((e,r)=>{var n=new XMLHttpRequest;n.responseType="blob",n.onload=function(){var o=new FileReader;o.onloadend=function(){e(o.result)},o.readAsArrayBuffer(n.response)},n.open("GET",i),n.send()})}function et(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(i))}function Yt(i,t){for(var e="",r=0,n=-1,o=0,s,a=0;a<=i.length;++a){if(a<i.length)s=i.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(n===a-1||o===1))if(n!==a-1&&o===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var l=e.lastIndexOf("/");if(l!==e.length-1){l===-1?(e="",r=0):(e=e.slice(0,l),r=e.length-1-e.lastIndexOf("/")),n=a,o=0;continue}}else if(e.length===2||e.length===1){e="",r=0,n=a,o=0;continue}}t&&(e.length>0?e+="/..":e="..",r=2)}else e.length>0?e+="/"+i.slice(n+1,a):e=i.slice(n+1,a),r=a-n-1;n=a,o=0}else s===46&&o!==-1?++o:o=-1}return e}function xr(i,t){var e=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return e?e===t.root?e+r:e+i+r:r}var gt={resolve:function(){for(var t="",e=!1,r,n=arguments.length-1;n>=-1&&!e;n--){var o;n>=0?o=arguments[n]:(r===void 0&&(r=process.cwd()),o=r),et(o),o.length!==0&&(t=o+"/"+t,e=o.charCodeAt(0)===47)}return t=Yt(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(et(t),t.length===0)return".";var e=t.charCodeAt(0)===47,r=t.charCodeAt(t.length-1)===47;return t=Yt(t,!e),t.length===0&&!e&&(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return et(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var r=arguments[e];et(r),r.length>0&&(t===void 0?t=r:t+="/"+r)}return t===void 0?".":gt.normalize(t)},relative:function(t,e){if(et(t),et(e),t===e||(t=gt.resolve(t),e=gt.resolve(e),t===e))return"";for(var r=1;r<t.length&&t.charCodeAt(r)===47;++r);for(var n=t.length,o=n-r,s=1;s<e.length&&e.charCodeAt(s)===47;++s);for(var a=e.length,l=a-s,c=o<l?o:l,h=-1,f=0;f<=c;++f){if(f===c){if(l>c){if(e.charCodeAt(s+f)===47)return e.slice(s+f+1);if(f===0)return e.slice(s+f)}else o>c&&(t.charCodeAt(r+f)===47?h=f:f===0&&(h=0));break}var m=t.charCodeAt(r+f),C=e.charCodeAt(s+f);if(m!==C)break;m===47&&(h=f)}var P="";for(f=r+h+1;f<=n;++f)(f===n||t.charCodeAt(f)===47)&&(P.length===0?P+="..":P+="/..");return P.length>0?P+e.slice(s+h):(s+=h,e.charCodeAt(s)===47&&++s,e.slice(s))},_makeLong:function(t){return t},dirname:function(t){if(et(t),t.length===0)return".";for(var e=t.charCodeAt(0),r=e===47,n=-1,o=!0,s=t.length-1;s>=1;--s)if(e=t.charCodeAt(s),e===47){if(!o){n=s;break}}else o=!1;return n===-1?r?"/":".":r&&n===1?"//":t.slice(0,n)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');et(t);var r=0,n=-1,o=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,l=-1;for(s=t.length-1;s>=0;--s){var c=t.charCodeAt(s);if(c===47){if(!o){r=s+1;break}}else l===-1&&(o=!1,l=s+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(n=s):(a=-1,n=l))}return r===n?n=l:n===-1&&(n=t.length),t.slice(r,n)}else{for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!o){r=s+1;break}}else n===-1&&(o=!1,n=s+1);return n===-1?"":t.slice(r,n)}},extname:function(t){et(t);for(var e=-1,r=0,n=-1,o=!0,s=0,a=t.length-1;a>=0;--a){var l=t.charCodeAt(a);if(l===47){if(!o){r=a+1;break}continue}n===-1&&(o=!1,n=a+1),l===46?e===-1?e=a:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return xr("/",t)},parse:function(t){et(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var r=t.charCodeAt(0),n=r===47,o;n?(e.root="/",o=1):o=0;for(var s=-1,a=0,l=-1,c=!0,h=t.length-1,f=0;h>=o;--h){if(r=t.charCodeAt(h),r===47){if(!c){a=h+1;break}continue}l===-1&&(c=!1,l=h+1),r===46?s===-1?s=h:f!==1&&(f=1):s!==-1&&(f=-1)}return s===-1||l===-1||f===0||f===1&&s===l-1&&s===a+1?l!==-1&&(a===0&&n?e.base=e.name=t.slice(1,l):e.base=e.name=t.slice(a,l)):(a===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,l)):(e.name=t.slice(a,s),e.base=t.slice(a,l)),e.ext=t.slice(s,l)),a>0?e.dir=t.slice(0,a-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};gt.posix=gt;const Ar=gt.extname,ue=gt.basename;class Br{constructor(){let t=(()=>typeof global>"u")(),e="image/png",r="image/jpeg",n="image/jpeg",o="image/webp",s="application/pdf",a="image/svg+xml";Object.assign(this,{toMime:this.toMime.bind(this),fromMime:this.fromMime.bind(this),expected:t?'"png", "jpg", or "webp"':'"png", "jpg", "pdf", or "svg"',formats:t?{png:e,jpg:r,jpeg:n,webp:o}:{png:e,jpg:r,jpeg:n,pdf:s,svg:a},mimes:t?{[e]:"png",[r]:"jpg",[o]:"webp"}:{[e]:"png",[r]:"jpg",[s]:"pdf",[a]:"svg"}})}toMime(t){return this.formats[(t||"").replace(/^\./,"").toLowerCase()]}fromMime(t){return this.mimes[t]}}function Pr(i,{filename:t="",extension:e="",format:k,page:n,quality:o,matte:s,density:a,outline:l,archive:C}={}){var{fromMime:h,toMime:f,expected:m}=new Br,C=C||"canvas",P=k||e.replace(/@\d+x$/i,"")||Ar(t),k=h(f(P)||P),O=f(k),d=i.length;if(!P)throw new Error("Cannot determine image format (use a filename extension or 'format' argument)");if(!k)throw new Error(`Unsupported file format "${P}" (expected ${m})`);if(!d)throw new RangeError("Canvas has no associated contexts (try calling getContext or newPage first)");let p,x,g=t.replace(/{(\d*)}/g,(v,w)=>(x=!0,w=parseInt(w,10),p=isFinite(w)?w:isFinite(p)?p:-1,"{}")),_=n>0?n-1:n<0?d+n:void 0;if(isFinite(_)&&_<0||_>=d)throw new RangeError(d==1?`Canvas only has a \u2018page 1\u2019 (${_} is out of bounds)`:`Canvas has pages 1\u2013${d} (${_} is out of bounds)`);if(i=isFinite(_)?[i[_]]:x||k=="pdf"?i:i.slice(-1),o===void 0)o=.92;else if(typeof o!="number"||!isFinite(o)||o<0||o>1)throw new TypeError("The quality option must be an number in the 0.0\u20131.0 range");if(a===void 0){let v=(e||ue(t,P)).match(/@(\d+)x$/i);a=v?parseInt(v[1],10):1}else if(typeof a!="number"||!Number.isInteger(a)||a<1)throw new TypeError("The density option must be a non-negative integer");return l===void 0?l=!0:k=="svg"&&(l=!!l),{filename:t,pattern:g,format:k,mime:O,pages:i,padding:p,quality:o,matte:s,density:a,outline:l,archive:C}}class kt{static for(t){return new kt().append(t).get()}constructor(){this.crc=-1}get(){return~this.crc}append(t){for(var e=this.crc|0,r=this.table,n=0,o=t.length|0;n<o;n++)e=e>>>8^r[(e^t[n])&255];return this.crc=e,this}}kt.prototype.table=(()=>{var i,t,e,r=[];for(i=0;i<256;i++){for(e=i,t=0;t<8;t++)e=e&1?e>>>1^3988292384:e>>>1;r[i]=e}return r})();function Ft(i){let t=new Uint8Array(i),e=new DataView(t.buffer),r={array:t,view:e,size:i,set8(n,o){return e.setUint8(n,o),r},set16(n,o){return e.setUint16(n,o,!0),r},set32(n,o){return e.setUint32(n,o,!0),r},bytes(n,o){return t.set(o,n),r}};return r}class Dt{constructor(t){let e=new Date;Object.assign(this,{directory:t,offset:0,files:[],time:(e.getHours()<<6|e.getMinutes())<<5|e.getSeconds()/2,date:(e.getFullYear()-1980<<4|e.getMonth()+1)<<5|e.getDate()}),this.add(t)}async add(t,e){let r=!e,n=Dt.encoder.encode(`${this.directory}/${r?"":t}`),o=new Uint8Array(r?0:await e.arrayBuffer()),s=30+n.length,a=s+o.length,l=16,{offset:c}=this,h=Ft(26).set32(0,134742036).set16(6,this.time).set16(8,this.date).set32(10,kt.for(o)).set32(14,o.length).set32(18,o.length).set16(22,n.length);c+=s;let f=Ft(s+o.length+l).set32(0,67324752).bytes(4,h.array).bytes(30,n).bytes(s,o);c+=o.length,f.set32(a,134695760).bytes(a+4,h.array.slice(10,22)),c+=l,this.files.push({offset:c,folder:r,name:n,header:h,payload:f}),this.offset=c}toBuffer(){let t=this.files.reduce((f,{name:m})=>46+m.length+f,0),e=Ft(t+22),r=0;for(var{offset:n,name:o,header:s,folder:a}of this.files)e.set32(r,33639248).set16(r+4,20).bytes(r+6,s.array).set8(r+38,a?16:0).set32(r+42,n).bytes(r+46,o),r+=46+o.length;e.set32(r,101010256).set16(r+8,this.files.length).set16(r+10,this.files.length).set32(r+12,t).set32(r+16,this.offset);let l=new Uint8Array(this.offset+e.size),c=0;for(var{payload:h}of this.files)l.set(h.array,c),c+=h.size;return l.set(e.array,c),l}get blob(){return new Blob([this.toBuffer()],{type:"application/zip"})}}Dt.encoder=new TextEncoder;const jt=(i,t,e,r)=>{if(r){let{width:n,height:o}=i,s=Object.assign(document.createElement("canvas"),{width:n,height:o}),a=s.getContext("2d");a.fillStyle=r,a.fillRect(0,0,n,o),a.drawImage(i,0,0),i=s}return new Promise((n,o)=>i.toBlob(n,t,e))},kr=(...i)=>jt(...i).then(t=>t.arrayBuffer()),Dr=async(i,t,e,r,n)=>{he(n,await jt(i,t,e,r))},Tr=async(i,t,e,r,n,o,s)=>{let a=h=>o.replace("{}",String(h+1).padStart(s,"0")),l=ue(n,".zip")||"archive",c=new Dt(l);await Promise.all(i.map(async(h,f)=>{let m=a(f);await c.add(m,await jt(h,t,e,r))})),he(`${l}.zip`,c.blob)},he=(i,t)=>{const e=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=e,r.setAttribute("download",i),typeof r.download>"u"&&r.setAttribute("target","_blank"),document.body.appendChild(r),r.click(),document.body.removeChild(r),setTimeout(()=>window.URL.revokeObjectURL(e),100)},Er=(i,t,e)=>i.map(r=>{if(t==1&&!e)return r.canvas;let n=document.createElement("canvas"),o=n.getContext("2d"),s=r.canvas?r.canvas:r;return n.width=s.width*t,n.height=s.height*t,e&&(o.fillStyle=e,o.fillRect(0,0,n.width,n.height)),o.scale(t,t),o.drawImage(s,0,0),n}),Sr={asBuffer:kr,asDownload:Dr,asZipDownload:Tr,atScale:Er,options:Pr},{asBuffer:Rt,asDownload:Ir,asZipDownload:Lr,atScale:Nt,options:Ot}=Sr,qt=Symbol.for("toDataURL"),Mr=i=>new Promise((t,e)=>Object.assign(new ge,{crossOrigin:"Anonymous",onload:t,onerror:e,src:i}));class Fr{constructor(t,e){let r=document.createElement("canvas"),n=[];Object.defineProperty(r,"async",{value:!0,writable:!1,enumerable:!0});for(var[o,s]of Object.entries({png:()=>Rt(r,"image/png"),jpg:()=>Rt(r,"image/jpeg"),pages:()=>n.concat(r).map(a=>a.getContext("2d"))}))Object.defineProperty(r,o,{get:s});return Object.assign(r,{width:t,height:e,newPage(...a){var{width:c,height:h}=r,l=Object.assign(document.createElement("canvas"),{width:c,height:h});l.getContext("2d").drawImage(r,0,0),n.push(l);var[c,h]=a.length?a:[c,h];return Object.assign(r,{width:c,height:h}).getContext("2d")},saveAs(a,l){l=typeof l=="number"?{quality:l}:l;let c=Ot(this.pages,{filename:a,...l}),{pattern:h,padding:f,mime:m,quality:C,matte:P,density:k,archive:O}=c,d=Nt(c.pages,k);return f==null?Ir(d[0],m,C,P,a):Lr(d,m,C,P,O,h,f)},toBuffer(a="png",l={}){l=typeof l=="number"?{quality:l}:l;let c=Ot(this.pages,{extension:a,...l}),{mime:h,quality:f,matte:m,pages:C,density:P}=c,k=Nt(C,P,m)[0];return Rt(k,h,f,m)},[qt]:r.toDataURL.bind(r),toDataURL(a="png",l={}){l=typeof l=="number"?{quality:l}:l;let c=Ot(this.pages,{extension:a,...l}),{mime:h,quality:f,matte:m,pages:C,density:P}=c,k=Nt(C,P,m)[0],O=k[k===r?qt:"toDataURL"](h,f);return Promise.resolve(O)}})}}const{CanvasRenderingContext2D:Rr,CanvasGradient:Nr,CanvasPattern:Or,Image:ge,ImageData:$r,Path2D:Ur,DOMMatrix:zr,DOMRect:jr,DOMPoint:Gr}=window,Hr={Canvas:Fr,loadImage:Mr,CanvasRenderingContext2D:Rr,CanvasGradient:Nr,CanvasPattern:Or,Image:ge,ImageData:$r,Path2D:Ur,DOMMatrix:zr,DOMRect:jr,DOMPoint:Gr},wt=(i,t,e={},r=e)=>{if(Array.isArray(t))t.forEach(n=>wt(i,n,e,r));else if(typeof t=="function")t(i,e,r,wt);else{const n=Object.keys(t)[0];Array.isArray(t[n])?(r[n]={},wt(i,t[n],e,r[n])):r[n]=t[n](i,e,r,wt)}return e},dt=(i,t)=>(e,r,n,o)=>{t(e,r,n)&&o(e,i,r,n)},Kr=(i,t)=>(e,r,n,o)=>{const s=[];let a=e.pos;for(;t(e,r,n);){const l={};if(o(e,i,r,l),e.pos===a)break;a=e.pos,s.push(l)}return s},Xr=i=>({data:i,pos:0}),Y=()=>i=>i.data[i.pos++],de=(i=0)=>t=>t.data[t.pos+i],nt=i=>t=>t.data.subarray(t.pos,t.pos+=i),Tt=i=>t=>t.data.subarray(t.pos,t.pos+i),Ut=i=>t=>Array.from(nt(i)(t)).map(e=>String.fromCharCode(e)).join(""),ht=i=>t=>{const e=nt(2)(t);return i?(e[1]<<8)+e[0]:(e[0]<<8)+e[1]},pe=(i,t)=>(e,r,n)=>{const o=typeof t=="function"?t(e,r,n):t,s=nt(i),a=new Array(o);for(var l=0;l<o;l++)a[l]=s(e);return a},Zr=(i,t,e)=>{for(var r=0,n=0;n<e;n++)r+=i[t+n]&&2**(e-n-1);return r},Gt=i=>t=>{const e=Y()(t),r=new Array(8);for(var n=0;n<8;n++)r[7-n]=!!(e&1<<n);return Object.keys(i).reduce((o,s)=>{const a=i[s];return a.length?o[s]=Zr(r,a.index,a.length):o[s]=r[a.index],o},{})};var Et={blocks:i=>{const e=[],r=i.data.length;for(var n=0,o=Y()(i);o!==0&&o;o=Y()(i)){if(i.pos+o>=r){const c=r-i.pos;e.push(nt(c)(i)),n+=c;break}e.push(nt(o)(i)),n+=o}const s=new Uint8Array(n);for(var a=0,l=0;l<e.length;l++)s.set(e[l],a),a+=e[l].length;return s}};const Vr=dt({gce:[{codes:nt(2)},{byteSize:Y()},{extras:Gt({future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}})},{delay:ht(!0)},{transparentColorIndex:Y()},{terminator:Y()}]},i=>{var t=Tt(2)(i);return t[0]===33&&t[1]===249}),Jr=dt({image:[{code:Y()},{descriptor:[{left:ht(!0)},{top:ht(!0)},{width:ht(!0)},{height:ht(!0)},{lct:Gt({exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}})}]},dt({lct:pe(3,(i,t,e)=>Math.pow(2,e.descriptor.lct.size+1))},(i,t,e)=>e.descriptor.lct.exists),{data:[{minCodeSize:Y()},Et]}]},i=>de()(i)===44),Wr=dt({text:[{codes:nt(2)},{blockSize:Y()},{preData:(i,t,e)=>nt(e.text.blockSize)(i)},Et]},i=>{var t=Tt(2)(i);return t[0]===33&&t[1]===1}),Yr=dt({application:[{codes:nt(2)},{blockSize:Y()},{id:(i,t,e)=>Ut(e.blockSize)(i)},Et]},i=>{var t=Tt(2)(i);return t[0]===33&&t[1]===255}),qr=dt({comment:[{codes:nt(2)},Et]},i=>{var t=Tt(2)(i);return t[0]===33&&t[1]===254}),Qr=[{header:[{signature:Ut(3)},{version:Ut(3)}]},{lsd:[{width:ht(!0)},{height:ht(!0)},{gct:Gt({exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}})},{backgroundColorIndex:Y()},{pixelAspectRatio:Y()}]},dt({gct:pe(3,(i,t)=>Math.pow(2,t.lsd.gct.size+1))},(i,t)=>t.lsd.gct.exists),{frames:Kr([Vr,Yr,qr,Jr,Wr],i=>{var t=de()(i);return t===33||t===44})}],tn=(i,t)=>{const e=new Array(i.length),r=i.length/t,n=function(h,f){const m=i.slice(f*t,(f+1)*t);e.splice.apply(e,[h*t,t].concat(m))},o=[0,4,2,1],s=[8,8,4,2];for(var a=0,l=0;l<4;l++)for(var c=o[l];c<r;c+=s[l])n(c,a),a++;return e},en=(i,t,e)=>{const o=e;var s,a,l,c,h,f,m,_,C,P,g,k,v,w,T,A;const O=new Array(e),d=new Array(4096),p=new Array(4096),x=new Array(4096+1);for(k=i,a=1<<k,h=a+1,s=a+2,m=-1,c=k+1,l=(1<<c)-1,C=0;C<a;C++)d[C]=0,p[C]=C;var g,_,v,w,A,T;for(g=_=v=w=A=T=0,P=0;P<o;){if(w===0){if(_<c){g+=t[T]<<_,_+=8,T++;continue}if(C=g&l,g>>=c,_-=c,C>s||C==h)break;if(C==a){c=k+1,l=(1<<c)-1,s=a+2,m=-1;continue}if(m==-1){x[w++]=p[C],m=C,v=C;continue}for(f=C,C==s&&(x[w++]=v,C=m);C>a;)x[w++]=p[C],C=d[C];v=p[C]&255,x[w++]=v,s<4096&&(d[s]=m,p[s]=v,s++,(s&l)===0&&s<4096&&(c++,l+=s)),m=f}w--,O[A++]=x[w],P++}for(P=A;P<o;P++)O[P]=0;return O},rn=i=>{const t=new Uint8Array(i);return wt(Xr(t),Qr)},nn=i=>{const t=i.pixels.length,e=new Uint8ClampedArray(t*4);for(var r=0;r<t;r++){const n=r*4,o=i.pixels[r],s=i.colorTable[o];e[n]=s[0],e[n+1]=s[1],e[n+2]=s[2],e[n+3]=o!==i.transparentIndex?255:0}return e},on=(i,t,e)=>{if(!i.image){console.warn("gif frame does not have associated image.");return}const{image:r}=i,n=r.descriptor.width*r.descriptor.height;var o=en(r.data.minCodeSize,r.data.blocks,n);r.descriptor.lct.interlaced&&(o=tn(o,r.descriptor.width));const s={pixels:o,dims:{top:i.image.descriptor.top,left:i.image.descriptor.left,width:i.image.descriptor.width,height:i.image.descriptor.height}};return r.descriptor.lct&&r.descriptor.lct.exists?s.colorTable=r.lct:s.colorTable=t,i.gce&&(s.delay=(i.gce.delay||10)*10,s.disposalType=i.gce.extras.disposal,i.gce.extras.transparentColorGiven&&(s.transparentIndex=i.gce.transparentColorIndex)),e&&(s.patch=nn(s)),s},sn=(i,t)=>i.frames.filter(e=>e.image).map(e=>on(e,i.gct,t));function an(i,t,e){const r=ve(t),n=i-1;let o=0;switch(e){case Z.L:o=rt[n][0];break;case Z.M:o=rt[n][1];break;case Z.Q:o=rt[n][2];break;case Z.H:o=rt[n][3];break}return r<=o}function ln(i,t){for(var e=1,r=ve(i),n=0,o=rt.length;n<o;n++){var s=0;switch(t){case Z.L:s=rt[n][0];break;case Z.M:s=rt[n][1];break;case Z.Q:s=rt[n][2];break;case Z.H:s=rt[n][3];break}if(r<=s)break;e++}if(e>rt.length)throw new Error("Too long data");return e}function ve(i){var t=encodeURI(i).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=Number(i)?3:0)}class cn{constructor(t){this.mode=J.MODE_8BIT_BYTE,this.parsedData=[],this.data=t;const e=[];for(let r=0,n=this.data.length;r<n;r++){const o=[],s=this.data.charCodeAt(r);s>65536?(o[0]=240|(s&1835008)>>>18,o[1]=128|(s&258048)>>>12,o[2]=128|(s&4032)>>>6,o[3]=128|s&63):s>2048?(o[0]=224|(s&61440)>>>12,o[1]=128|(s&4032)>>>6,o[2]=128|s&63):s>128?(o[0]=192|(s&1984)>>>6,o[1]=128|s&63):o[0]=s,e.push(o)}this.parsedData=Array.prototype.concat.apply([],e),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}getLength(){return this.parsedData.length}write(t){for(let e=0,r=this.parsedData.length;e<r;e++)t.put(this.parsedData[e],8)}}class ft{constructor(t=-1,e=Z.L){this.moduleCount=0,this.dataList=[],this.typeNumber=t,this.errorCorrectLevel=e,this.moduleCount=0,this.dataList=[]}addData(t){if(this.typeNumber<=0)this.typeNumber=ln(t,this.errorCorrectLevel);else{if(this.typeNumber>40)throw new Error(`Invalid QR version: ${this.typeNumber}`);if(!an(this.typeNumber,t,this.errorCorrectLevel))throw new Error(`Data is too long for QR version: ${this.typeNumber}`)}const e=new cn(t);this.dataList.push(e),this.dataCache=void 0}isDark(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(`${t},${e}`);return this.modules[t][e]}getModuleCount(){return this.moduleCount}make(){this.makeImpl(!1,this.getBestMaskPattern())}makeImpl(t,e){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(let r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(let n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,e),this.typeNumber>=7&&this.setupTypeNumber(t),this.dataCache==null&&(this.dataCache=ft.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,e)}setupPositionProbePattern(t,e){for(let r=-1;r<=7;r++)if(!(t+r<=-1||this.moduleCount<=t+r))for(let n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(0<=r&&r<=6&&(n==0||n==6)||0<=n&&n<=6&&(r==0||r==6)||2<=r&&r<=4&&2<=n&&n<=4?this.modules[t+r][e+n]=!0:this.modules[t+r][e+n]=!1)}getBestMaskPattern(){if(Number.isInteger(this.maskPattern)&&Object.values(st).includes(this.maskPattern))return this.maskPattern;let t=0,e=0;for(let r=0;r<8;r++){this.makeImpl(!0,r);const n=L.getLostPoint(this);(r==0||t>n)&&(t=n,e=r)}return e}setupTimingPattern(){for(let t=8;t<this.moduleCount-8;t++)this.modules[t][6]==null&&(this.modules[t][6]=t%2==0);for(let t=8;t<this.moduleCount-8;t++)this.modules[6][t]==null&&(this.modules[6][t]=t%2==0)}setupPositionAdjustPattern(){const t=L.getPatternPosition(this.typeNumber);for(let e=0;e<t.length;e++)for(let r=0;r<t.length;r++){const n=t[e],o=t[r];if(this.modules[n][o]==null)for(let s=-2;s<=2;s++)for(let a=-2;a<=2;a++)s==-2||s==2||a==-2||a==2||s==0&&a==0?this.modules[n+s][o+a]=!0:this.modules[n+s][o+a]=!1}}setupTypeNumber(t){const e=L.getBCHTypeNumber(this.typeNumber);for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(var r=0;r<18;r++){var n=!t&&(e>>r&1)==1;this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}}setupTypeInfo(t,e){const r=this.errorCorrectLevel<<3|e,n=L.getBCHTypeInfo(r);for(var o=0;o<15;o++){var s=!t&&(n>>o&1)==1;o<6?this.modules[o][8]=s:o<8?this.modules[o+1][8]=s:this.modules[this.moduleCount-15+o][8]=s}for(var o=0;o<15;o++){var s=!t&&(n>>o&1)==1;o<8?this.modules[8][this.moduleCount-o-1]=s:o<9?this.modules[8][15-o-1+1]=s:this.modules[8][15-o-1]=s}this.modules[this.moduleCount-8][8]=!t}mapData(t,e){let r=-1,n=this.moduleCount-1,o=7,s=0;for(let a=this.moduleCount-1;a>0;a-=2)for(a==6&&a--;;){for(let l=0;l<2;l++)if(this.modules[n][a-l]==null){let c=!1;s<t.length&&(c=(t[s]>>>o&1)==1),L.getMask(e,n,a-l)&&(c=!c),this.modules[n][a-l]=c,o--,o==-1&&(s++,o=7)}if(n+=r,n<0||this.moduleCount<=n){n-=r,r=-r;break}}}static createData(t,e,r){const n=at.getRSBlocks(t,e),o=new fn;for(var s=0;s<r.length;s++){const l=r[s];o.put(l.mode,4),o.put(l.getLength(),L.getLengthInBits(l.mode,t)),l.write(o)}let a=0;for(var s=0;s<n.length;s++)a+=n[s].dataCount;if(o.getLengthInBits()>a*8)throw new Error(`code length overflow. (${o.getLengthInBits()}>${a*8})`);for(o.getLengthInBits()+4<=a*8&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=a*8||(o.put(ft.PAD0,8),o.getLengthInBits()>=a*8));)o.put(ft.PAD1,8);return ft.createBytes(o,n)}static createBytes(t,e){let r=0,n=0,o=0;const s=new Array(e.length),a=new Array(e.length);for(var l=0;l<e.length;l++){const C=e[l].dataCount,P=e[l].totalCount-C;n=Math.max(n,C),o=Math.max(o,P),s[l]=new Array(C);for(var c=0;c<s[l].length;c++)s[l][c]=255&t.buffer[c+r];r+=C;const k=L.getErrorCorrectPolynomial(P),d=new mt(s[l],k.getLength()-1).mod(k);a[l]=new Array(k.getLength()-1);for(var c=0;c<a[l].length;c++){const x=c+d.getLength()-a[l].length;a[l][c]=x>=0?d.get(x):0}}let h=0;for(var c=0;c<e.length;c++)h+=e[c].totalCount;const f=new Array(h);let m=0;for(var c=0;c<n;c++)for(var l=0;l<e.length;l++)c<s[l].length&&(f[m++]=s[l][c]);for(var c=0;c<o;c++)for(var l=0;l<e.length;l++)c<a[l].length&&(f[m++]=a[l][c]);return f}}ft.PAD0=236;ft.PAD1=17;const Z={L:1,M:0,Q:3,H:2},J={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},st={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};class L{static getBCHTypeInfo(t){let e=t<<10;for(;L.getBCHDigit(e)-L.getBCHDigit(L.G15)>=0;)e^=L.G15<<L.getBCHDigit(e)-L.getBCHDigit(L.G15);return(t<<10|e)^L.G15_MASK}static getBCHTypeNumber(t){let e=t<<12;for(;L.getBCHDigit(e)-L.getBCHDigit(L.G18)>=0;)e^=L.G18<<L.getBCHDigit(e)-L.getBCHDigit(L.G18);return t<<12|e}static getBCHDigit(t){let e=0;for(;t!=0;)e++,t>>>=1;return e}static getPatternPosition(t){return L.PATTERN_POSITION_TABLE[t-1]}static getMask(t,e,r){switch(t){case st.PATTERN000:return(e+r)%2==0;case st.PATTERN001:return e%2==0;case st.PATTERN010:return r%3==0;case st.PATTERN011:return(e+r)%3==0;case st.PATTERN100:return(Math.floor(e/2)+Math.floor(r/3))%2==0;case st.PATTERN101:return e*r%2+e*r%3==0;case st.PATTERN110:return(e*r%2+e*r%3)%2==0;case st.PATTERN111:return(e*r%3+(e+r)%2)%2==0;default:throw new Error(`bad maskPattern:${t}`)}}static getErrorCorrectPolynomial(t){let e=new mt([1],0);for(let r=0;r<t;r++)e=e.multiply(new mt([1,j.gexp(r)],0));return e}static getLengthInBits(t,e){if(1<=e&&e<10)switch(t){case J.MODE_NUMBER:return 10;case J.MODE_ALPHA_NUM:return 9;case J.MODE_8BIT_BYTE:return 8;case J.MODE_KANJI:return 8;default:throw new Error(`mode:${t}`)}else if(e<27)switch(t){case J.MODE_NUMBER:return 12;case J.MODE_ALPHA_NUM:return 11;case J.MODE_8BIT_BYTE:return 16;case J.MODE_KANJI:return 10;default:throw new Error(`mode:${t}`)}else if(e<41)switch(t){case J.MODE_NUMBER:return 14;case J.MODE_ALPHA_NUM:return 13;case J.MODE_8BIT_BYTE:return 16;case J.MODE_KANJI:return 12;default:throw new Error(`mode:${t}`)}else throw new Error(`type:${e}`)}static getLostPoint(t){const e=t.getModuleCount();let r=0;for(var n=0;n<e;n++)for(var o=0;o<e;o++){let l=0;const c=t.isDark(n,o);for(let h=-1;h<=1;h++)if(!(n+h<0||e<=n+h))for(let f=-1;f<=1;f++)o+f<0||e<=o+f||h==0&&f==0||c==t.isDark(n+h,o+f)&&l++;l>5&&(r+=3+l-5)}for(var n=0;n<e-1;n++)for(var o=0;o<e-1;o++){let h=0;t.isDark(n,o)&&h++,t.isDark(n+1,o)&&h++,t.isDark(n,o+1)&&h++,t.isDark(n+1,o+1)&&h++,(h==0||h==4)&&(r+=3)}for(var n=0;n<e;n++)for(var o=0;o<e-6;o++)t.isDark(n,o)&&!t.isDark(n,o+1)&&t.isDark(n,o+2)&&t.isDark(n,o+3)&&t.isDark(n,o+4)&&!t.isDark(n,o+5)&&t.isDark(n,o+6)&&(r+=40);for(var o=0;o<e;o++)for(var n=0;n<e-6;n++)t.isDark(n,o)&&!t.isDark(n+1,o)&&t.isDark(n+2,o)&&t.isDark(n+3,o)&&t.isDark(n+4,o)&&!t.isDark(n+5,o)&&t.isDark(n+6,o)&&(r+=40);let s=0;for(var o=0;o<e;o++)for(var n=0;n<e;n++)t.isDark(n,o)&&s++;return r+=Math.abs(100*s/e/e-50)/5*10,r}}L.PATTERN_POSITION_TABLE=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];L.G15=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;L.G18=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;L.G15_MASK=1<<14|1<<12|1<<10|1<<4|1<<1;class j{static glog(t){if(t<1)throw new Error(`glog(${t})`);return j.LOG_TABLE[t]}static gexp(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return j.EXP_TABLE[t]}}j.EXP_TABLE=new Array(256);j.LOG_TABLE=new Array(256);j._constructor=function(){for(var i=0;i<8;i++)j.EXP_TABLE[i]=1<<i;for(var i=8;i<256;i++)j.EXP_TABLE[i]=j.EXP_TABLE[i-4]^j.EXP_TABLE[i-5]^j.EXP_TABLE[i-6]^j.EXP_TABLE[i-8];for(var i=0;i<255;i++)j.LOG_TABLE[j.EXP_TABLE[i]]=i}();class mt{constructor(t,e){if(t.length==null)throw new Error(`${t.length}/${e}`);let r=0;for(;r<t.length&&t[r]==0;)r++;this.num=new Array(t.length-r+e);for(let n=0;n<t.length-r;n++)this.num[n]=t[n+r]}get(t){return this.num[t]}getLength(){return this.num.length}multiply(t){const e=new Array(this.getLength()+t.getLength()-1);for(let r=0;r<this.getLength();r++)for(let n=0;n<t.getLength();n++)e[r+n]^=j.gexp(j.glog(this.get(r))+j.glog(t.get(n)));return new mt(e,0)}mod(t){if(this.getLength()-t.getLength()<0)return this;const e=j.glog(this.get(0))-j.glog(t.get(0)),r=new Array(this.getLength());for(var n=0;n<this.getLength();n++)r[n]=this.get(n);for(var n=0;n<t.getLength();n++)r[n]^=j.gexp(j.glog(t.get(n))+e);return new mt(r,0).mod(t)}}class at{constructor(t,e){this.totalCount=t,this.dataCount=e}static getRSBlocks(t,e){const r=at.getRsBlockTable(t,e);if(r==null)throw new Error(`bad rs block @ typeNumber:${t}/errorCorrectLevel:${e}`);const n=r.length/3,o=[];for(let s=0;s<n;s++){const a=r[s*3+0],l=r[s*3+1],c=r[s*3+2];for(let h=0;h<a;h++)o.push(new at(l,c))}return o}static getRsBlockTable(t,e){switch(e){case Z.L:return at.RS_BLOCK_TABLE[(t-1)*4+0];case Z.M:return at.RS_BLOCK_TABLE[(t-1)*4+1];case Z.Q:return at.RS_BLOCK_TABLE[(t-1)*4+2];case Z.H:return at.RS_BLOCK_TABLE[(t-1)*4+3];default:return}}}at.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];class fn{constructor(){this.buffer=[],this.length=0}get(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)==1}put(t,e){for(let r=0;r<e;r++)this.putBit((t>>>e-r-1&1)==1)}getLengthInBits(){return this.length}putBit(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}}const rt=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];var un=100,K=256,Qt=K-1,ct=4,me=16,Ht=1<<me,be=10,Kt=10,hn=Ht>>Kt,gn=Ht<<be-Kt,dn=K>>3,zt=6,pn=1<<zt,vn=dn*pn,mn=30,_e=10,xt=1<<_e,we=8,te=1<<we,bn=_e+we,vt=1<<bn,ee=499,re=491,ne=487,ye=503,_n=3*ye;function wn(i,t){var e,r,n,o,s;function a(){e=[],r=new Int32Array(256),n=new Int32Array(K),o=new Int32Array(K),s=new Int32Array(K>>3);var d,p;for(d=0;d<K;d++)p=(d<<ct+8)/K,e[d]=new Float64Array([p,p,p,0]),o[d]=Ht/K,n[d]=0}function l(){for(var d=0;d<K;d++)e[d][0]>>=ct,e[d][1]>>=ct,e[d][2]>>=ct,e[d][3]=d}function c(d,p,x,g,_){e[p][0]-=d*(e[p][0]-x)/xt,e[p][1]-=d*(e[p][1]-g)/xt,e[p][2]-=d*(e[p][2]-_)/xt}function h(d,p,x,g,_){for(var v=Math.abs(p-d),w=Math.min(p+d,K),A=p+1,T=p-1,M=1,u,F;A<w||T>v;)F=s[M++],A<w&&(u=e[A++],u[0]-=F*(u[0]-x)/vt,u[1]-=F*(u[1]-g)/vt,u[2]-=F*(u[2]-_)/vt),T>v&&(u=e[T--],u[0]-=F*(u[0]-x)/vt,u[1]-=F*(u[1]-g)/vt,u[2]-=F*(u[2]-_)/vt)}function f(d,p,x){var g=2147483647,_=g,v=-1,w=v,A,T,M,u,F;for(A=0;A<K;A++)T=e[A],M=Math.abs(T[0]-d)+Math.abs(T[1]-p)+Math.abs(T[2]-x),M<g&&(g=M,v=A),u=M-(n[A]>>me-ct),u<_&&(_=u,w=A),F=o[A]>>Kt,o[A]-=F,n[A]+=F<<be;return o[v]+=hn,n[v]-=gn,w}function m(){var d,p,x,g,_,v,w=0,A=0;for(d=0;d<K;d++){for(x=e[d],_=d,v=x[1],p=d+1;p<K;p++)g=e[p],g[1]<v&&(_=p,v=g[1]);if(g=e[_],d!=_&&(p=g[0],g[0]=x[0],x[0]=p,p=g[1],g[1]=x[1],x[1]=p,p=g[2],g[2]=x[2],x[2]=p,p=g[3],g[3]=x[3],x[3]=p),v!=w){for(r[w]=A+d>>1,p=w+1;p<v;p++)r[p]=d;w=v,A=d}}for(r[w]=A+Qt>>1,p=w+1;p<256;p++)r[p]=Qt}function C(d,p,x){for(var g,_,v,w=1e3,A=-1,T=r[p],M=T-1;T<K||M>=0;)T<K&&(_=e[T],v=_[1]-p,v>=w?T=K:(T++,v<0&&(v=-v),g=_[0]-d,g<0&&(g=-g),v+=g,v<w&&(g=_[2]-x,g<0&&(g=-g),v+=g,v<w&&(w=v,A=_[3])))),M>=0&&(_=e[M],v=p-_[1],v>=w?M=-1:(M--,v<0&&(v=-v),g=_[0]-d,g<0&&(g=-g),v+=g,v<w&&(g=_[2]-x,g<0&&(g=-g),v+=g,v<w&&(w=v,A=_[3]))));return A}function P(){var d,p=i.length,x=30+(t-1)/3,g=p/(3*t),_=~~(g/un),v=xt,w=vn,A=w>>zt;for(A<=1&&(A=0),d=0;d<A;d++)s[d]=v*((A*A-d*d)*te/(A*A));var T;p<_n?(t=1,T=3):p%ee!==0?T=3*ee:p%re!==0?T=3*re:p%ne!==0?T=3*ne:T=3*ye;var M,u,F,y,R=0;for(d=0;d<g;)if(M=(i[R]&255)<<ct,u=(i[R+1]&255)<<ct,F=(i[R+2]&255)<<ct,y=f(M,u,F),c(v,y,M,u,F),A!==0&&h(A,y,M,u,F),R+=T,R>=p&&(R-=p),d++,_===0&&(_=1),d%_===0)for(v-=v/x,w-=w/mn,A=w>>zt,A<=1&&(A=0),y=0;y<A;y++)s[y]=v*((A*A-y*y)*te/(A*A))}function k(){a(),P(),l(),m()}this.buildColormap=k;function O(){for(var d=[],p=[],x=0;x<K;x++)p[e[x][3]]=x;for(var g=0,_=0;_<K;_++){var v=p[_];d[g++]=e[v][0],d[g++]=e[v][1],d[g++]=e[v][2]}return d}this.getColormap=O,this.lookupRGB=C}var oe=-1,At=12,_t=5003,yn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];function Cn(i,t,e,r){var n=Math.max(2,r),o=new Uint8Array(256),s=new Int32Array(_t),a=new Int32Array(_t),l,c=0,h,f=0,m,C=!1,P,k,O,d,p,x;function g(y,R){o[h++]=y,h>=254&&T(R)}function _(y){v(_t),f=k+2,C=!0,F(k,y)}function v(y){for(var R=0;R<y;++R)s[R]=-1}function w(y,R){var b,ut,z,q,lt,G,Q;for(P=y,C=!1,x=P,m=M(x),k=1<<y-1,O=k+1,f=k+2,h=0,q=u(),Q=0,b=_t;b<65536;b*=2)++Q;Q=8-Q,G=_t,v(G),F(k,R);t:for(;(ut=u())!=oe;){if(b=(ut<<At)+q,z=ut<<Q^q,s[z]===b){q=a[z];continue}else if(s[z]>=0){lt=G-z,z===0&&(lt=1);do if((z-=lt)<0&&(z+=G),s[z]===b){q=a[z];continue t}while(s[z]>=0)}F(q,R),q=ut,f<1<<At?(a[z]=f++,s[z]=b):_(R)}F(q,R),F(O,R)}function A(y){y.writeByte(n),d=i*t,p=0,w(n+1,y),y.writeByte(0)}function T(y){h>0&&(y.writeByte(h),y.writeBytes(o,0,h),h=0)}function M(y){return(1<<y)-1}function u(){if(d===0)return oe;--d;var y=e[p++];return y&255}function F(y,R){for(l&=yn[c],c>0?l|=y<<c:l=y,c+=x;c>=8;)g(l&255,R),l>>=8,c-=8;if((f>m||C)&&(C?(m=M(x=P),C=!1):(++x,x==At?m=1<<At:m=M(x))),y==O){for(;c>0;)g(l&255,R),l>>=8,c-=8;T(R)}}this.encode=A}function V(){this.page=-1,this.pages=[],this.newPage()}V.pageSize=4096;V.charMap={};for(var Bt=0;Bt<256;Bt++)V.charMap[Bt]=String.fromCharCode(Bt);V.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(V.pageSize),this.cursor=0};V.prototype.getData=function(){for(var i="",t=0;t<this.pages.length;t++)for(var e=0;e<V.pageSize;e++)i+=V.charMap[this.pages[t][e]];return i};V.prototype.toFlattenUint8Array=function(){const i=[];for(var t=0;t<this.pages.length;t++)if(t===this.pages.length-1){const r=Uint8Array.from(this.pages[t].slice(0,this.cursor));i.push(r)}else i.push(this.pages[t]);const e=new Uint8Array(i.reduce((r,n)=>r+n.length,0));return i.reduce((r,n)=>(e.set(n,r),r+n.length),0),e};V.prototype.writeByte=function(i){this.cursor>=V.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=i};V.prototype.writeUTFBytes=function(i){for(var t=i.length,e=0;e<t;e++)this.writeByte(i.charCodeAt(e))};V.prototype.writeBytes=function(i,t,e){for(var r=e||i.length,n=t||0;n<r;n++)this.writeByte(i[n])};function N(i,t){this.width=~~i,this.height=~~t,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.neuQuant=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.dither=!1,this.globalPalette=!1,this.out=new V}N.prototype.setDelay=function(i){this.delay=Math.round(i/10)};N.prototype.setFrameRate=function(i){this.delay=Math.round(100/i)};N.prototype.setDispose=function(i){i>=0&&(this.dispose=i)};N.prototype.setRepeat=function(i){this.repeat=i};N.prototype.setTransparent=function(i){this.transparent=i};N.prototype.addFrame=function(i){this.image=i,this.colorTab=this.globalPalette&&this.globalPalette.slice?this.globalPalette:null,this.getImagePixels(),this.analyzePixels(),this.globalPalette===!0&&(this.globalPalette=this.colorTab),this.firstFrame&&(this.writeHeader(),this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),!this.firstFrame&&!this.globalPalette&&this.writePalette(),this.writePixels(),this.firstFrame=!1};N.prototype.finish=function(){this.out.writeByte(59)};N.prototype.setQuality=function(i){i<1&&(i=1),this.sample=i};N.prototype.setDither=function(i){i===!0&&(i="FloydSteinberg"),this.dither=i};N.prototype.setGlobalPalette=function(i){this.globalPalette=i};N.prototype.getGlobalPalette=function(){return this.globalPalette&&this.globalPalette.slice&&this.globalPalette.slice(0)||this.globalPalette};N.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")};N.prototype.analyzePixels=function(){this.colorTab||(this.neuQuant=new wn(this.pixels,this.sample),this.neuQuant.buildColormap(),this.colorTab=this.neuQuant.getColormap()),this.dither?this.ditherPixels(this.dither.replace("-serpentine",""),this.dither.match(/-serpentine/)!==null):this.indexPixels(),this.pixels=null,this.colorDepth=8,this.palSize=7,this.transparent!==null&&(this.transIndex=this.findClosest(this.transparent,!0))};N.prototype.indexPixels=function(i){var t=this.pixels.length/3;this.indexedPixels=new Uint8Array(t);for(var e=0,r=0;r<t;r++){var n=this.findClosestRGB(this.pixels[e++]&255,this.pixels[e++]&255,this.pixels[e++]&255);this.usedEntry[n]=!0,this.indexedPixels[r]=n}};N.prototype.ditherPixels=function(i,t){var e={FalseFloydSteinberg:[[.375,1,0],[.375,0,1],[.25,1,1]],FloydSteinberg:[[.4375,1,0],[.1875,-1,1],[.3125,0,1],[.0625,1,1]],Stucki:[[.19047619047619047,1,0],[.09523809523809523,2,0],[.047619047619047616,-2,1],[.09523809523809523,-1,1],[.19047619047619047,0,1],[.09523809523809523,1,1],[.047619047619047616,2,1],[.023809523809523808,-2,2],[.047619047619047616,-1,2],[.09523809523809523,0,2],[.047619047619047616,1,2],[.023809523809523808,2,2]],Atkinson:[[.125,1,0],[.125,2,0],[.125,-1,1],[.125,0,1],[.125,1,1],[.125,0,2]]};if(!i||!e[i])throw"Unknown dithering kernel: "+i;var r=e[i],n=0,o=this.height,s=this.width,a=this.pixels,l=t?-1:1;this.indexedPixels=new Uint8Array(this.pixels.length/3);for(var c=0;c<o;c++){t&&(l=l*-1);for(var h=l==1?0:s-1,f=l==1?s:0;h!==f;h+=l){n=c*s+h;var m=n*3,C=a[m],P=a[m+1],k=a[m+2];m=this.findClosestRGB(C,P,k),this.usedEntry[m]=!0,this.indexedPixels[n]=m,m*=3;for(var O=this.colorTab[m],d=this.colorTab[m+1],p=this.colorTab[m+2],x=C-O,g=P-d,_=k-p,v=l==1?0:r.length-1,w=l==1?r.length:0;v!==w;v+=l){var A=r[v][1],T=r[v][2];if(A+h>=0&&A+h<s&&T+c>=0&&T+c<o){var M=r[v][0];m=n+A+T*s,m*=3,a[m]=Math.max(0,Math.min(255,a[m]+x*M)),a[m+1]=Math.max(0,Math.min(255,a[m+1]+g*M)),a[m+2]=Math.max(0,Math.min(255,a[m+2]+_*M))}}}}};N.prototype.findClosest=function(i,t){return this.findClosestRGB((i&16711680)>>16,(i&65280)>>8,i&255,t)};N.prototype.findClosestRGB=function(i,t,e,r){if(this.colorTab===null)return-1;if(this.neuQuant&&!r)return this.neuQuant.lookupRGB(i,t,e);for(var n=0,o=256*256*256,s=this.colorTab.length,a=0,l=0;a<s;l++){var c=i-(this.colorTab[a++]&255),h=t-(this.colorTab[a++]&255),f=e-(this.colorTab[a++]&255),m=c*c+h*h+f*f;(!r||this.usedEntry[l])&&m<o&&(o=m,n=l)}return n};N.prototype.getImagePixels=function(){var i=this.width,t=this.height;this.pixels=new Uint8Array(i*t*3);for(var e=this.image,r=0,n=0,o=0;o<t;o++)for(var s=0;s<i;s++)this.pixels[n++]=e[r++],this.pixels[n++]=e[r++],this.pixels[n++]=e[r++],r++};N.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var i,t;this.transparent===null?(i=0,t=0):(i=1,t=2),this.dispose>=0&&(t=this.dispose&7),t<<=2,this.out.writeByte(0|t|0|i),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)};N.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame||this.globalPalette?this.out.writeByte(0):this.out.writeByte(128|this.palSize)};N.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)};N.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)};N.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var i=3*256-this.colorTab.length,t=0;t<i;t++)this.out.writeByte(0)};N.prototype.writeShort=function(i){this.out.writeByte(i&255),this.out.writeByte(i>>8&255)};N.prototype.writePixels=function(){var i=new Cn(this.width,this.height,this.indexedPixels,this.colorDepth);i.encode(this.out)};N.prototype.stream=function(){return this.out};var xn=globalThis&&globalThis.__awaiter||function(i,t,e,r){function n(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(f){s(f)}}function l(h){try{c(r.throw(h))}catch(f){s(f)}}function c(h){h.done?o(h.value):n(h.value).then(a,l)}c((r=r.apply(i,t||[])).next())})};const{Canvas:it}=Hr,Pt=.4;function ie(i){if(!i)return;function t(e){e.onload=null,e.onerror=null}return new Promise(function(e,r){if(i.slice(0,4)=="data"){let o=new Image;o.onload=function(){e(o),t(o)},o.onerror=function(){r("Image load error"),t(o)},o.src=i;return}let n=new Image;n.setAttribute("crossOrigin","Anonymous"),n.onload=function(){e(n)},n.onerror=function(){r("Image load error")},n.src=i})}class I{constructor(t){const e=Object.assign({},t);if(Object.keys(I.defaultOptions).forEach(r=>{r in e||Object.defineProperty(e,r,{value:I.defaultOptions[r],enumerable:!0,writable:!0})}),e.components?typeof e.components=="object"&&Object.keys(I.defaultComponentOptions).forEach(r=>{r in e.components?Object.defineProperty(e.components,r,{value:Object.assign(Object.assign({},I.defaultComponentOptions[r]),e.components[r]),enumerable:!0,writable:!0}):Object.defineProperty(e.components,r,{value:I.defaultComponentOptions[r],enumerable:!0,writable:!0})}):e.components=I.defaultComponentOptions,e.dotScale!==null&&e.dotScale!==void 0){if(e.dotScale<=0||e.dotScale>1)throw new Error("dotScale should be in range (0, 1].");e.components.data.scale=e.dotScale,e.components.timing.scale=e.dotScale,e.components.alignment.scale=e.dotScale}this.options=e,this.canvas=new it(t.size,t.size),this.canvasContext=this.canvas.getContext("2d"),this.qrCode=new ft(-1,this.options.correctLevel),Number.isInteger(this.options.maskPattern)&&(this.qrCode.maskPattern=this.options.maskPattern),Number.isInteger(this.options.version)&&(this.qrCode.typeNumber=this.options.version),this.qrCode.addData(this.options.text),this.qrCode.make()}draw(){return new Promise(t=>this._draw().then(t))}_clear(){this.canvasContext.clearRect(0,0,this.canvas.width,this.canvas.height)}static _prepareRoundedCornerClip(t,e,r,n,o,s){t.beginPath(),t.moveTo(e,r),t.arcTo(e+n,r,e+n,r+o,s),t.arcTo(e+n,r+o,e,r+o,s),t.arcTo(e,r+o,e,r,s),t.arcTo(e,r,e+n,r,s),t.closePath()}static _getAverageRGB(t){const r={r:0,g:0,b:0};let n,o,s=-4;const a={r:0,g:0,b:0};let l=0;o=t.naturalHeight||t.height,n=t.naturalWidth||t.width;const h=new it(n,o).getContext("2d");if(!h)return r;h.drawImage(t,0,0);let f;try{f=h.getImageData(0,0,n,o)}catch{return r}for(;(s+=5*4)<f.data.length;)f.data[s]>200||f.data[s+1]>200||f.data[s+2]>200||(++l,a.r+=f.data[s],a.g+=f.data[s+1],a.b+=f.data[s+2]);return a.r=~~(a.r/l),a.g=~~(a.g/l),a.b=~~(a.b/l),a}static _drawDot(t,e,r,n,o=0,s=1){t.fillRect((e+o)*n,(r+o)*n,s*n,s*n)}static _drawAlignProtector(t,e,r,n){t.clearRect((e-2)*n,(r-2)*n,5*n,5*n),t.fillRect((e-2)*n,(r-2)*n,5*n,5*n)}static _drawAlign(t,e,r,n,o=0,s=1,a,l){const c=t.fillStyle;t.fillStyle=a,new Array(4).fill(0).map((h,f)=>{I._drawDot(t,e-2+f,r-2,n,o,s),I._drawDot(t,e+2,r-2+f,n,o,s),I._drawDot(t,e+2-f,r+2,n,o,s),I._drawDot(t,e-2,r+2-f,n,o,s)}),I._drawDot(t,e,r,n,o,s),l||(t.fillStyle="rgba(255, 255, 255, 0.6)",new Array(2).fill(0).map((h,f)=>{I._drawDot(t,e-1+f,r-1,n,o,s),I._drawDot(t,e+1,r-1+f,n,o,s),I._drawDot(t,e+1-f,r+1,n,o,s),I._drawDot(t,e-1,r+1-f,n,o,s)})),t.fillStyle=c}_draw(){var t,e,r,n,o,s,a,l,c,h,f,m,C,P,k,O,d,p,x;return xn(this,void 0,void 0,function*(){const g=(t=this.qrCode)===null||t===void 0?void 0:t.moduleCount,_=this.options.size;let v=this.options.margin;(v<0||v*2>=_)&&(v=0);const w=Math.ceil(v),A=_-2*v,T=this.options.whiteMargin,M=this.options.backgroundDimming,u=Math.ceil(A/g),F=u*g,y=F+2*w,R=new it(y,y),b=R.getContext("2d");this._clear(),b.save(),b.translate(w,w);const ut=new it(y,y),z=ut.getContext("2d");let q=null,lt=[];if(this.options.gifBackground){const B=rn(this.options.gifBackground);if(q=B,lt=sn(B,!0),this.options.autoColor){let D=0,E=0,S=0,H=0;for(let $=0;$<lt[0].colorTable.length;$++){const U=lt[0].colorTable[$];U[0]>200||U[1]>200||U[2]>200||U[0]===0&&U[1]===0&&U[2]===0||(H++,D+=U[0],E+=U[1],S+=U[2])}D=~~(D/H),E=~~(E/H),S=~~(S/H),this.options.colorDark=`rgb(${D},${E},${S})`}}else if(this.options.backgroundImage){const B=yield ie(this.options.backgroundImage);if(this.options.autoColor){const D=I._getAverageRGB(B);this.options.colorDark=`rgb(${D.r},${D.g},${D.b})`}z.drawImage(B,0,0,B.width,B.height,0,0,y,y),z.rect(0,0,y,y),z.fillStyle=M,z.fill()}else z.rect(0,0,y,y),z.fillStyle=this.options.colorLight,z.fill();const G=L.getPatternPosition(this.qrCode.typeNumber),Q=((r=(e=this.options.components)===null||e===void 0?void 0:e.data)===null||r===void 0?void 0:r.scale)||Pt,Xt=(1-Q)*.5;for(let B=0;B<g;B++)for(let D=0;D<g;D++){const E=this.qrCode.isDark(B,D),S=D<8&&(B<8||B>=g-8)||D>=g-8&&B<8,H=B==6&&D>=8&&D<=g-8||D==6&&B>=8&&B<=g-8;let $=S||H;for(let X=1;X<G.length-1;X++)$=$||B>=G[X]-2&&B<=G[X]+2&&D>=G[X]-2&&D<=G[X]+2;const U=D*u+($?0:Xt*u),tt=B*u+($?0:Xt*u);if(b.strokeStyle=E?this.options.colorDark:this.options.colorLight,b.lineWidth=.5,b.fillStyle=E?this.options.colorDark:this.options.colorLight,G.length===0)$||b.fillRect(U,tt,($?1:Q)*u,($?1:Q)*u);else{const X=D<g-4&&D>=g-4-5&&B<g-4&&B>=g-4-5;!$&&!X&&b.fillRect(U,tt,($?1:Q)*u,($?1:Q)*u)}}const W=G[G.length-1],Ce=this.options.colorLight;if(b.fillStyle=Ce,b.fillRect(0,0,8*u,8*u),b.fillRect(0,(g-8)*u,8*u,8*u),b.fillRect((g-8)*u,0,8*u,8*u),!((o=(n=this.options.components)===null||n===void 0?void 0:n.timing)===null||o===void 0)&&o.protectors&&(b.fillRect(8*u,6*u,(g-8-8)*u,u),b.fillRect(6*u,8*u,u,(g-8-8)*u)),!((a=(s=this.options.components)===null||s===void 0?void 0:s.cornerAlignment)===null||a===void 0)&&a.protectors&&I._drawAlignProtector(b,W,W,u),!((c=(l=this.options.components)===null||l===void 0?void 0:l.alignment)===null||c===void 0)&&c.protectors)for(let B=0;B<G.length;B++)for(let D=0;D<G.length;D++){const E=G[D],S=G[B];if(!(E===6&&(S===6||S===W))){if(S===6&&(E===6||E===W))continue;if(E===W&&S===W)continue;I._drawAlignProtector(b,E,S,u)}}b.fillStyle=this.options.colorDark,b.fillRect(0,0,7*u,u),b.fillRect((g-7)*u,0,7*u,u),b.fillRect(0,6*u,7*u,u),b.fillRect((g-7)*u,6*u,7*u,u),b.fillRect(0,(g-7)*u,7*u,u),b.fillRect(0,(g-7+6)*u,7*u,u),b.fillRect(0,0,u,7*u),b.fillRect(6*u,0,u,7*u),b.fillRect((g-7)*u,0,u,7*u),b.fillRect((g-7+6)*u,0,u,7*u),b.fillRect(0,(g-7)*u,u,7*u),b.fillRect(6*u,(g-7)*u,u,7*u),b.fillRect(2*u,2*u,3*u,3*u),b.fillRect((g-7+2)*u,2*u,3*u,3*u),b.fillRect(2*u,(g-7+2)*u,3*u,3*u);const St=((f=(h=this.options.components)===null||h===void 0?void 0:h.timing)===null||f===void 0?void 0:f.scale)||Pt,Zt=(1-St)*.5;for(let B=0;B<g-8;B+=2)I._drawDot(b,8+B,6,u,Zt,St),I._drawDot(b,6,8+B,u,Zt,St);const Vt=((C=(m=this.options.components)===null||m===void 0?void 0:m.cornerAlignment)===null||C===void 0?void 0:C.scale)||Pt,xe=(1-Vt)*.5;I._drawAlign(b,W,W,u,xe,Vt,this.options.colorDark,((k=(P=this.options.components)===null||P===void 0?void 0:P.cornerAlignment)===null||k===void 0?void 0:k.protectors)||!1);const Jt=((d=(O=this.options.components)===null||O===void 0?void 0:O.alignment)===null||d===void 0?void 0:d.scale)||Pt,Ae=(1-Jt)*.5;for(let B=0;B<G.length;B++)for(let D=0;D<G.length;D++){const E=G[D],S=G[B];if(!(E===6&&(S===6||S===W))){if(S===6&&(E===6||E===W))continue;if(E===W&&S===W)continue;I._drawAlign(b,E,S,u,Ae,Jt,this.options.colorDark,((x=(p=this.options.components)===null||p===void 0?void 0:p.alignment)===null||x===void 0?void 0:x.protectors)||!1)}}if(T&&(b.fillStyle=this.options.backgroundColor,b.fillRect(-w,-w,y,w),b.fillRect(-w,F,y,w),b.fillRect(F,-w,w,y),b.fillRect(-w,-w,w,y)),this.options.logoImage){const B=yield ie(this.options.logoImage);let D=this.options.logoScale,E=this.options.logoMargin,S=this.options.logoCornerRadius;(D<=0||D>=1)&&(D=.2),E<0&&(E=0),S<0&&(S=0);const H=F*D,$=.5*(y-H),U=$;b.restore(),b.fillStyle=this.options.logoBackgroundColor,b.save(),I._prepareRoundedCornerClip(b,$-E,U-E,H+2*E,H+2*E,S+E),b.clip();const tt=b.globalCompositeOperation;b.globalCompositeOperation="destination-out",b.fill(),b.globalCompositeOperation=tt,b.restore(),b.save(),I._prepareRoundedCornerClip(b,$,U,H,H,S),b.clip(),b.drawImage(B,$,U,H,H),b.restore(),b.save(),b.translate(w,w)}if(q){let B,D,E,S,H,$;if(lt.forEach(function(U){B||(B=new N(_,_),B.setDelay(U.delay),B.setRepeat(0));const{width:tt,height:X}=U.dims;D||(D=new it(tt,X),E=D.getContext("2d"),E.rect(0,0,D.width,D.height),E.fillStyle="#ffffff",E.fill()),(!S||!$||tt!==S.width||X!==S.height)&&(S=new it(tt,X),H=S.getContext("2d"),$=H.createImageData(tt,X)),$.data.set(U.patch),H.putImageData($,0,0),E.drawImage(S.getContext("2d").canvas,U.dims.left,U.dims.top);const yt=new it(y,y),bt=yt.getContext("2d");bt.drawImage(D.getContext("2d").canvas,0,0,y,y),bt.rect(0,0,y,y),bt.fillStyle=M,bt.fill(),bt.drawImage(R.getContext("2d").canvas,0,0,y,y);const It=new it(_,_),Wt=It.getContext("2d");Wt.drawImage(yt.getContext("2d").canvas,0,0,_,_),B.addFrame(Wt.getImageData(0,0,It.width,It.height).data)}),!B)throw new Error("No frames.");if(B.finish(),se(this.canvas)){const tt=B.stream().toFlattenUint8Array().reduce((X,yt)=>X+String.fromCharCode(yt),"");return Promise.resolve(`data:image/gif;base64,${window.btoa(tt)}`)}return Promise.resolve(Buffer.from(B.stream().toFlattenUint8Array()))}else{z.drawImage(R.getContext("2d").canvas,0,0,y,y),b.drawImage(ut.getContext("2d").canvas,-w,-w,y,y);const B=new it(_,_);B.getContext("2d").drawImage(R.getContext("2d").canvas,0,0,_,_),this.canvas=B;const E=this.options.gifBackground?"gif":"png";return se(this.canvas)?Promise.resolve(this.canvas.toDataURL(E)):Promise.resolve(this.canvas.toBuffer(E))}})}}I.CorrectLevel=Z;I.defaultComponentOptions={data:{scale:.4},timing:{scale:.5,protectors:!1},alignment:{scale:.5,protectors:!1},cornerAlignment:{scale:.5,protectors:!0}};I.defaultOptions={text:"",size:400,margin:20,colorDark:"#000000",colorLight:"rgba(255, 255, 255, 0.6)",correctLevel:Z.M,backgroundImage:void 0,backgroundDimming:"rgba(0,0,0,0)",logoImage:void 0,logoScale:.2,logoMargin:4,logoCornerRadius:8,whiteMargin:!0,components:I.defaultComponentOptions,autoColor:!0,logoBackgroundColor:"#ffffff",backgroundColor:"#ffffff"};function se(i){try{return i instanceof HTMLElement}catch{return typeof i=="object"&&i.nodeType===1&&typeof i.style=="object"&&typeof i.ownerDocument=="object"}}const An={props:{text:{type:String,required:!0},qid:{type:String},correctLevel:{type:Number,default:1},size:{type:Number,default:200},margin:{type:Number,default:20},colorDark:{type:String,default:"#000000"},colorLight:{type:String,default:"#FFFFFF"},bgSrc:{type:String,default:void 0},background:{type:String,default:"rgba(0,0,0,0)"},backgroundDimming:{type:String,default:"rgba(0,0,0,0)"},logoSrc:{type:String,default:void 0},logoBackgroundColor:{type:String,default:"rgba(255,255,255,1)"},gifBgSrc:{type:String,default:void 0},logoScale:{type:Number,default:.2},logoMargin:{type:Number,default:0},logoCornerRadius:{type:Number,default:8},whiteMargin:{type:[Boolean,String],default:!0},dotScale:{type:Number,default:1},autoColor:{type:[Boolean,String],default:!0},binarize:{type:[Boolean,String],default:!1},binarizeThreshold:{type:Number,default:128},callback:{type:Function,default:function(){}},bindElement:{type:Boolean,default:!0},backgroundColor:{type:String,default:"#FFFFFF"},components:{default:function(){return{data:{scale:1},timing:{scale:1,protectors:!1},alignment:{scale:1,protectors:!1},cornerAlignment:{scale:1,protectors:!0}}}}},name:"vue-qr",data(){return{imgUrl:""}},watch:{$props:{deep:!0,handler(){this.main()}}},mounted(){this.main()},methods:{async main(){if(this.gifBgSrc){const e=await Cr(this.gifBgSrc),r=this.logoSrc;this.render(void 0,r,e);return}const i=this.bgSrc,t=this.logoSrc;this.render(i,t)},async render(i,t,e){const r=this;new I({gifBackground:e,text:r.text,size:r.size,margin:r.margin,colorDark:r.colorDark,colorLight:r.colorLight,backgroundColor:r.backgroundColor,backgroundImage:i,backgroundDimming:r.backgroundDimming,logoImage:t,logoScale:r.logoScale,logoBackgroundColor:r.logoBackgroundColor,correctLevel:r.correctLevel,logoMargin:r.logoMargin,logoCornerRadius:r.logoCornerRadius,whiteMargin:Mt(r.whiteMargin),dotScale:r.dotScale,autoColor:Mt(r.autoColor),binarize:Mt(r.binarize),binarizeThreshold:r.binarizeThreshold,components:r.components}).draw().then(n=>{this.imgUrl=n,r.callback&&r.callback(n,r.qid)})}}},Bn=["src"];function Pn(i,t,e,r,n,o){return e.bindElement?($t(),le("img",{key:0,style:{display:"inline-block"},src:n.imgUrl},null,8,Bn)):ce("",!0)}const kn=ae(An,[["render",Pn]]),Dn={class:"main"},Tn={class:"boxs"},En={class:"name"},Sn={class:"add"},In={class:"mains"},Ln={class:"box"},Mn={class:"tip1 tip"},Fn={class:"qrCode",id:"qrCode"},Rn={class:"tip2 tip"},Nn=fe({name:"Invitation"}),On=fe({...Nn,setup(i){Be();const{proxy:t}=wr(),e=Pe(),r=ke(()=>e.address),n=Ct(location.origin+"?code="+r.value),o=Ct(""),s=f=>new URL(Object.assign({"../../assets/1st.png":Me,"../../assets/2st.png":Fe,"../../assets/3st.png":Re,"../../assets/D_bg.png":Ne,"../../assets/Increase.png":Oe,"../../assets/InvitationBG.png":$e,"../../assets/NFTbg.png":Ue,"../../assets/Popover.png":ze,"../../assets/RankBg.png":je,"../../assets/bannar1.png":Ge,"../../assets/bannar2.png":He,"../../assets/bg.png":Ke,"../../assets/bgz.png":Xe,"../../assets/bottomBg.png":Ze,"../../assets/coin.png":Ve,"../../assets/copy.png":Je,"../../assets/daa.png":We,"../../assets/down.png":Ye,"../../assets/erCodeLogo.png":qe,"../../assets/head_down.png":Qe,"../../assets/head_language.png":tr,"../../assets/index.png":er,"../../assets/index2.png":rr,"../../assets/index3.png":nr,"../../assets/index4.png":or,"../../assets/index5.png":ir,"../../assets/indexTips.png":sr,"../../assets/invitationCardBg.png":ar,"../../assets/l.png":lr,"../../assets/loading.png":cr,"../../assets/logo.png":fr,"../../assets/profit.png":ur,"../../assets/r.png":hr,"../../assets/right.png":gr,"../../assets/s0.png":dr,"../../assets/s1.png":pr,"../../assets/success.png":vr,"../../assets/vip.png":mr})[`../../assets/${f}.png`],self.location).href,a=Ct(!0),l=Ct(!0),c=()=>{var f=o.value.split(","),m=atob(f[1]);let C=new ArrayBuffer(m.length),P=new Uint8Array(C);for(let x=0;x<m.length;x++)P[x]=m.charCodeAt(x);var k=new Blob([C],{type:"application/octet-stream"}),O=URL.createObjectURL(k),d=document.createElement("a");d.href=O,d.download=new Date().valueOf()+".png";var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),d.dispatchEvent(p),URL.revokeObjectURL(O)},h=f=>{l.value=!1,o.value=f};return(f,m)=>{const C=br,P=yr,k=_r;return $t(),le("div",Dn,[Lt(C,{bgColor:"transparent"}),ot("div",Tn,[ot("div",En,pt(f.$t("InviteFriends")),1),ot("div",Sn,pt(f.$t("together")),1)]),ot("div",In,[ot("div",Ln,[ot("div",Mn,pt(f.$t("Method1")),1),ot("div",Fn,[l.value?($t(),De(P,{key:0})):ce("",!0),Lt(kn,{style:Te({display:l.value?"none":"block"}),text:n.value,class:"download",id:"download",correctLevel:3,margin:10,logoSrc:s("erCodeLogo"),callback:h,logoMargin:5},null,8,["style","text","logoSrc"])]),ot("div",{class:Ee(["save",a.value?"savebg":""]),onClick:c},pt(f.$t(a.value?"SaveQR":"")),3),ot("div",Rn,pt(f.$t("Method2")),1),Lt(k,{class:"b tns",block:"",round:"",color:"#F8CF39",onClick:m[0]||(m[0]=O=>Le(t).copy(n.value))},{default:Se(()=>[Ie(pt(f.$t("CopyInvitation")),1)]),_:1})])])])}}});const Un=ae(On,[["__scopeId","data-v-cfc4a0fc"]]);export{Un as default};
